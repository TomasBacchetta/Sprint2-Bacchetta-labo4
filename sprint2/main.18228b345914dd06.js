"use strict";(self.webpackChunkSprint1=self.webpackChunkSprint1||[]).push([[179],{2011:(pt,Me,R)=>{R.d(Me,{Dh:()=>ge,GT:()=>pe,Ot:()=>oe,cc:()=>be,hO:()=>Oe,on:()=>V,pX:()=>de,xv:()=>he});var h=R(4650),Q=R(127),P=R(880);pt=R.hmd(pt);const ne=["ngOnDestroy"],de=(ue,ot,rt,xe={})=>new Proxy(ue,{get:(we,Ce)=>rt.runOutsideAngular(()=>{var Ge;if(ue[Ce])return!(null===(Ge=xe?.spy)||void 0===Ge)&&Ge.get&&xe.spy.get(Ce,ue[Ce]),ue[Ce];if(ne.indexOf(Ce)>-1)return()=>{};const Ue=ot.toPromise().then(L=>{const ve=L&&L[Ce];return"function"==typeof ve?ve.bind(L):ve&&ve.then?ve.then(Z=>rt.run(()=>Z)):rt.run(()=>ve)});return new Proxy(()=>{},{get:(L,ve)=>Ue[ve],apply:(L,ve,Z)=>Ue.then(J=>{var ie;const ee=J&&J(...Z);return!(null===(ie=xe?.spy)||void 0===ie)&&ie.apply&&xe.spy.apply(Ce,Z,ee),ee})})})}),pe=(ue,ot)=>{ot.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(xe=>{Object.defineProperty(ue.prototype,xe,Object.getOwnPropertyDescriptor(rt.prototype||rt,xe))})})};class oe{constructor(ot){return ot}}const ge=new h.OlP("angularfire2.app.options"),he=new h.OlP("angularfire2.app.name");function V(ue,ot,rt){const we="object"==typeof rt&&rt||{};we.name=we.name||"string"==typeof rt&&rt||"[DEFAULT]";const Ge=Q.Z.apps.filter(Ue=>Ue&&Ue.name===we.name)[0]||ot.runOutsideAngular(()=>Q.Z.initializeApp(ue,we));try{JSON.stringify(ue)!==JSON.stringify(Ge.options)&&j("error",`${Ge.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(Ge)}const j=(ue,...ot)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ue](...ot)},K={provide:oe,useFactory:V,deps:[ge,h.R0b,[new h.FiY,he]]};let Oe=(()=>{class ue{constructor(rt){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",h.q4F.full,rt.toString())}static initializeApp(rt,xe){return{ngModule:ue,providers:[{provide:ge,useValue:rt},{provide:he,useValue:xe}]}}}return ue.\u0275fac=function(rt){return new(rt||ue)(h.LFG(h.Lbi))},ue.\u0275mod=h.oAB({type:ue}),ue.\u0275inj=h.cJS({providers:[K]}),ue})();function be(ue,ot,rt,xe,we){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===ue)||[];if(Ce)return function Ie(ue,ot){try{return ue.toString()===ot.toString()}catch{return ue===ot}}(we,Ge)||(me("error",`${ot} was already initialized on the ${rt} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:we,was:Ge})),Ce;{const Ue=xe();return globalThis.\u0275AngularfireInstanceCache.push([ue,Ue,we]),Ue}}const Je=!!pt.hot,me=(ue,...ot)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ue](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(pt,Me,R)=>{R.d(Me,{q4:()=>Su,iC:()=>xu,HU:()=>sl,vb:()=>Ra,JM:()=>Fn,nk:()=>Qm});var h=R(4650),Q=R(5867),P=R(5861),ne=R(9681),de=R(2090),pe=R(4859),oe=R(1877);R(2833);const he="@firebase/remote-config",V="0.3.11",be=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ht{constructor(N,W,ae,Fe){this.client=N,this.storage=W,this.storageCache=ae,this.logger=Fe}isCachedDataFresh(N,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ae=Date.now()-W,Fe=ae<=N;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ae}. Cache max age millis (minimumFetchIntervalMillis setting): ${N}. Is cache hit: ${Fe}.`),Fe}fetch(N){var W=this;return(0,P.Z)(function*(){const[ae,Fe]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(Fe&&W.isCachedDataFresh(N.cacheMaxAgeMillis,ae))return Fe;N.eTag=Fe&&Fe.eTag;const Ke=yield W.client.fetch(N),ct=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ke.status&&ct.push(W.storage.setLastSuccessfulFetchResponse(Ke)),yield Promise.all(ct),Ke})()}}function Wt(x=navigator){return x.languages&&x.languages[0]||x.language}class Pt{constructor(N,W,ae,Fe,Ke,ct){this.firebaseInstallations=N,this.sdkVersion=W,this.namespace=ae,this.projectId=Fe,this.apiKey=Ke,this.appId=ct}fetch(N){var W=this;return(0,P.Z)(function*(){var ae,Fe,Ke;const[ct,Yt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),De=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":N.eTag||"*"},Ot={sdk_version:W.sdkVersion,app_instance_id:ct,app_instance_id_token:Yt,app_id:W.appId,language_code:Wt()},Hi={method:"POST",headers:yt,body:JSON.stringify(Ot)},Tn=fetch(De,Hi),Fo=new Promise((Ms,xs)=>{N.signal.addEventListener(()=>{const Rs=new Error("The operation was aborted.");Rs.name="AbortError",xs(Rs)})});let Di;try{yield Promise.race([Tn,Fo]),Di=yield Tn}catch(Ms){let xs="fetch-client-network";throw"AbortError"===(null===(ae=Ms)||void 0===ae?void 0:ae.name)&&(xs="fetch-timeout"),be.create(xs,{originalErrorMessage:null===(Fe=Ms)||void 0===Fe?void 0:Fe.message})}let Rr=Di.status;const Oa=Di.headers.get("ETag")||void 0;let Lo,Ss;if(200===Di.status){let Ms;try{Ms=yield Di.json()}catch(xs){throw be.create("fetch-client-parse",{originalErrorMessage:null===(Ke=xs)||void 0===Ke?void 0:Ke.message})}Lo=Ms.entries,Ss=Ms.state}if("INSTANCE_STATE_UNSPECIFIED"===Ss?Rr=500:"NO_CHANGE"===Ss?Rr=304:("NO_TEMPLATE"===Ss||"EMPTY_CONFIG"===Ss)&&(Lo={}),304!==Rr&&200!==Rr)throw be.create("fetch-status",{httpStatus:Rr});return{status:Rr,eTag:Oa,config:Lo}})()}}class Kn{constructor(N,W){this.client=N,this.storage=W}fetch(N){var W=this;return(0,P.Z)(function*(){const ae=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(N,ae)})()}attemptFetch(N,{throttleEndTimeMillis:W,backoffCount:ae}){var Fe=this;return(0,P.Z)(function*(){yield function Ze(x,N){return new Promise((W,ae)=>{const Fe=Math.max(N-Date.now(),0),Ke=setTimeout(W,Fe);x.addEventListener(()=>{clearTimeout(Ke),ae(be.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(N.signal,W);try{const Ke=yield Fe.client.fetch(N);return yield Fe.storage.deleteThrottleMetadata(),Ke}catch(Ke){if(!function on(x){if(!(x instanceof de.ZR&&x.customData))return!1;const N=Number(x.customData.httpStatus);return 429===N||500===N||503===N||504===N}(Ke))throw Ke;const ct={throttleEndTimeMillis:Date.now()+(0,de.$s)(ae),backoffCount:ae+1};return yield Fe.storage.setThrottleMetadata(ct),Fe.attemptFetch(N,ct)}})()}}class Gn{constructor(N,W,ae,Fe,Ke){this.app=N,this._client=W,this._storageCache=ae,this._storage=Fe,this._logger=Ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bt(x,N){var W;const ae=x.target.error||void 0;return be.create(N,{originalErrorMessage:ae&&(null===(W=ae)||void 0===W?void 0:W.message)})}const Ut="app_namespace_store";class In{constructor(N,W,ae,Fe=function ir(){return new Promise((x,N)=>{var W;try{const ae=indexedDB.open("firebase_remote_config",1);ae.onerror=Fe=>{N(bt(Fe,"storage-open"))},ae.onsuccess=Fe=>{x(Fe.target.result)},ae.onupgradeneeded=Fe=>{0===Fe.oldVersion&&Fe.target.result.createObjectStore(Ut,{keyPath:"compositeKey"})}}catch(ae){N(be.create("storage-open",{originalErrorMessage:null===(W=ae)||void 0===W?void 0:W.message}))}})}()){this.appId=N,this.appName=W,this.namespace=ae,this.openDbPromise=Fe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(N){return this.set("last_fetch_status",N)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(N){return this.set("last_successful_fetch_timestamp_millis",N)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(N){return this.set("last_successful_fetch_response",N)}getActiveConfig(){return this.get("active_config")}setActiveConfig(N){return this.set("active_config",N)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(N){return this.set("active_config_etag",N)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(N){return this.set("throttle_metadata",N)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(N){var W=this;return(0,P.Z)(function*(){const ae=yield W.openDbPromise;return new Promise((Fe,Ke)=>{var ct;const zn=ae.transaction([Ut],"readonly").objectStore(Ut),De=W.createCompositeKey(N);try{const yt=zn.get(De);yt.onerror=Ot=>{Ke(bt(Ot,"storage-get"))},yt.onsuccess=Ot=>{const Hi=Ot.target.result;Fe(Hi?Hi.value:void 0)}}catch(yt){Ke(be.create("storage-get",{originalErrorMessage:null===(ct=yt)||void 0===ct?void 0:ct.message}))}})})()}set(N,W){var ae=this;return(0,P.Z)(function*(){const Fe=yield ae.openDbPromise;return new Promise((Ke,ct)=>{var Yt;const De=Fe.transaction([Ut],"readwrite").objectStore(Ut),yt=ae.createCompositeKey(N);try{const Ot=De.put({compositeKey:yt,value:W});Ot.onerror=Hi=>{ct(bt(Hi,"storage-set"))},Ot.onsuccess=()=>{Ke()}}catch(Ot){ct(be.create("storage-set",{originalErrorMessage:null===(Yt=Ot)||void 0===Yt?void 0:Yt.message}))}})})()}delete(N){var W=this;return(0,P.Z)(function*(){const ae=yield W.openDbPromise;return new Promise((Fe,Ke)=>{var ct;const zn=ae.transaction([Ut],"readwrite").objectStore(Ut),De=W.createCompositeKey(N);try{const yt=zn.delete(De);yt.onerror=Ot=>{Ke(bt(Ot,"storage-delete"))},yt.onsuccess=()=>{Fe()}}catch(yt){Ke(be.create("storage-delete",{originalErrorMessage:null===(ct=yt)||void 0===ct?void 0:ct.message}))}})})()}createCompositeKey(N){return[this.appId,this.appName,this.namespace,N].join()}}class kr{constructor(N){this.storage=N}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var N=this;return(0,P.Z)(function*(){const W=N.storage.getLastFetchStatus(),ae=N.storage.getLastSuccessfulFetchTimestampMillis(),Fe=N.storage.getActiveConfig(),Ke=yield W;Ke&&(N.lastFetchStatus=Ke);const ct=yield ae;ct&&(N.lastSuccessfulFetchTimestampMillis=ct);const Yt=yield Fe;Yt&&(N.activeConfig=Yt)})()}setLastFetchStatus(N){return this.lastFetchStatus=N,this.storage.setLastFetchStatus(N)}setLastSuccessfulFetchTimestampMillis(N){return this.lastSuccessfulFetchTimestampMillis=N,this.storage.setLastSuccessfulFetchTimestampMillis(N)}setActiveConfig(N){return this.activeConfig=N,this.storage.setActiveConfig(N)}}function hi(){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,P.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function sr(){(0,ne._registerComponent)(new pe.wA("remote-config",function x(N,{instanceIdentifier:W}){const ae=N.getProvider("app").getImmediate(),Fe=N.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw be.create("registration-window");if(!(0,de.hl)())throw be.create("indexed-db-unavailable");const{projectId:Ke,apiKey:ct,appId:Yt}=ae.options;if(!Ke)throw be.create("registration-project-id");if(!ct)throw be.create("registration-api-key");if(!Yt)throw be.create("registration-app-id");const zn=new In(Yt,ae.name,W=W||"firebase"),De=new kr(zn),yt=new oe.Yd(he);yt.logLevel=oe.in.ERROR;const Ot=new Pt(Fe,ne.SDK_VERSION,W,Ke,ct,Yt),Hi=new Kn(Ot,zn),Tn=new ht(Hi,zn,De,yt),Fo=new Gn(ae,Tn,De,zn,yt);return function Ge(x){const N=(0,de.m9)(x);N._initializePromise||(N._initializePromise=N._storageCache.loadFromStorage().then(()=>{N._isInitializationComplete=!0}))}(Fo),Fo},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(he,V),(0,ne.registerVersion)(he,V,"esm2017")}();var vn=R(8766);const Zr="/firebase-messaging-sw.js",yn="/firebase-cloud-messaging-push-scope",Fr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",En="google.c.a.c_id",On="google.c.a.c_l",rn="google.c.a.ts",mt="google.c.a.e";var Lt=(()=>{return(x=Lt||(Lt={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Lt;var x})();function an(x){const N=new Uint8Array(x);return btoa(String.fromCharCode(...N)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yn(x){const W=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ae=atob(W),Fe=new Uint8Array(ae.length);for(let Ke=0;Ke<ae.length;++Ke)Fe[Ke]=ae.charCodeAt(Ke);return Fe}const Qn="fcm_token_details_db",Kr="fcm_token_object_Store";function Kt(x){return pr.apply(this,arguments)}function pr(){return pr=(0,P.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ke=>Ke.name).includes(Qn))return null;let N=null;return(yield(0,vn.X3)(Qn,5,{upgrade:(ae=(0,P.Z)(function*(Fe,Ke,ct,Yt){var zn;if(Ke<2||!Fe.objectStoreNames.contains(Kr))return;const De=Yt.objectStore(Kr),yt=yield De.index("fcmSenderId").get(x);if(yield De.clear(),yt)if(2===Ke){const Ot=yt;if(!Ot.auth||!Ot.p256dh||!Ot.endpoint)return;N={token:Ot.fcmToken,createTime:null!==(zn=Ot.createTime)&&void 0!==zn?zn:Date.now(),subscriptionOptions:{auth:Ot.auth,p256dh:Ot.p256dh,endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:"string"==typeof Ot.vapidKey?Ot.vapidKey:an(Ot.vapidKey)}}}else if(3===Ke){const Ot=yt;N={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:an(Ot.auth),p256dh:an(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:an(Ot.vapidKey)}}}else if(4===Ke){const Ot=yt;N={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:an(Ot.auth),p256dh:an(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:an(Ot.vapidKey)}}}}),function(Ke,ct,Yt,zn){return ae.apply(this,arguments)})})).close(),yield(0,vn.Lj)(Qn),yield(0,vn.Lj)("fcm_vapid_details_db"),yield(0,vn.Lj)("undefined"),qt(N)?N:null;var ae}),pr.apply(this,arguments)}function qt(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:N}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof N.auth&&N.auth.length>0&&"string"==typeof N.p256dh&&N.p256dh.length>0&&"string"==typeof N.endpoint&&N.endpoint.length>0&&"string"==typeof N.swScope&&N.swScope.length>0&&"string"==typeof N.vapidKey&&N.vapidKey.length>0}const k="firebase-messaging-store";let B=null;function H(){return B||(B=(0,vn.X3)("firebase-messaging-database",1,{upgrade:(x,N)=>{0===N&&x.createObjectStore(k)}})),B}function Ae(x){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.Z)(function*(x){const N=ce(x),ae=yield(yield H()).transaction(k).objectStore(k).get(N);if(ae)return ae;{const Fe=yield Kt(x.appConfig.senderId);if(Fe)return yield it(x,Fe),Fe}})).apply(this,arguments)}function it(x,N){return un.apply(this,arguments)}function un(){return(un=(0,P.Z)(function*(x,N){const W=ce(x),Fe=(yield H()).transaction(k,"readwrite");return yield Fe.objectStore(k).put(N,W),yield Fe.done,N})).apply(this,arguments)}function tn(x){return re.apply(this,arguments)}function re(){return(re=(0,P.Z)(function*(x){const N=ce(x),ae=(yield H()).transaction(k,"readwrite");yield ae.objectStore(k).delete(N),yield ae.done})).apply(this,arguments)}function ce({appConfig:x}){return x.appId}const Le=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function We(x,N){return vt.apply(this,arguments)}function vt(){return(vt=(0,P.Z)(function*(x,N){var W;const ae=yield bn(x),Fe=sn(N),Ke={method:"POST",headers:ae,body:JSON.stringify(Fe)};let ct;try{ct=yield(yield fetch(Rt(x.appConfig),Ke)).json()}catch(Yt){throw Le.create("token-subscribe-failed",{errorInfo:null===(W=Yt)||void 0===W?void 0:W.toString()})}if(ct.error)throw Le.create("token-subscribe-failed",{errorInfo:ct.error.message});if(!ct.token)throw Le.create("token-subscribe-no-token");return ct.token})).apply(this,arguments)}function wt(x,N){return xt.apply(this,arguments)}function xt(){return(xt=(0,P.Z)(function*(x,N){var W;const ae=yield bn(x),Fe=sn(N.subscriptionOptions),Ke={method:"PATCH",headers:ae,body:JSON.stringify(Fe)};let ct;try{ct=yield(yield fetch(`${Rt(x.appConfig)}/${N.token}`,Ke)).json()}catch(Yt){throw Le.create("token-update-failed",{errorInfo:null===(W=Yt)||void 0===W?void 0:W.toString()})}if(ct.error)throw Le.create("token-update-failed",{errorInfo:ct.error.message});if(!ct.token)throw Le.create("token-update-no-token");return ct.token})).apply(this,arguments)}function Ne(x,N){return nt.apply(this,arguments)}function nt(){return(nt=(0,P.Z)(function*(x,N){var W;const Fe={method:"DELETE",headers:yield bn(x)};try{const ct=yield(yield fetch(`${Rt(x.appConfig)}/${N}`,Fe)).json();if(ct.error)throw Le.create("token-unsubscribe-failed",{errorInfo:ct.error.message})}catch(Ke){throw Le.create("token-unsubscribe-failed",{errorInfo:null===(W=Ke)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function Rt({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function bn(x){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,P.Z)(function*({appConfig:x,installations:N}){const W=yield N.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function sn({p256dh:x,auth:N,endpoint:W,vapidKey:ae}){const Fe={web:{endpoint:W,auth:N,p256dh:x}};return ae!==Fr&&(Fe.web.applicationPubKey=ae),Fe}const fi=6048e5;function _n(x){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,P.Z)(function*(x){const N=yield Bt(x.swRegistration,x.vapidKey),W={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:N.endpoint,auth:an(N.getKey("auth")),p256dh:an(N.getKey("p256dh"))},ae=yield Ae(x.firebaseDependencies);if(ae){if(kn(ae.subscriptionOptions,W))return Date.now()>=ae.createTime+fi?q(x,{token:ae.token,createTime:Date.now(),subscriptionOptions:W}):ae.token;try{yield Ne(x.firebaseDependencies,ae.token)}catch(Fe){console.warn(Fe)}return Be(x.firebaseDependencies,W)}return Be(x.firebaseDependencies,W)})).apply(this,arguments)}function Bi(x){return kt.apply(this,arguments)}function kt(){return(kt=(0,P.Z)(function*(x){const N=yield Ae(x.firebaseDependencies);N&&(yield Ne(x.firebaseDependencies,N.token),yield tn(x.firebaseDependencies));const W=yield x.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function q(x,N){return ye.apply(this,arguments)}function ye(){return(ye=(0,P.Z)(function*(x,N){try{const W=yield wt(x.firebaseDependencies,N),ae=Object.assign(Object.assign({},N),{token:W,createTime:Date.now()});return yield it(x.firebaseDependencies,ae),W}catch(W){throw yield Bi(x),W}})).apply(this,arguments)}function Be(x,N){return ut.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(x,N){const ae={token:yield We(x,N),createTime:Date.now(),subscriptionOptions:N};return yield it(x,ae),ae.token})).apply(this,arguments)}function Bt(x,N){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,P.Z)(function*(x,N){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yn(N)})})).apply(this,arguments)}function kn(x,N){return N.vapidKey===x.vapidKey&&N.endpoint===x.endpoint&&N.auth===x.auth&&N.p256dh===x.p256dh}function hn(x){const N={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function Lr(x,N){if(!N.notification)return;x.notification={};const W=N.notification.title;W&&(x.notification.title=W);const ae=N.notification.body;ae&&(x.notification.body=ae);const Fe=N.notification.image;Fe&&(x.notification.image=Fe)}(N,x),function _r(x,N){!N.data||(x.data=N.data)}(N,x),function gn(x,N){var W,ae,Fe,Ke,ct;if(!(N.fcmOptions||null!==(W=N.notification)&&void 0!==W&&W.click_action))return;x.fcmOptions={};const Yt=null!==(Fe=null===(ae=N.fcmOptions)||void 0===ae?void 0:ae.link)&&void 0!==Fe?Fe:null===(Ke=N.notification)||void 0===Ke?void 0:Ke.click_action;Yt&&(x.fcmOptions.link=Yt);const zn=null===(ct=N.fcmOptions)||void 0===ct?void 0:ct.analytics_label;zn&&(x.fcmOptions.analyticsLabel=zn)}(N,x),N}function Cu(x){return"object"==typeof x&&!!x&&En in x}function Du(x,N){const W=[];for(let ae=0;ae<x.length;ae++)W.push(x.charAt(ae)),ae<N.length&&W.push(N.charAt(ae));return W.join("")}function No(x){return Le.create("missing-app-config-values",{valueName:x})}Du("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Du("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Cs{constructor(N,W,ae){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Fe=function bs(x){if(!x||!x.options)throw No("App Configuration Object");if(!x.name)throw No("App Name");const N=["projectId","apiKey","appId","messagingSenderId"],{options:W}=x;for(const ae of N)if(!W[ae])throw No(ae);return{appName:x.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(N);this.firebaseDependencies={app:N,appConfig:Fe,installations:W,analyticsProvider:ae}}_delete(){return Promise.resolve()}}function ji(x){return pi.apply(this,arguments)}function pi(){return(pi=(0,P.Z)(function*(x){var N;try{x.swRegistration=yield navigator.serviceWorker.register(Zr,{scope:yn}),x.swRegistration.update().catch(()=>{})}catch(W){throw Le.create("failed-service-worker-registration",{browserErrorMessage:null===(N=W)||void 0===N?void 0:N.message})}})).apply(this,arguments)}function Jn(x,N){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,P.Z)(function*(x,N){if(!N&&!x.swRegistration&&(yield ji(x)),N||!x.swRegistration){if(!(N instanceof ServiceWorkerRegistration))throw Le.create("invalid-sw-registration");x.swRegistration=N}})).apply(this,arguments)}function Sr(x,N){return gr.apply(this,arguments)}function gr(){return(gr=(0,P.Z)(function*(x,N){N?x.vapidKey=N:x.vapidKey||(x.vapidKey=Fr)})).apply(this,arguments)}function ss(){return(ss=(0,P.Z)(function*(x,N){if(!navigator)throw Le.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Le.create("permission-blocked");return yield Sr(x,N?.vapidKey),yield Jn(x,N?.serviceWorkerRegistration),_n(x)})).apply(this,arguments)}function Da(x,N,W){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.Z)(function*(x,N,W){const ae=Qc(N);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ae,{message_id:W[En],message_name:W[On],message_time:W[rn],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qc(x){switch(x){case Lt.NOTIFICATION_CLICKED:return"notification_open";case Lt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Tu(){return(Tu=(0,P.Z)(function*(x,N){const W=N.data;if(!W.isFirebaseMessaging)return;x.onMessageHandler&&W.messageType===Lt.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(hn(W)):x.onMessageHandler.next(hn(W)));const ae=W.data;Cu(ae)&&"1"===ae[mt]&&(yield Da(x,W.messageType,ae))})).apply(this,arguments)}const Ta="@firebase/messaging",ar=x=>{const N=new Cs(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Jc(x,N){return Tu.apply(this,arguments)}(N,W)),N},Xc=x=>{const N=x.getProvider("messaging").getImmediate();return{getToken:ae=>function zs(x,N){return ss.apply(this,arguments)}(N,ae)}};function bi(){return el.apply(this,arguments)}function el(){return(el=(0,P.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _p(){(0,ne._registerComponent)(new pe.wA("messaging",ar,"PUBLIC")),(0,ne._registerComponent)(new pe.wA("messaging-internal",Xc,"PRIVATE")),(0,ne.registerVersion)(Ta,"0.9.16"),(0,ne.registerVersion)(Ta,"0.9.16","esm2017")}();var os=R(7982),Au=R(4408),Sa=R(7565);const Ci=new class Ym extends Sa.v{}(class wp extends Au.o{constructor(N,W){super(N,W),this.scheduler=N,this.work=W}schedule(N,W=0){return W>0?super.schedule(N,W):(this.delay=W,this.state=N,this.scheduler.flush(this),this)}execute(N,W){return W>0||this.closed?super.execute(N,W):this._execute(N,W)}requestAsyncId(N,W,ae=0){return null!=ae&&ae>0||null==ae&&this.delay>0?super.requestAsyncId(N,W,ae):N.flush(this)}});var us=R(4986),Ds=R(8505),Ma=R(9468),xa=R(5363);const Su=new h.GfV("7.4.1"),Mu="__angularfire_symbol__analyticsIsSupportedValue",cs="__angularfire_symbol__analyticsIsSupported",Ws="__angularfire_symbol__remoteConfigIsSupportedValue",qs="__angularfire_symbol__remoteConfigIsSupported",Mr="__angularfire_symbol__messagingIsSupportedValue",Zs="__angularfire_symbol__messagingIsSupported";globalThis[cs]||(globalThis[cs]=(0,os.Gb)().then(x=>globalThis[Mu]=x).catch(()=>globalThis[Mu]=!1)),globalThis[Zs]||(globalThis[Zs]=bi().then(x=>globalThis[Mr]=x).catch(()=>globalThis[Mr]=!1)),globalThis[qs]||(globalThis[qs]=hi().then(x=>globalThis[Ws]=x).catch(()=>globalThis[Ws]=!1));const Qm={async:()=>globalThis[cs],sync:()=>{const x=globalThis[Mu];if(void 0===x)throw new Error((x=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${x} in the constructor, first ensure that ${x} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${x})\`.`)("Analytics"));return x}};function Fn(x,N,W){if(N){if(1===N.length)return N[0];const Ke=N.filter(ct=>ct.app===W);if(1===Ke.length)return Ke[0]}return W.container.getProvider(x).getImmediate({optional:!0})}const Ra=(x,N)=>{const W=N?[N]:(0,Q.C6)(),ae=[];return W.forEach(Fe=>{Fe.container.getProvider(x).instances.forEach(ct=>{ae.includes(ct)||ae.push(ct)})}),ae};function Ks(){}class Ts{constructor(N,W=Ci){this.zone=N,this.delegate=W}now(){return this.delegate.now()}schedule(N,W,ae){const Fe=this.zone;return this.delegate.schedule(function(ct){Fe.runGuarded(()=>{N.apply(this,[ct])})},W,ae)}}class si{constructor(N){this.zone=N,this.task=null}call(N,W){const ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ks,{},Ks,Ks)),W.pipe((0,Ds.b)({next:ae,complete:ae,error:ae})).subscribe(N).add(ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let sl=(()=>{class x{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Ts(Zone.current)),this.insideAngular=W.run(()=>new Ts(Zone.current,us.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(W){return new(W||x)(h.LFG(h.R0b))},x.\u0275prov=h.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function gi(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function xu(x){return gi(),function $i(x){return function(W){return(W=W.lift(new si(x.ngZone))).pipe((0,Ma.R)(x.outsideAngular),(0,xa.Q)(x.insideAngular))}}(gi())(x)}},2090:(pt,Me,R)=>{R.d(Me,{$s:()=>Kr,BH:()=>Oe,G6:()=>Ue,L:()=>ge,LL:()=>je,Mn:()=>Ce,Sg:()=>be,UG:()=>me,US:()=>pe,ZB:()=>j,ZR:()=>ee,b$:()=>rt,d:()=>xe,eu:()=>ve,hl:()=>L,jU:()=>ue,m9:()=>qt,ne:()=>hi,pd:()=>Ar,r3:()=>Gn,ru:()=>ot,tV:()=>he,uI:()=>Je,vZ:()=>qr,w1:()=>we,xO:()=>kr,xb:()=>Ut,z$:()=>Ie,zI:()=>Z,zd:()=>sr});const ne=function(z){const U=[];let k=0;for(let B=0;B<z.length;B++){let H=z.charCodeAt(B);H<128?U[k++]=H:H<2048?(U[k++]=H>>6|192,U[k++]=63&H|128):55296==(64512&H)&&B+1<z.length&&56320==(64512&z.charCodeAt(B+1))?(H=65536+((1023&H)<<10)+(1023&z.charCodeAt(++B)),U[k++]=H>>18|240,U[k++]=H>>12&63|128,U[k++]=H>>6&63|128,U[k++]=63&H|128):(U[k++]=H>>12|224,U[k++]=H>>6&63|128,U[k++]=63&H|128)}return U},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,U){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let H=0;H<z.length;H+=3){const Ae=z[H],ze=H+1<z.length,it=ze?z[H+1]:0,un=H+2<z.length,tn=un?z[H+2]:0;let Ee=(15&it)<<2|tn>>6,Le=63&tn;un||(Le=64,ze||(Ee=64)),B.push(k[Ae>>2],k[(3&Ae)<<4|it>>4],k[Ee],k[Le])}return B.join("")},encodeString(z,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(z):this.encodeByteArray(ne(z),U)},decodeString(z,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(z):function(z){const U=[];let k=0,B=0;for(;k<z.length;){const H=z[k++];if(H<128)U[B++]=String.fromCharCode(H);else if(H>191&&H<224){const Ae=z[k++];U[B++]=String.fromCharCode((31&H)<<6|63&Ae)}else if(H>239&&H<365){const un=((7&H)<<18|(63&z[k++])<<12|(63&z[k++])<<6|63&z[k++])-65536;U[B++]=String.fromCharCode(55296+(un>>10)),U[B++]=String.fromCharCode(56320+(1023&un))}else{const Ae=z[k++],ze=z[k++];U[B++]=String.fromCharCode((15&H)<<12|(63&Ae)<<6|63&ze)}}return U.join("")}(this.decodeStringToByteArray(z,U))},decodeStringToByteArray(z,U){this.init_();const k=U?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let H=0;H<z.length;){const Ae=k[z.charAt(H++)],it=H<z.length?k[z.charAt(H)]:0;++H;const tn=H<z.length?k[z.charAt(H)]:64;++H;const ce=H<z.length?k[z.charAt(H)]:64;if(++H,null==Ae||null==it||null==tn||null==ce)throw Error();B.push(Ae<<2|it>>4),64!==tn&&(B.push(it<<4&240|tn>>2),64!==ce&&B.push(tn<<6&192|ce))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ge=function(z){return function(z){const U=ne(z);return pe.encodeByteArray(U,!0)}(z).replace(/\./g,"")},he=function(z){try{return pe.decodeString(z,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function j(z,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return U}for(const k in U)!U.hasOwnProperty(k)||!K(k)||(z[k]=j(z[k],U[k]));return z}function K(z){return"__proto__"!==z}class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,k)=>{this.resolve=U,this.reject=k})}wrapCallback(U){return(k,B)=>{k?this.reject(k):this.resolve(B),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(k):U(k,B))}}}function be(z,U){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=U||"demo-project",H=z.iat||0,Ae=z.sub||z.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ze=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:H,exp:H+3600,auth_time:H,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},z);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(ze)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ue(){return"object"==typeof self&&self.self===self}function ot(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Ie().indexOf("Electron/")>=0}function we(){const z=Ie();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function Ce(){return Ie().indexOf("MSAppHost/")>=0}function Ue(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){return"object"==typeof indexedDB}function ve(){return new Promise((z,U)=>{try{let k=!0;const B="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(B);H.onsuccess=()=>{H.result.close(),k||self.indexedDB.deleteDatabase(B),z(!0)},H.onupgradeneeded=()=>{k=!1},H.onerror=()=>{var Ae;U((null===(Ae=H.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(k){U(k)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ee extends Error{constructor(U,k,B){super(k),this.code=U,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(U,k,B){this.service=U,this.serviceName=k,this.errors=B}create(U,...k){const B=k[0]||{},H=`${this.service}/${U}`,Ae=this.errors[U],ze=Ae?function Ve(z,U){return z.replace(ht,(k,B)=>{const H=U[B];return null!=H?String(H):`<${B}?>`})}(Ae,B):"Error";return new ee(H,`${this.serviceName}: ${ze} (${H}).`,B)}}const ht=/\{\$([^}]+)}/g;function Gn(z,U){return Object.prototype.hasOwnProperty.call(z,U)}function Ut(z){for(const U in z)if(Object.prototype.hasOwnProperty.call(z,U))return!1;return!0}function qr(z,U){if(z===U)return!0;const k=Object.keys(z),B=Object.keys(U);for(const H of k){if(!B.includes(H))return!1;const Ae=z[H],ze=U[H];if(ir(Ae)&&ir(ze)){if(!qr(Ae,ze))return!1}else if(Ae!==ze)return!1}for(const H of B)if(!k.includes(H))return!1;return!0}function ir(z){return null!==z&&"object"==typeof z}function kr(z){const U=[];for(const[k,B]of Object.entries(z))Array.isArray(B)?B.forEach(H=>{U.push(encodeURIComponent(k)+"="+encodeURIComponent(H))}):U.push(encodeURIComponent(k)+"="+encodeURIComponent(B));return U.length?"&"+U.join("&"):""}function sr(z){const U={};return z.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[H,Ae]=B.split("=");U[decodeURIComponent(H)]=decodeURIComponent(Ae)}}),U}function Ar(z){const U=z.indexOf("?");if(!U)return"";const k=z.indexOf("#",U);return z.substring(U,k>0?k:void 0)}function hi(z,U){const k=new Xe(z,U);return k.subscribe.bind(k)}class Xe{constructor(U,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{U(this)}).catch(B=>{this.error(B)})}next(U){this.forEachObserver(k=>{k.next(U)})}error(U){this.forEachObserver(k=>{k.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,k,B){let H;if(void 0===U&&void 0===k&&void 0===B)throw new Error("Missing Observer.");H=function Zr(z,U){if("object"!=typeof z||null===z)return!1;for(const k of U)if(k in z&&"function"==typeof z[k])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:k,complete:B},void 0===H.next&&(H.next=yn),void 0===H.error&&(H.error=yn),void 0===H.complete&&(H.complete=yn);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),Ae}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,U)}sendOne(U,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{k(this.observers[U])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function Kr(z,U=1e3,k=2){const B=U*Math.pow(k,z),H=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+H)}function qt(z){return z&&z._delegate?z._delegate:z}},1755:(pt,Me,R)=>{var h=R(4650);let Q=null;function P(){return Q}const oe=new h.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function he(){return(0,h.LFG)(j)}()},providedIn:"platform"}),n})();const V=new h.OlP("Location Initialized");let j=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Oe(){return new j((0,h.LFG)(oe))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(ot)},providedIn:"root"}),n})();const ue=new h.OlP("appBaseHref");let ot=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Je(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Je(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(ue,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(ue,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(Ge(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Je,n.joinWithSlash=be,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(h.LFG(me))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(){return new xe((0,h.LFG)(me))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}let Jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Oo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Oo{constructor(){this.$implicit=null,this.ngIf=null}}function Sr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let cs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ws="browser";function xr(n){return"server"===n}let Ra=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Ks((0,h.LFG)(oe),window)}),n})();class Ks{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function si(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ts(this.window.history)||Ts(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ts(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ou extends class Dp extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){Q||(Q=n)}(new Ou)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Xd(){return Pa=Pa||document.querySelector("base"),Pa?Pa.getAttribute("href"):null}();return null==t?null:function mi(n){wr=wr||document.createElement("a"),wr.setAttribute("href",n);const e=wr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _r(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let wr,Pa=null;const Mn=new h.OlP("TRANSITION_ID"),ny=[{provide:h.ip1,useFactory:function ty(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Mn,oe,h.zs3],multi:!0}];let iy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const al=new h.OlP("EventManagerPlugins");let eh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(al),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ul{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let cl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Uo=(()=>{class n extends cl{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(th),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(th))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function th(n){P().remove(n)}const nh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tp=/%COMP%/g;function ll(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?ll(n,o,t):(o=o.replace(Tp,n),t.push(o))}return t}function Ap(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dl=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ka(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Sp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new Mp(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=ll(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eh),h.LFG(Uo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ka{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(nh[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Fu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Fu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=nh[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=nh[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ap(r)):this.eventManager.addEventListener(e,t,Ap(r))}}function Fu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Sp extends ka{constructor(e,t,r,o){super(e),this.component=r;const u=ll(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Pu(n){return"_ngcontent-%COMP%".replace(Tp,n)}(o+"-"+r.id),this.hostAttr=function ih(n){return"_nghost-%COMP%".replace(Tp,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Mp extends ka{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=ll(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Lu=(()=>{class n extends ul{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Vu=["alt","control","meta","shift"],Uu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ds={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fl=(()=>{class n extends ul{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),Vu.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),d+=b+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=Uu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Vu.forEach(d=>{d!==o&&(0,ds[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const gl=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Ws},{provide:h.g9A,useValue:function sh(){Ou.makeCurrent()},multi:!0},{provide:oe,useFactory:function $u(){return(0,h.RDi)(document),document},deps:[]}]),Fa=new h.OlP(""),Rp=[{provide:h.rWj,useClass:class ry{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],La=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ju(){return new h.qLn},deps:[]},{provide:al,useClass:Lu,multi:!0,deps:[oe,h.R0b,h.Lbi]},{provide:al,useClass:fl,multi:!0,deps:[oe]},{provide:dl,useClass:dl,deps:[eh,Uo,h.AFp]},{provide:h.FYo,useExisting:dl},{provide:cl,useExisting:Uo},{provide:Uo,useClass:Uo,deps:[oe]},{provide:eh,useClass:eh,deps:[al,h.R0b]},{provide:class gi{},useClass:iy,deps:[]},[]];let oh=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Mn,useExisting:h.AFp},ny]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Fa,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...La,...Rp],imports:[cs,h.hGG]}),n})(),eo=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Va(){return new eo((0,h.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var wn=R(8996),Ti=R(7669);function ft(...n){const e=(0,Ti.yG)(n);return(0,wn.D)(n,e)}var Ai=R(7579);class Ln extends Ai.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Zu=(0,R(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yr=R(9751);const{isArray:to}=Array,{getPrototypeOf:_l,prototype:uy,keys:hh}=Object;function Ku(n){if(1===n.length){const e=n[0];if(to(e))return{args:e,keys:null};if(function ja(n){return n&&"object"==typeof n&&_l(n)===uy}(e)){const t=hh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var no=R(4671),gt=R(4004);const{isArray:fh}=Array;function ph(n){return(0,gt.U)(e=>function $a(n,e){return fh(e)?n(...e):n(e)}(n,e))}function wl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Er=R(5403),cy=R(9672);function Il(...n){const e=(0,Ti.yG)(n),t=(0,Ti.jO)(n),{args:r,keys:o}=Ku(n);if(0===r.length)return(0,wn.D)([],e);const u=new Yr.y(function ly(n,e,t=no.y){return r=>{El(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)El(e,()=>{const b=(0,wn.D)(n[w],e);let T=!1;b.subscribe((0,Er.x)(r,S=>{u[w]=S,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>wl(o,d):no.y));return t?u.pipe(ph(t)):u}function El(n,e,t){n?(0,cy.f)(t,n,e):e()}var Yu=R(8189);function ro(...n){return function Qu(){return(0,Yu.J)(1)}()((0,wn.D)(n,(0,Ti.yG)(n)))}var bl=R(8421);function hs(n){return new Yr.y(e=>{(0,bl.Xf)(n()).subscribe(e)})}var gh=R(9635),Ha=R(576);function $o(n,e){const t=(0,Ha.m)(n)?n:()=>n,r=o=>o.error(t());return new Yr.y(e?o=>e.schedule(r,0,o):r)}var fs=R(515),Cl=R(727),Nr=R(4482);function Ps(){return(0,Nr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Er.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class io extends Yr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Cl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Er.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Cl.w0.EMPTY)}return e}refCount(){return Ps()(this)}}function Vn(n,e){return(0,Nr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Er.x)(r,w=>{o?.unsubscribe();let b=0;const T=u++;(0,bl.Xf)(n(w,T)).subscribe(o=(0,Er.x)(r,S=>r.next(e?e(w,S,T,b++):S),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function xn(n){return n<=0?()=>fs.E:(0,Nr.e)((e,t)=>{let r=0;e.subscribe((0,Er.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Ga(...n){const e=(0,Ti.yG)(n);return(0,Nr.e)((t,r)=>{(e?ro(n,t,e):ro(n,t)).subscribe(r)})}function Ur(n,e){return(0,Nr.e)((t,r)=>{let o=0;t.subscribe((0,Er.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var br=R(5577);function so(n){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,Er.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Dl(n=dy){return(0,Nr.e)((e,t)=>{let r=!1;e.subscribe((0,Er.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function dy(){return new Zu}function ks(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((o,u)=>n(o,u,r)):no.y,xn(1),t?so(e):Dl(()=>new Zu))}function zi(n,e){return(0,Ha.m)(e)?(0,br.z)(n,e,1):(0,br.z)(n,1)}var cr=R(8505);function Wi(n){return(0,Nr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Er.x)(t,void 0,void 0,d=>{u=(0,bl.Xf)(n(d,Wi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function oo(n,e,t,r,o){return(u,d)=>{let m=t,w=e,b=0;u.subscribe((0,Er.x)(d,T=>{const S=b++;w=m?n(w,T,S):(m=!0,T),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Ho(n,e){return(0,Nr.e)(oo(n,e,arguments.length>=2,!0))}function Ju(n){return n<=0?()=>fs.E:(0,Nr.e)((e,t)=>{let r=[];e.subscribe((0,Er.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function ao(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((o,u)=>n(o,u,r)):no.y,Ju(1),t?so(e):Dl(()=>new Zu))}function Al(n){return(0,Nr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",ps=Symbol("RouteTitle");class za{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function uo(n){return new za(n)}function b0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!yh(n[o],e[o]))return!1;return!0}function yh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Fp(n){return Array.prototype.concat.apply([],n)}function Lp(n){return n.length>0?n[n.length-1]:null}function lr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Si(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,wn.D)(Promise.resolve(n)):ft(n)}const C0={exact:function Up(n,e,t){if(!Ls(n.segments,e.segments)||!Fs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Up(n.children[r],e.children[r],t))return!1;return!0},subset:Go},_h={exact:function wh(n,e){return gs(n,e)},subset:function Bp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yh(n[t],e[t]))},ignored:()=>!0};function fy(n,e,t){return C0[t.paths](n.root,e.root,t.matrixParams)&&_h[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Go(n,e,t){return Sl(n,e,e.segments,t)}function Sl(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ls(o,t)||e.hasChildren()||!Fs(o,t,r))}if(n.segments.length===t.length){if(!Ls(n.segments,t)||!Fs(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Go(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ls(n.segments,o)&&Fs(n.segments,o,r)&&n.children[zt])&&Sl(n.children[zt],e,u,r)}}function Fs(n,e,t){return e.every((r,o)=>_h[t](n[o].parameters,r.parameters))}class zo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uo(this.queryParams)),this._queryParamMap}toString(){return Rl.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,lr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nl(this)}}class Ml{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=uo(this.parameters)),this._parameterMap}toString(){return Hp(this)}}function Ls(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ih=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new xl},providedIn:"root"}),n})();class xl{parse(e){const t=new yy(e);return new zo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Wo(e.root,!0)}`,r=function T0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${ec(t)}=${ec(o)}`).join("&"):`${ec(t)}=${ec(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function py(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Rl=new xl;function Nl(n){return n.segments.map(e=>Hp(e)).join("/")}function Wo(n,e){if(!n.hasChildren())return Nl(n);if(e){const t=n.children[zt]?Wo(n.children[zt],!1):"",r=[];return lr(n.children,(o,u)=>{u!==zt&&r.push(`${u}:${Wo(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function jp(n,e){let t=[];return lr(n.children,(r,o)=>{o===zt&&(t=t.concat(e(r,o)))}),lr(n.children,(r,o)=>{o!==zt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===zt?[Wo(n.children[zt],!1)]:[`${o}:${Wo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${Nl(n)}/${t[0]}`:`${Nl(n)}/(${t.join("//")})`}}function $p(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ec(n){return $p(n).replace(/%3B/gi,";")}function Mi(n){return $p(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function co(n){return decodeURIComponent(n)}function Eh(n){return co(n.replace(/\+/g,"%20"))}function Hp(n){return`${Mi(n.path)}${function D0(n){return Object.keys(n).map(e=>`;${Mi(e)}=${Mi(n[e])}`).join("")}(n.parameters)}`}const A0=/^[^\/()?;=#]+/;function Gp(n){const e=n.match(A0);return e?e[0]:""}const lo=/^[^=?&#]+/,my=/^[^&#]+/;class yy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new Qt(e,t)),r}parseSegment(){const e=Gp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Ml(co(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Gp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Gp(this.remaining);o&&(r=o,this.capture(r))}e[co(t)]=co(r)}parseQueryParam(e){const t=function gy(n){const e=n.match(lo);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function bh(n){const e=n.match(my);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Eh(t),u=Eh(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gp(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[zt]:new Qt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function ho(n){return n.segments.length>0?new Qt([],{[zt]:n}):n}function tc(n){const e={};for(const r of Object.keys(n.children)){const u=tc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ms(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function yi(n){return n instanceof zo}function M0(n,e,t,r,o){if(0===t.length)return fo(e.root,e.root,e.root,r,o);const u=function _y(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ch(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return lr(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Ch(t,e,r)}(t);return u.toRoot()?fo(e.root,e.root,new Qt([],{}),r,o):function d(w){const b=function Th(n,e,t,r){if(n.isAbsolute)return new Zo(e.root,!0,0);if(-1===r)return new Zo(t,t===e.root,0);return function zp(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new Zo(r,!1,o-u)}(t,r+(kl(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),T=b.processChildren?po(b.segmentGroup,b.index,u.commands):Ko(b.segmentGroup,b.index,u.commands);return fo(e.root,b.segmentGroup,T,r,o)}(n.snapshot?._lastPathIndex)}function kl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qo(n){return"object"==typeof n&&null!=n&&n.outlets}function fo(n,e,t,r,o){let d,u={};r&&lr(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(T=>`${T}`):`${w}`}),d=n===e?t:nc(n,e,t);const m=ho(tc(d));return new zo(m,u,o)}function nc(n,e,t){const r={};return lr(n.children,(o,u)=>{r[u]=o===e?t:nc(o,e,t)}),new Qt(n.segments,r)}class Ch{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kl(r[0]))throw new h.vHH(4003,!1);const o=r.find(qo);if(o&&o!==Lp(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ko(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return po(n,e,t);const r=function Iy(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(qo(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!qp(w,b,d))return u;r+=2}else{if(!qp(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Qt(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new Qt(n.segments.slice(r.pathIndex),n.children),po(u,0,o)}return r.match&&0===o.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?rc(n,e,t):r.match?po(n,0,o):rc(n,e,t)}function po(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function wy(n){return qo(n[0])?n[0].outlets:{[zt]:n}}(t),o={};return lr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Ko(n.children[d],e,u))}),lr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Qt(n.segments,o)}}function rc(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(qo(u)){const w=Wp(u.outlets);return new Qt(r,w)}if(0===o&&kl(t[0])){r.push(new Ml(n.segments[e].path,er(t[0]))),o++;continue}const d=qo(u)?u.outlets[zt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&kl(m)?(r.push(new Ml(d,er(m))),o+=2):(r.push(new Ml(d,{})),o++)}return new Qt(r,{})}function Wp(n){const e={};return lr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rc(new Qt([],{}),0,t))}),e}function er(n){const e={};return lr(n,(t,r)=>e[r]=`${t}`),e}function qp(n,e,t){return n==t.path&&gs(e,t.parameters)}class Vs{constructor(e,t){this.id=e,this.url=t}}class ic extends Vs{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xi extends Vs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fl extends Vs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ah extends Vs{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ey extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class by extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cy extends Vs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class x0 extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dy extends Vs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yo{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sc{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sh{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ll{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kp{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qr{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oc{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Yp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ac(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ac(e,this._root).map(t=>t.value)}}function Yp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Yp(n,t);if(r)return r}return null}function ac(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ac(n,t);if(r.length)return r.unshift(e),r}return[]}class vi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Qo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Vl extends oc{constructor(e,t){super(e),this.snapshot=t,Wn(this,e)}toString(){return this.snapshot.toString()}}function go(n,e){const t=function mo(n,e){const d=new qa([],{},{},"",{},zt,e,null,n.root,-1,{});return new Za("",new vi(d,[]))}(n,e),r=new Ln([new Ml("",{})]),o=new Ln({}),u=new Ln({}),d=new Ln({}),m=new Ln(""),w=new ys(r,o,d,m,u,zt,e,t.root);return w.snapshot=t.root,new Vl(new vi(w,[]),t)}class ys{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,gt.U)(b=>b[ps]))??ft(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>uo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>uo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ty(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class qa{constructor(e,t,r,o,u,d,m,w,b,T,S,F){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[ps],this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=T,this._correctedLastPathIndex=F??T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Za extends oc{constructor(e,t){super(t),this.url=e,Wn(this,t)}toString(){return cc(this._root)}}function Wn(n,e){e.value._routerState=n,e.children.forEach(t=>Wn(n,t))}function cc(n){const e=n.children.length>0?` { ${n.children.map(cc).join(", ")} } `:"";return`${n.value}${e}`}function Jo(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gs(e.params,t.params)||n.params.next(t.params),function kp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Mh(n,e){const t=gs(n.params,e.params)&&function Xu(n,e){return Ls(n,e)&&n.every((t,r)=>gs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Mh(n.parent,e.parent))}function vs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Xo(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return vs(n,r,o);return vs(n,r)})}(n,e,t);return new vi(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>vs(n,m)),d}}const r=function Qp(n){return new ys(new Ln(n.url),new Ln(n.params),new Ln(n.queryParams),new Ln(n.fragment),new Ln(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>vs(n,u));return new vi(r,o)}}const xh="ngNavigationCancelingError";function Ul(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=yi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Jp(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Jp(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Bl(n){return Xp(n)&&yi(n.url)}function Xp(n){return n&&n[xh]}class eg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new y,this.attachRef=null}}let y=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new eg,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f=!1;let g=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=o||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,f);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,f);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,f);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,f);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new _(t,m,o.injector);if(r&&function D(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(d);this.activated=o.createComponent(b,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(y),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class _{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ys?this.route:e===y?this.childContexts:this.parent.get(e,t)}}let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[g],encapsulation:2}),n})();function G(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dc(n){const e=n.children&&n.children.map(dc),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=M),t}function Br(n){return n.outlet||zt}function Rh(n,e){const t=n.filter(r=>Br(r)===e);return t.push(...n.filter(r=>Br(r)!==e)),t}function Ka(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Ay{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jo(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Qo(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),lr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Qo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Qo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Qo(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Kp(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Zp(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Jo(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Jo(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Ka(o.snapshot),w=m?.get(h._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class tg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yo{constructor(e,t){this.component=e,this.route=t}}function Sy(n,e,t){const r=n._root;return jl(r,e?e._root:null,t,[r.value])}function ea(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function jl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Qo(e);return n.children.forEach(d=>{(function kA(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function Lb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ls(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ls(n.url,e.url)||!gs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mh(n,e)||!gs(n.queryParams,e.queryParams);default:return!Mh(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new tg(r)):(u.data=d.data,u._resolvedData=d._resolvedData),jl(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new yo(m.outlet.component,d))}else d&&$l(e,m,o),o.canActivateChecks.push(new tg(r)),jl(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),lr(u,(d,m)=>$l(d,t.getContext(m),o)),o}function $l(n,e,t){const r=Qo(n),o=n.value;lr(r,(u,d)=>{$l(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new yo(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function fc(n){return"function"==typeof n}function Ry(n){return n instanceof Zu||"EmptyError"===n?.name}const rg=Symbol("INITIAL_VALUE");function pc(){return Vn(n=>Il(n.map(e=>e.pipe(xn(1),Ga(rg)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===rg)return rg;if(!1===t||t instanceof zo)return t}return!0}),Ur(e=>e!==rg),xn(1)))}function F0(n){return(0,gh.z)((0,cr.b)(e=>{if(yi(e))throw Ul(0,e)}),(0,gt.U)(e=>!0===e))}const Jr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ig(n,e,t,r,o){const u=sg(n,e,t);return u.matched?function qb(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?ft(o.map(d=>{const m=ea(d,n);return Si(function xy(n){return n&&fc(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(pc(),F0()):ft(!0)}(r=G(e,r),e,t).pipe((0,gt.U)(d=>!0===d?u:{...Jr})):ft(u)}function sg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Jr}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||b0)(t,n,e);if(!o)return{...Jr};const u={};lr(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function Hl(n,e,t,r,o="corrected"){if(t.length>0&&function Oy(n,e,t){return t.some(r=>og(n,e,r)&&Br(r)!==zt)}(n,t,r)){const d=new Qt(e,function Nh(n,e,t,r){const o={};o[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Br(u)!==zt){const d=new Qt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[Br(u)]=d}return o}(n,e,r,new Qt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Zb(n,e,t){return t.some(r=>og(n,e,r))}(n,t,r)){const d=new Qt(n.segments,function oi(n,e,t,r,o,u){const d={};for(const m of r)if(og(n,t,m)&&!o[Br(m)]){const w=new Qt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[Br(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Qt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function og(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Py(n,e,t,r){return!!(Br(n)===r||r!==zt&&og(e,t,n))&&("**"===n.path||sg(e,n,t).matched)}function L0(n,e,t){return 0===e.length&&!n.children[t]}const Oh=!1;class ag{constructor(e){this.segmentGroup=e||null}}class ky{constructor(e){this.urlTree=e}}function Ph(n){return $o(new ag(n))}function V0(n){return $o(new ky(n))}class Gl{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Hl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,gt.U)(u=>this.createUrlTree(tc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wi(u=>{if(u instanceof ky)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ag?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,gt.U)(o=>this.createUrlTree(tc(o),e.queryParams,e.fragment))).pipe(Wi(o=>{throw o instanceof ag?this.noMatchError(o):o}))}noMatchError(e){return new h.vHH(4002,Oh)}createUrlTree(e,t,r){const o=ho(e);return new zo(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(u=>new Qt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,wn.D)(o).pipe(zi(u=>{const d=r.children[u],m=Rh(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,gt.U)(w=>({segment:w,outlet:u})))}),Ho((u,d)=>(u[d.outlet]=d.segment,u),{}),ao())}expandSegment(e,t,r,o,u,d){return(0,wn.D)(r).pipe(zi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Wi(b=>{if(b instanceof ag)return ft(null);throw b}))),ks(m=>!!m),Wi((m,w)=>{if(Ry(m))return L0(t,o,u)?ft(new Qt([],{})):Ph(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Py(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Ph(t):Ph(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?V0(u):this.lineralizeSegments(r,u).pipe((0,br.z)(d=>{const m=new Qt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:T}=sg(t,o,u);if(!m)return Ph(t);const S=this.applyRedirectCommands(w,o.redirectTo,T);return o.redirectTo.startsWith("/")?V0(S):this.lineralizeSegments(o,S).pipe((0,br.z)(F=>this.expandSegment(e,t,r,F.concat(b),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=G(r,e),r.loadChildren?(r._loadedRoutes?ft({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,gt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Qt(o,{})))):ft(new Qt(o,{}))):ig(t,r,o,e).pipe(Vn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,br.z)(T=>{const S=T.injector??e,F=T.routes,{segmentGroup:Y,slicedSegments:te}=Hl(t,m,w,F),Se=new Qt(Y.segments,Y.children);if(0===te.length&&Se.hasChildren())return this.expandChildren(S,F,Se).pipe((0,gt.U)(Jt=>new Qt(m,Jt)));if(0===F.length&&0===te.length)return ft(new Qt(m,{}));const Re=Br(r)===u;return this.expandSegment(S,Se,F,te,Re?zt:u,!0).pipe((0,gt.U)(Mt=>new Qt(m.concat(Mt.segments),Mt.children)))})):Ph(t)))}getChildConfig(e,t,r){return t.children?ft({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ft({routes:t._loadedRoutes,injector:t._loadedInjector}):function k0(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?ft(!0):ft(o.map(d=>{const m=ea(d,n);return Si(function O0(n){return n&&fc(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(pc(),F0())}(e,t,r).pipe((0,br.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,cr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Yb(n){return $o(Jp(Oh,3))}())):ft({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ft(r);if(o.numberOfChildren>1||!o.children[zt])return $o(new h.vHH(4e3,Oh));o=o.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new zo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return lr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return lr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Qt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,Oh);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class Jb{}class U0{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=Hl(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,gt.U)(t=>{if(null===t)return null;const r=new qa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new vi(r,t),u=new Za(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=uc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,wn.D)(Object.keys(r.children)).pipe(zi(o=>{const u=r.children[o],d=Rh(t,o);return this.processSegmentGroup(e,d,u,o)}),Ho((o,u)=>o&&u?(o.push(...u),o):null),function Tl(n,e=!1){return(0,Nr.e)((t,r)=>{let o=0;t.subscribe((0,Er.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),so(null),ao(),(0,gt.U)(o=>{if(null===o)return null;const u=cg(o);return function VA(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,wn.D)(t).pipe(zi(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),ks(d=>!!d),Wi(d=>{if(Ry(d))return L0(r,o,u)?ft([]):ft(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Py(t,r,o,u))return ft(null);let d;if("**"===t.path){const m=o.length>0?Lp(o).parameters:{},w=B0(r)+o.length;d=ft({snapshot:new qa(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j0(t),Br(t),t.component??t._loadedComponent??null,t,Ly(r),w,$0(t),w),consumedSegments:[],remainingSegments:[]})}else d=ig(r,t,o,e).pipe((0,gt.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:T})=>{if(!m)return null;const S=B0(r)+w.length;return{snapshot:new qa(w,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j0(t),Br(t),t.component??t._loadedComponent??null,t,Ly(r),S,$0(t),S),consumedSegments:w,remainingSegments:b}}));return d.pipe(Vn(m=>{if(null===m)return ft(null);const{snapshot:w,consumedSegments:b,remainingSegments:T}=m;e=t._injector??e;const S=t._loadedInjector??e,F=function vo(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:te}=Hl(r,b,T,F.filter(Re=>void 0===Re.redirectTo),this.relativeLinkResolution);if(0===te.length&&Y.hasChildren())return this.processChildren(S,F,Y).pipe((0,gt.U)(Re=>null===Re?null:[new vi(w,Re)]));if(0===F.length&&0===te.length)return ft([new vi(w,[])]);const Se=Br(t)===u;return this.processSegment(S,F,Y,te,Se?zt:u).pipe((0,gt.U)(Re=>null===Re?null:[new vi(w,Re)]))}))}}function Fy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function cg(n){const e=[],t=new Set;for(const r of n){if(!Fy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=cg(r.children);e.push(new vi(r.value,o))}return e.filter(r=>!t.has(r))}function Ly(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function B0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function j0(n){return n.data||{}}function $0(n){return n.resolve||{}}function jy(n){return"string"==typeof n.title||null===n.title}function $y(n){return Vn(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,gt.U)(()=>e)):ft(e)})}let lg=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[ps]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(G0)},providedIn:"root"}),n})(),G0=(()=>{class n extends lg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eC{}class nC extends class tC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const kh=new h.OlP("",{providedIn:"root",factory:()=>({})}),hg=new h.OlP("ROUTES");let Fh=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ft(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Si(t.loadComponent()).pipe((0,cr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Al(()=>{this.componentLoaders.delete(t)})),o=new io(r,()=>new Ai.x).pipe(Ps());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ft({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,T=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Fp(w.get(hg,[],h.XFs.Self|h.XFs.Optional)));return{routes:b.map(dc),injector:w}}),Al(()=>{this.childrenLoaders.delete(r)})),d=new io(u,()=>new Ai.x).pipe(Ps());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Si(t()).pipe((0,br.z)(r=>r instanceof h.YKP||Array.isArray(r)?ft(r):(0,wn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class iC{}class sC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function z0(n){throw n}function gc(n,e,t){return e.parse("/")}const W0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},q0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function aC(){const n=(0,h.f3M)(Ih),e=(0,h.f3M)(y),t=(0,h.f3M)(xe),r=(0,h.f3M)(h.zs3),o=(0,h.f3M)(h.Sil),u=(0,h.f3M)(hg,{optional:!0})??[],d=(0,h.f3M)(kh,{optional:!0})??{},m=(0,h.f3M)(G0),w=(0,h.f3M)(lg,{optional:!0}),b=(0,h.f3M)(iC,{optional:!0}),T=(0,h.f3M)(eC,{optional:!0}),S=new yr(null,n,e,t,r,o,Fp(u));return b&&(S.urlHandlingStrategy=b),T&&(S.routeReuseStrategy=T),S.titleStrategy=w??m,function oC(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,S),S}let yr=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ai.x,this.errorHandler=z0,this.malformedUriErrorHandler=gc,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ft(void 0),this.urlHandlingStrategy=new sC,this.routeReuseStrategy=new nC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(Fh),this.configLoader.onLoadEndListener=F=>this.triggerEvent(new sc(F)),this.configLoader.onLoadStartListener=F=>this.triggerEvent(new Yo(F)),this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const S=d.get(h.R0b);this.isNgZoneEnabled=S instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Vp(){return new zo(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=go(this.currentUrlTree,this.rootComponentType),this.transitions=new Ln({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ur(o=>0!==o.id),(0,gt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vn(o=>{let u=!1,d=!1;return ft(o).pipe((0,cr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Vn(m=>{const w=this.browserUrlTree.toString(),b=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Hy(m.source)&&(this.browserUrlTree=m.extractedUrl),ft(m).pipe(Vn(S=>{const F=this.transitions.getValue();return r.next(new ic(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),F!==this.transitions.getValue()?fs.E:Promise.resolve(S)}),function ta(n,e,t,r){return Vn(o=>function Qb(n,e,t,r,o){return new Gl(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,gt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,cr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},o.urlAfterRedirects=S.urlAfterRedirects}),function Vy(n,e,t,r,o,u){return(0,br.z)(d=>function LA(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new U0(n,e,t,r,o,d,m,u).recognize().pipe(Vn(w=>null===w?function FA(n){return new Yr.y(e=>e.error(n))}(new Jb):ft(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,gt.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,cr.b)(S=>{if(o.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(Y,S)}this.browserUrlTree=S.urlAfterRedirects}const F=new Ey(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:Y,source:te,restoredState:Se,extras:Re}=m,Tt=new ic(F,this.serializeUrl(Y),te,Se);r.next(Tt);const Mt=go(Y,this.rootComponentType).snapshot;return ft(o={...m,targetSnapshot:Mt,urlAfterRedirects:Y,extras:{...Re,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),fs.E}),(0,cr.b)(m=>{const w=new by(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,gt.U)(m=>o={...m,guards:Sy(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function Bb(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ft({...t,guardsResult:!0}):function jb(n,e,t,r){return(0,wn.D)(n).pipe((0,br.z)(o=>function Wb(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ft(u.map(m=>{const w=Ka(e)??o,b=ea(m,w);return Si(function Vb(n){return n&&fc(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(ks())})).pipe(pc()):ft(!0)}(o.component,o.route,t,e,r)),ks(o=>!0!==o,!0))}(d,r,o,n).pipe((0,br.z)(m=>m&&function N0(n){return"boolean"==typeof n}(m)?function $b(n,e,t,r){return(0,wn.D)(e).pipe(zi(o=>ro(function Ny(n,e){return null!==n&&e&&e(new Sh(n)),ft(!0)}(o.route.parent,r),function Hb(n,e){return null!==n&&e&&e(new Ll(n)),ft(!0)}(o.route,r),function zb(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function R0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>hs(()=>ft(d.guards.map(w=>{const b=Ka(d.node)??t,T=ea(w,b);return Si(function My(n){return n&&fc(n.canActivateChild)}(T)?T.canActivateChild(r,n):b.runInContext(()=>T(r,n))).pipe(ks())})).pipe(pc())));return ft(u).pipe(pc())}(n,o.path,t),function Gb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const o=r.map(u=>hs(()=>{const d=Ka(e)??t,m=ea(u,d);return Si(function P0(n){return n&&fc(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ks())}));return ft(o).pipe(pc())}(n,o.route,t))),ks(o=>!0!==o,!0))}(r,u,n,e):ft(m)),(0,gt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,cr.b)(m=>{if(o.guardsResult=m.guardsResult,yi(m.guardsResult))throw Ul(0,m.guardsResult);const w=new Cy(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Ur(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),$y(m=>{if(m.guards.canActivateChecks.length)return ft(m).pipe((0,cr.b)(w=>{const b=new x0(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}),Vn(w=>{let b=!1;return ft(w).pipe(function Uy(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ft(t);let u=0;return(0,wn.D)(o).pipe(zi(d=>function H0(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!jy(o)&&(u[ps]=o.title),function UA(n,e,t,r){const o=function Wl(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ft({});const u={};return(0,wn.D)(o).pipe((0,br.z)(d=>function By(n,e,t,r){const o=Ka(e)??r,u=ea(n,o);return Si(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ks(),(0,cr.b)(m=>{u[d]=m}))),Ju(1),function mh(n){return(0,gt.U)(()=>n)}(u),Wi(d=>Ry(d)?fs.E:$o(d)))}(u,n,e,r).pipe((0,gt.U)(d=>(n._resolvedData=d,n.data=uc(n,t).resolve,o&&jy(o)&&(n.data[ps]=o.title),null)))}(d.route,r,n,e)),(0,cr.b)(()=>u++),Ju(1),(0,br.z)(d=>u===o.length?ft(t):fs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,cr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,cr.b)(w=>{const b=new Dy(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(b)}))}),$y(m=>{const w=b=>{const T=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,cr.b)(S=>{b.component=S}),(0,gt.U)(()=>{})));for(const S of b.children)T.push(...w(S));return T};return Il(w(m.targetSnapshot.root)).pipe(so(),xn(1))}),$y(()=>this.afterPreactivation()),(0,gt.U)(m=>{const w=function Us(n,e,t){const r=vs(n,e._root,t?t._root:void 0);return new Vl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,cr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new Ay(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,cr.b)({next(){u=!0},complete(){u=!0}}),Al(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Wi(m=>{if(d=!0,Xp(m)){Bl(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new Fl(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),Bl(m)){const b=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),T={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hy(o.source)};this.scheduleNavigation(b,"imperative",null,T,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Ah(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(b){o.reject(b)}}return fs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(dc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,b=o||this.routerState.root,T=w?this.currentUrlTree.fragment:d;let S=null;switch(m){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),M0(b,this.currentUrlTree,t,S,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=yi(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function uC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...W0}:!1===r?{...q0}:r,yi(t))return fy(this.currentUrlTree,t,o);const u=this.parseUrl(t);return fy(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,b;d?(m=d.resolve,w=d.reject,b=d.promise):b=new Promise((F,Y)=>{m=F,w=Y});const T=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),S=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:T,targetPageId:S,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(F=>Promise.reject(F))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Fl(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return aC()},providedIn:"root"}),n})();function Hy(n){return"imperative"!==n}let ql=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ai.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yr),h.Y36(ys),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class Vh{}let Wy=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Ur(t=>t instanceof xi),zi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,wn.D)(o).pipe((0,Yu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ft(null);const u=o.pipe((0,br.z)(d=>null===d?ft(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,wn.D)([u,d]).pipe((0,Yu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(yr),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Vh),h.LFG(Fh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pg=new h.OlP("");let gg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ic?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qr&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Qr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Zl(n,e){return{\u0275kind:n,\u0275providers:e}}function Zy(n){return[{provide:hg,multi:!0,useValue:n}]}function mg(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(yr),o=n.get(Ky);1===n.get(K0)&&r.initialNavigation(),n.get(J0,null,h.XFs.Optional)?.setUpPreloading(),n.get(pg,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const Ky=new h.OlP("",{factory:()=>new Ai.x}),K0=new h.OlP("",{providedIn:"root",factory:()=>1});const J0=new h.OlP("");function hC(n){return Zl(0,[{provide:J0,useExisting:Wy},{provide:Vh,useExisting:n}])}const X0=new h.OlP("ROUTER_FORROOT_GUARD"),pC=[xe,{provide:Ih,useClass:xl},{provide:yr,useFactory:aC},y,{provide:ys,useFactory:function qy(n){return n.routerState.root},deps:[yr]},Fh];function gC(){return new h.PXZ("Router",yr)}let ew=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[pC,[],Zy(t),{provide:X0,useFactory:vC,deps:[[yr,new h.FiY,new h.tp0]]},{provide:kh,useValue:r||{}},r?.useHash?{provide:me,useClass:rt}:{provide:me,useClass:ot},{provide:pg,useFactory:()=>{const n=(0,h.f3M)(yr),e=(0,h.f3M)(Ra),t=(0,h.f3M)(kh);return t.scrollOffset&&e.setOffset(t.scrollOffset),new gg(n,e,t)}},r?.preloadingStrategy?hC(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:gC},r?.initialNavigation?jt(r):[],[{provide:Yy,useFactory:mg},{provide:h.tb,multi:!0,useExisting:Yy}]]}}static forChild(t){return{ngModule:n,providers:[Zy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X0,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[M]}),n})();function vC(n){return"guarded"}function jt(n){return["disabled"===n.initialNavigation?Zl(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(yr);return()=>{e.setUpLocationChangeListener()}}},{provide:K0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Zl(2,[{provide:K0,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(V,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(yr),m=e.get(Ky);(function o(u){e.get(yr).events.pipe(Ur(m=>m instanceof xi||m instanceof Fl||m instanceof Ah),(0,gt.U)(m=>m instanceof xi||m instanceof Fl&&(0===m.code||1===m.code)&&null),Ur(m=>null!==m),xn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?ft(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const Yy=new h.OlP("");class wC{constructor(e){this.fecha=Date.now().toString(),this.correo=e}}class Kl{constructor(){this.correo="",this.clave="",this.nombre=""}existeCorreo(e){let t=!1;return e.forEach(r=>{console.log(r.correo),console.log(this.correo),r.correo==this.correo&&(t=!0)}),t}correspondeClave(e){let t=!1;return e.forEach(r=>{r.correo==this.correo&&r.clave==this.clave&&(t=!0)}),t}equals(e){return this.correo==e.correo}static toUsuario(e){let t=new Kl;return t.correo=e.correo,t.clave=e.clave,t.nombre=e.nombre,t}validarCorreo(){return new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(this.correo)}validarNombre(){return!(null==this.nombre||""==this.nombre||" "==this.nombre||this.nombre.length>20)}validarClave(){return!(null==this.clave||""==this.clave||" "==this.clave)}}var rw=R(4986),Un=R(880);function Uh(){return(0,Nr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Er.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function iw(n,e=no.y){return n=n??IC,(0,Nr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Er.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}function IC(n,e){return n===e}var lt,Ri=R(2011),sw=(R(2274),R(3942)),_e=R(5861),mc=R(9681),Yl=R(4859),wo=R(1877),nn=R(2090),$A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qa={},Qy=Qy||{},Vt=$A||self;function Jy(){}function Xy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Io(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vg="closure_uid_"+(1e9*Math.random()>>>0),_g=0;function CC(n,e,t){return n.call.apply(n.bind,arguments)}function ow(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Xr(n,e,t){return(Xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?CC:ow).apply(null,arguments)}function wg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ei(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Ja(){this.s=this.s,this.o=this.o}var aw={};Ja.prototype.s=!1,Ja.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function bC(n){return Object.prototype.hasOwnProperty.call(n,vg)&&n[vg]||(n[vg]=++_g)}(this);delete aw[n]}},Ja.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ev=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Ig(n){return Array.prototype.concat.apply([],arguments)}function lw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ql(n){return/^[\s\xa0]*$/.test(n)}var ai,dw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ni(n,e){return-1!=n.indexOf(e)}function Xa(n,e){return n<e?-1:n>e?1:0}e:{var tv=Vt.navigator;if(tv){var Bh=tv.userAgent;if(Bh){ai=Bh;break e}}ai=""}function Zi(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nv(n){const e={};for(const t in n)e[t]=n[t];return e}var hw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Eg(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<hw.length;u++)t=hw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Bs(n){return Bs[" "](n),n}Bs[" "]=Jy;var Jl,n,fw=Ni(ai,"Opera"),eu=Ni(ai,"Trident")||Ni(ai,"MSIE"),TC=Ni(ai,"Edge"),bg=TC||eu,AC=Ni(ai,"Gecko")&&!(Ni(ai.toLowerCase(),"webkit")&&!Ni(ai,"Edge"))&&!(Ni(ai,"Trident")||Ni(ai,"MSIE"))&&!Ni(ai,"Edge"),Cg=Ni(ai.toLowerCase(),"webkit")&&!Ni(ai,"Edge");function jh(){var n=Vt.document;return n?n.documentMode:void 0}e:{var $h="",Hh=(n=ai,AC?/rv:([^\);]+)(\)|;)/.exec(n):TC?/Edge\/([\d\.]+)/.exec(n):eu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Cg?/WebKit\/(\S+)/.exec(n):fw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Hh&&($h=Hh?Hh[1]:""),eu){var pw=jh();if(null!=pw&&pw>parseFloat($h)){Jl=String(pw);break e}}Jl=$h}var SC={};var mw=Vt.document&&eu&&(jh()||parseInt(Jl,10))||void 0,HA=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Jy,e),Vt.removeEventListener("test",Jy,e)}catch{}return n}();function ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Dg(n,e){if(ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(AC){e:{try{Bs(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Dg.Z.h.call(this)}}ui.prototype.h=function(){this.defaultPrevented=!0},ei(Dg,ui);var yw={2:"touch",3:"pen",4:"mouse"};Dg.prototype.h=function(){Dg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xl="closure_listenable_"+(1e6*Math.random()|0),xC=0;function sv(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++xC,this.ca=this.fa=!1}function ov(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function av(n){this.src=n,this.g={},this.h=0}function vw(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=uw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(ov(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function _w(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}av.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=_w(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new sv(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var ww="closure_lm_"+(1e6*Math.random()|0),Iw={};function RC(n,e,t,r,o){if(r&&r.once)return OC(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)RC(n,e[u],t,r,o);return null}return t=Wh(t),n&&n[Xl]?n.N(e,t,Io(r)?!!r.capture:!!r,o):NC(n,e,t,!1,r,o)}function NC(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Io(o)?!!o.capture:!!o,m=zh(n);if(m||(n[ww]=m=new av(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function GA(){var e=bw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)HA||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Ew(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function OC(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)OC(n,e[u],t,r,o);return null}return t=Wh(t),n&&n[Xl]?n.O(e,t,Io(r)?!!r.capture:!!r,o):NC(n,e,t,!0,r,o)}function na(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)na(n,e[u],t,r,o);else r=Io(r)?!!r.capture:!!r,t=Wh(t),n&&n[Xl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=_w(u=n.g[e],t,r,o))&&(ov(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=zh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=_w(e,t,r,o)),(t=-1<n?e[n]:null)&&Gh(t))}function Gh(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Xl])vw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ew(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zh(e))?(vw(t,n),0==t.h&&(t.src=null,e[ww]=null)):ov(n)}}}function Ew(n){return n in Iw?Iw[n]:Iw[n]="on"+n}function bw(n,e){if(n.ca)n=!0;else{e=new Dg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Gh(n),n=t.call(r,e)}return n}function zh(n){return(n=n[ww])instanceof av?n:null}var Tg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wh(n){return"function"==typeof n?n:(n[Tg]||(n[Tg]=function(e){return n.handleEvent(e)}),n[Tg])}function jr(){Ja.call(this),this.i=new av(this),this.P=this,this.I=null}function qn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ui(e,n);else if(e instanceof ui)e.target=e.target||n;else{var o=e;Eg(e=new ui(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=qh(d,r,!0,e)&&o}if(o=qh(d=e.g=n,r,!0,e)&&o,o=qh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=qh(d=e.g=t[u],r,!1,e)&&o}function qh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&vw(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}ei(jr,Ja),jr.prototype[Xl]=!0,jr.prototype.removeEventListener=function(n,e,t,r){na(this,n,e,t,r)},jr.prototype.M=function(){if(jr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ov(t[r]);delete n.g[e],n.h--}}this.I=null},jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uv=Vt.JSON.stringify;function PC(){var n=nd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zh,Dw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kC,n=>n.reset());class kC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ag(n){Vt.setTimeout(()=>{throw n},0)}function tu(n,e){Zh||function ed(){var n=Vt.Promise.resolve(void 0);Zh=function(){n.then(FC)}}(),td||(Zh(),td=!0),nd.add(n,e)}var td=!1,nd=new class Cw{constructor(){this.h=this.g=null}add(e,t){const r=Dw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function FC(){for(var n;n=PC();){try{n.h.call(n.g)}catch(t){Ag(t)}var e=Dw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}td=!1}function Kh(n,e){jr.call(this),this.h=n||1,this.g=e||Vt,this.j=Xr(this.kb,this),this.l=Date.now()}function Sg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Yh(n,e,t){if("function"==typeof n)t&&(n=Xr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function Mg(n){n.g=Yh(()=>{n.g=null,n.i&&(n.i=!1,Mg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ei(Kh,jr),(lt=Kh.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qn(this,"tick"),this.da&&(Sg(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){Kh.Z.M.call(this),Sg(this),delete this.g};class Tw extends Ja{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Mg(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yc(n){Ja.call(this),this.h=n,this.g={}}ei(yc,Ja);var Aw=[];function LC(n,e,t,r){Array.isArray(t)||(t&&(Aw[0]=t.toString()),t=Aw);for(var o=0;o<t.length;o++){var u=RC(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Sw(n){Zi(n.g,function(e,t){this.g.hasOwnProperty(t)&&Gh(e)},n),n.g={}}function Qh(){this.g=!0}function vc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ki(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return uv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}yc.prototype.M=function(){yc.Z.M.call(this),Sw(this)},yc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qh.prototype.Aa=function(){this.g=!1},Qh.prototype.info=function(){};var nu={},xw=null;function cv(){return xw=xw||new jr}function Rw(n){ui.call(this,nu.Ma,n)}function _c(n){const e=cv();qn(e,new Rw(e,n))}function lv(n,e){ui.call(this,nu.STAT_EVENT,n),this.stat=e}function _i(n){const e=cv();qn(e,new lv(e,n))}function Nw(n,e){ui.call(this,nu.Na,n),this.size=e}function Jh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}nu.Ma="serverreachability",ei(Rw,ui),nu.STAT_EVENT="statevent",ei(lv,ui),nu.Na="timingevent",ei(Nw,ui);var Xh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ow={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xg(){}function kw(){}xg.prototype.h=null;var _s,rd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Rg(){ui.call(this,"d")}function dv(){ui.call(this,"c")}function id(){}function ef(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new yc(this),this.P=zA,this.W=new Kh(n=bg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Fw}function Fw(){this.i=null,this.g="",this.h=!1}ei(Rg,ui),ei(dv,ui),ei(id,xg),id.prototype.g=function(){return new XMLHttpRequest},id.prototype.i=function(){return{}},_s=new id;var zA=45e3,Ng={},Og={};function hv(n,e,t){n.K=1,n.v=rf(ti(e)),n.s=t,n.U=!0,Lw(n,null)}function Lw(n,e){n.F=Date.now(),ru(n),n.A=ti(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ug(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Fw,n.g=Tv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Tw(Xr(n.Ia,n,n.g),n.O)),LC(n.V,n.g,"readystatechange",n.gb),e=n.H?nv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),_c(1),function VC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var T=b[0];b=b[1];var S=T.split("_");d=2<=S.length&&"type"==S[1]?d+(T+"=")+b+"&":d+(T+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Pg(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Vw(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=BC(n,t),o==Og){4==e&&(n.o=4,_i(14),r=!1),vc(n.j,n.m,null,"[Incomplete Response]");break}if(o==Ng){n.o=4,_i(15),vc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}vc(n.j,n.m,o,null),Uw(n,o)}Pg(n)&&o!=Og&&o!=Ng&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),hf(e),e.L=!0,_i(11))):(vc(n.j,n.m,t,"[Invalid Chunked Response]"),iu(n),wc(n))}function BC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Og:(t=Number(e.substring(t,r)),isNaN(t)?Ng:(r+=1)+t>e.length?Og:(e=e.substr(r,t),n.C=r+t,e))}function ru(n){n.Y=Date.now()+n.P,kg(n,n.P)}function kg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jh(Xr(n.eb,n),e)}function Fg(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function wc(n){0==n.l.G||n.I||Cv(n.l,n)}function iu(n){Fg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Sg(n.W),Sw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Uw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||oa(t.i,n)))if(t.I=n.N,!n.J&&oa(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;ff(t),lf(t)}bv(t),_i(18)}}else t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Jh(Xr(t.ab,t),6e3));if(1>=uf(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else cu(t,11)}else if((n.J||t.g==n)&&ff(t),!Ql(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const T=b[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=b[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const te=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(te){var u=r.i;!u.g&&(Ni(te,"spdy")||Ni(te,"quic")||Ni(te,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Ww(u,u.h),u.h=null))}if(r.D){const Se=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.sa=Se,Rn(r.F,r.D,Se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Gg(r,r.H?r.la:null,r.W),d.J){od(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(Fg(m),ru(m)),r.g=d}else jg(r);0<t.l.length&&pd(t)}else"stop"!=b[0]&&"close"!=b[0]||cu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?cu(t,7):wv(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}_c(4)}catch{}}function tf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xy(n)||"string"==typeof n)ev(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Xy(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function WA(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Xy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function nf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof nf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Lg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];su(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)su(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function su(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(lt=ef.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const e=this.L;e&&3==Do(n)?e.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const T=Do(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||bg||this.g&&(this.h.h||this.g.ga()||_v(this.g)))){this.I||4!=T||7==e||_c(8==e||0>=S?3:2),Fg(this);var t=this.g.ba();this.N=t;t:if(Pg(this)){var r=_v(this.g);n="";var o=r.length,u=4==Do(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){iu(this),wc(this);var d="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function Mw(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ql(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,_i(12),iu(this),wc(this);break e}vc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Uw(this,t)}this.U?(Vw(this,T,d),bg&&this.i&&3==T&&(LC(this.V,this.W,"tick",this.fb),this.W.start())):(vc(this.j,this.m,d,null),Uw(this,d)),4==T&&iu(this),this.i&&!this.I&&(4==T?Cv(this.l,this):(this.i=!1,ru(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),iu(this),wc(this)}}}catch{}},lt.fb=function(){if(this.g){var n=Do(this.g),e=this.g.ga();this.C<e.length&&(Fg(this),Vw(this,n,e),this.i&&4!=n&&ru(this))}},lt.cancel=function(){this.I=!0,iu(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function UC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_c(3),_i(17)),iu(this),this.o=2,wc(this)):kg(this,this.Y-n)},(lt=nf.prototype).R=function(){Lg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},lt.T=function(){return Lg(this),this.g.concat()},lt.get=function(n,e){return su(this.h,n)?this.h[n]:e},lt.set=function(n,e){su(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},lt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var fv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ra(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ra){this.g=void 0!==e?e:n.g,Ic(this,n.j),this.s=n.s,Ec(this,n.i),ou(this,n.m),this.l=n.l,e=n.h;var t=new af;t.i=e.i,e.g&&(t.g=new nf(e.g),t.h=e.h),jw(this,t),this.o=n.o}else n&&(t=String(n).match(fv))?(this.g=!!e,Ic(this,t[1]||"",!0),this.s=ia(t[2]||""),Ec(this,t[3]||"",!0),ou(this,t[4]),this.l=ia(t[5]||"",!0),jw(this,t[6]||"",!0),this.o=ia(t[7]||"")):(this.g=!!e,this.h=new af(null,this.g))}function ti(n){return new ra(n)}function Ic(n,e,t){n.j=t?ia(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ec(n,e,t){n.i=t?ia(e,!0):e}function ou(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function jw(n,e,t){e instanceof af?(n.h=e,function WC(n,e){e&&!n.j&&(sa(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Vg(this,r),Ug(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=sf(e,GC)),n.h=new af(e,n.g))}function Rn(n,e,t){n.h.set(e,t)}function rf(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ia(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function sf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ra.prototype.toString=function(){var n=[],e=this.j;e&&n.push(sf(e,$w,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(sf(e,$w,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(sf(t,"/"==t.charAt(0)?HC:ZA,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",sf(t,zC)),n.join("")};var $w=/[#\/\?@]/g,ZA=/[#\?:]/g,HC=/[#\?]/g,GC=/[#\?@]/g,zC=/#/g;function af(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function sa(n){n.g||(n.g=new nf,n.h=0,n.i&&function Bw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Vg(n,e){sa(n),e=sd(n,e),su(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,su((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Lg(n)))}function Hw(n,e){return sa(n),e=sd(n,e),su(n.g.h,e)}function Ug(n,e,t){Vg(n,e),0<t.length&&(n.i=null,n.g.set(sd(n,e),lw(t)),n.h+=t.length)}function sd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Gw(n){this.l=n||ZC,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ea&&Vt.g.Ea()&&Vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=af.prototype).add=function(n,e){sa(this),this.i=null,n=sd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){sa(this),this.g.forEach(function(t,r){ev(t,function(o){n.call(e,o,r,this)},this)},this)},lt.T=function(){sa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},lt.R=function(n){sa(this);var e=[];if("string"==typeof n)Hw(this,n)&&(e=Ig(e,this.g.get(sd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ig(e,n[t])}return e},lt.set=function(n,e){return sa(this),this.i=null,Hw(this,n=sd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var ZC=10;function zw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uf(n){return n.h?1:n.g?n.g.size:0}function oa(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ww(n,e){n.g?n.g.add(e):n.h=e}function od(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lw(n.i)}function pv(){}function gv(){this.g=new pv}function KC(n,e,t){const r=t||"";try{tf(n,function(o,u){let d=o;Io(o)&&(d=uv(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function au(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Cr(n){this.l=n.$b||null,this.j=n.ib||!1}function bo(n,e){jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ad,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gw.prototype.cancel=function(){if(this.i=qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},pv.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},pv.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},ei(Cr,xg),Cr.prototype.g=function(){return new bo(this.l,this.j)},Cr.prototype.i=function(n){return function(){return n}}({}),ei(bo,jr);var ad=0;function Yi(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function bc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Co(n)}function Co(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=bo.prototype).open=function(n,e){if(this.readyState!=ad)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Co(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bc(this)),this.readyState=ad},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Co(this)),this.g&&(this.readyState=3,Co(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Yi(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?bc(this):Co(this),3==this.readyState&&Yi(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,bc(this))},lt.Ta=function(n){this.g&&(this.response=n,bc(this))},lt.ha=function(){this.g&&bc(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ud=Vt.JSON.parse;function Bn(n){jr.call(this),this.headers=new nf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cc,this.K=this.L=!1}ei(Bn,jr);var Cc="",cd=/^https?$/i,ld=["POST","PUT"];function hd(n){return"content-type"==n.toLowerCase()}function Dc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,mv(n),cf(n)}function mv(n){n.D||(n.D=!0,qn(n,"complete"),qn(n,"error"))}function yv(n){if(n.h&&typeof Qy<"u"&&(!n.C[1]||4!=Do(n)||2!=n.ba()))if(n.v&&4==Do(n))Yh(n.Fa,0,n);else if(qn(n,"readystatechange"),4==Do(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(fv)[1]||null;if(!o&&Vt.self&&Vt.self.location){var u=Vt.self.location.protocol;o=u.substr(0,u.length-1)}r=!cd.test(o?o.toLowerCase():"")}t=r}if(t)qn(n,"complete"),qn(n,"success");else{n.m=6;try{var d=2<Do(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.ba()+"]",mv(n)}}finally{cf(n)}}}function cf(n,e){if(n.g){vv(n);const t=n.g,r=n.C[0]?Jy:null;n.g=null,n.C=null,e||qn(n,"ready");try{t.onreadystatechange=r}catch{}}}function vv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Do(n){return n.g?n.g.readyState:0}function _v(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Cc:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Bg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Zw(n){let e="";return Zi(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function fd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Kw(n){this.za=0,this.l=[],this.h=new Qh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fd("baseRetryDelayMs",5e3,n),this.$a=fd("retryDelaySeedMs",1e4,n),this.Ya=fd("forwardChannelMaxRetries",2,n),this.ra=fd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Gw(n&&n.concurrentRequestLimit),this.Ca=new gv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function wv(n){if(Yw(n),3==n.G){var e=n.V++,t=ti(n.F);Rn(t,"SID",n.J),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),uu(n,t),(e=new ef(n,n.h,e,void 0)).K=2,e.v=rf(ti(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Tv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ru(e)}Dv(n)}function lf(n){n.g&&(hf(n),n.g.cancel(),n.g=null)}function Yw(n){lf(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),ff(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function Iv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&pd(n)}function pd(n){zw(n.i)||n.m||(n.m=!0,tu(n.Ha,n),n.C=0)}function Qw(n,e){var t;t=e?e.m:n.V++;const r=ti(n.F);Rn(r,"SID",n.J),Rn(r,"RID",t),Rn(r,"AID",n.U),uu(n,r),n.o&&n.s&&Bg(r,n.o,n.s),t=new ef(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=df(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ww(n.i,t),hv(t,r,e)}function uu(n,e){n.j&&tf({},function(t,r){Rn(e,r,t)})}function df(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Xr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const T=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{KC(T,d,"req"+b+"_")}catch{r&&r(T)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function jg(n){n.g||n.u||(n.Y=1,tu(n.Ga,n),n.A=0)}function bv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Jh(Xr(n.Ga,n),Hg(n,n.A)),n.A++,0))}function hf(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function $g(n){n.g=new ef(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ti(n.oa);Rn(e,"RID","rpc"),Rn(e,"SID",n.J),Rn(e,"CI",n.N?"0":"1"),Rn(e,"AID",n.U),uu(n,e),Rn(e,"TYPE","xmlhttp"),n.o&&n.s&&Bg(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=rf(ti(e)),t.s=null,t.U=!0,Lw(t,n)}function ff(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function Cv(n,e){var t=null;if(n.g==e){ff(n),hf(n),n.g=null;var r=2}else{if(!oa(n.i,e))return;t=e.D,od(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;qn(r=cv(),new Nw(r,t,e,o)),pd(n)}else jg(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Ev(n,e){return!(uf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Jh(Xr(n.Ha,n,e),Hg(n,n.C)),n.C++,0)))}(n,e)||2==r&&bv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:cu(n,5);break;case 4:cu(n,10);break;case 3:cu(n,6);break;default:cu(n,2)}}function Hg(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function cu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Xr(n.jb,n);t||(t=new ra("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Ic(t,"https"),rf(t)),function Eo(n,e){const t=new Qh;if(Vt.Image){const r=new Image;r.onload=wg(au,t,r,"TestLoadImage: loaded",!0,e),r.onerror=wg(au,t,r,"TestLoadImage: error",!1,e),r.onabort=wg(au,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=wg(au,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _i(2);n.G=0,n.j&&n.j.va(e),Dv(n),Yw(n)}function Dv(n){n.G=0,n.I=-1,n.j&&((0!=qw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,lw(n.l),n.l.length=0),n.j.ua())}function Gg(n,e,t){let r=function jC(n){return n instanceof ra?ti(n):new ra(n,void 0)}(t);if(""!=r.i)e&&Ec(r,e+"."+r.i),ou(r,r.m);else{const o=Vt.location;r=function $C(n,e,t,r){var o=new ra(null,void 0);return n&&Ic(o,n),e&&Ec(o,e),t&&ou(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Zi(n.aa,function(o,u){Rn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Rn(r,e,t),Rn(r,"VER",n.ma),uu(n,r),r}function Tv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Bn(t&&n.Ba&&!n.qa?new Cr({ib:!0}):n.qa)).L=n.H,e}function Jw(){}function pf(){if(eu&&!(10<=Number(mw)))throw Error("Environmental error: no available transport.")}function Oi(n,e){jr.call(this),this.g=new Kw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ql(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ql(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new gd(this)}function Av(n){Rg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Sv(){dv.call(this),this.status=1}function gd(n){this.g=n}(lt=Bn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_s.g(),this.C=function Pw(n){return n.h||(n.h=n.i())}(this.u?this.u:_s),this.g.onreadystatechange=Xr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Dc(this,u)}n=t||"";const o=new nf(this.headers);r&&tf(r,function(u,d){o.set(d,u)}),r=function cw(n){e:{var e=hd;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Vt.FormData&&n instanceof Vt.FormData,!(0<=uw(ld,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vv(this),0<this.B&&((this.K=function dd(n){return eu&&function MC(){return function rv(n){var e=SC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=dw(String(Jl)).split("."),t=dw("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Xa(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Xa(0==o[2].length,0==u[2].length)||Xa(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xr(this.pa,this)):this.A=Yh(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Dc(this,u)}},lt.pa=function(){typeof Qy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qn(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qn(this,"complete"),qn(this,"abort"),cf(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cf(this,!0)),Bn.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?yv(this):this.cb())},lt.cb=function(){yv(this)},lt.ba=function(){try{return 2<Do(this)?this.g.status:-1}catch{return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ud(e)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=Kw.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new ef(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=nv(u),Eg(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=df(this,o,e),Rn(t=ti(this.F),"RID",n),Rn(t,"CVER",22),this.D&&Rn(t,"X-HTTP-Session-Id",this.D),uu(this,t),this.o&&u&&Bg(t,this.o,u),Ww(this.i,o),this.Ra&&Rn(t,"TYPE","init"),this.ja?(Rn(t,"$req",e),Rn(t,"SID","null"),o.$=!0,hv(o,t,null)):hv(o,t,e),this.G=2}}else 3==this.G&&(n?Qw(this,n):0==this.l.length||zw(this.i)||Qw(this))},lt.Ga=function(){if(this.u=null,$g(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Jh(Xr(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_i(10),lf(this),$g(this))},lt.ab=function(){null!=this.v&&(this.v=null,lf(this),bv(this),_i(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),_i(2)):(this.h.info("Failed to ping google.com"),_i(1))},(lt=Jw.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},pf.prototype.g=function(n,e){return new Oi(n,e)},ei(Oi,jr),Oi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),tu(Xr(n.hb,n,e))),_i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Gg(n,null,n.W),pd(n)},Oi.prototype.close=function(){wv(this.g)},Oi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Iv(this.g,e)}else this.v?((e={}).__data__=uv(n),Iv(this.g,e)):Iv(this.g,n)},Oi.prototype.M=function(){this.g.j=null,delete this.j,wv(this.g),delete this.g,Oi.Z.M.call(this)},ei(Av,Rg),ei(Sv,dv),ei(gd,Jw),gd.prototype.xa=function(){qn(this.g,"a")},gd.prototype.wa=function(n){qn(this.g,new Av(n))},gd.prototype.va=function(n){qn(this.g,new Sv(n))},gd.prototype.ua=function(){qn(this.g,"b")},pf.prototype.createWebChannel=pf.prototype.g,Oi.prototype.send=Oi.prototype.u,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,Xh.NO_ERROR=0,Xh.TIMEOUT=8,Xh.HTTP_ERROR=6,Ow.COMPLETE="complete",kw.EventType=rd,rd.OPEN="a",rd.CLOSE="b",rd.ERROR="c",rd.MESSAGE="d",jr.prototype.listen=jr.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.La,Bn.prototype.getLastErrorCode=Bn.prototype.Da,Bn.prototype.getStatus=Bn.prototype.ba,Bn.prototype.getResponseJson=Bn.prototype.Qa,Bn.prototype.getResponseText=Bn.prototype.ga,Bn.prototype.send=Bn.prototype.ea;var YC=Qa.createWebChannelTransport=function(){return new pf},QC=Qa.getStatEventTarget=function(){return cv()},zg=Qa.ErrorCode=Xh,Mv=Qa.EventType=Ow,Xw=Qa.Event=nu,xv=Qa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eI=Qa.FetchXmlHttpFactory=Cr,gf=Qa.WebChannel=kw,tI=Qa.XhrIo=Bn;const Rv="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let Tc="9.9.4";const Ac=new wo.Yd("@firebase/firestore");function Nv(){return Ac.logLevel}function $e(n,...e){if(Ac.logLevel<=wo.in.DEBUG){const t=e.map(Wg);Ac.debug(`Firestore (${Tc}): ${n}`,...t)}}function vr(n,...e){if(Ac.logLevel<=wo.in.ERROR){const t=e.map(Wg);Ac.error(`Firestore (${Tc}): ${n}`,...t)}}function jn(n,...e){if(Ac.logLevel<=wo.in.WARN){const t=e.map(Wg);Ac.warn(`Firestore (${Tc}): ${n}`,...t)}}function Wg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function Ft(n,e){n||dt()}function et(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class iI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eD{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let d=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new tr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=d;e.enqueueRetryable((0,_e.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new tr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new rI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new Or(e)}}class sI{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ft(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class KA{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new sI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pv{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,$e("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.A=t.token,new Ov(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function tD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class oI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=tD(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Dt(n,e){return n<e?-1:n>e?1:0}function ci(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ws(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new $n(0,0))}static max(){return new Nt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mf{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends mf{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const nD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends mf{construct(e,t,r){return new dr(e,t,r)}static isValidIdentifier(e){return nD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(t)}static emptyPath(){return new dr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(fn.fromString(e))}static fromName(e){return new Ye(fn.fromString(e).popFirst(5))}static empty(){return new Ye(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new fn(e.slice()))}}class lu{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function kv(n){return n.fields.find(e=>2===e.kind)}function du(n){return n.fields.filter(e=>2!==e.kind)}lu.UNKNOWN_ID=-1;class yf{constructor(e,t){this.fieldPath=e,this.kind=t}}class hu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new hu(0,Pi.min())}}function uI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Nt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new Pi(o,Ye.empty(),e)}function Fv(n){return new Pi(n.readTime,n.key,-1)}class Pi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pi(Nt.min(),Ye.empty(),-1)}static max(){return new Pi(Nt.max(),Ye.empty(),-1)}}function qg(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Dt(n.largestBatchId,e.largestBatchId))}const vf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ua(n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,_e.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==vf)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),Zg.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(T=>{d[b]=T,++m,m===u&&r(d)},T=>o(T))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class _f{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new tr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new md(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Vv(r.target.error);this.P.reject(new md(e,o))}}static open(e,t,r,o){try{return new _f(t,e.transaction(o,r))}catch(u){throw new md(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iD(t)}}class Is{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Is.D((0,nn.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Sc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,nn.hl)())return!1;if(Is.N())return!0;const e=(0,nn.z$)(),t=Is.D(e),r=0<t&&t<10,o=Is.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new md(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Pe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Pe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new md(e,m))},u.onupgradeneeded=d=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,_e.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=_f.open(u.db,e,d?"readonly":"readwrite",r),b=o(w).next(T=>(w.V(),T)).catch(T=>(w.abort(T),se.reject(T))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,T="FirebaseError"!==b.name&&m<3;if($e("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),u.close(),!T)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class cI{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Sc(this.U.delete())}}class md extends Pe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fu(n){return"IndexedDbTransactionError"===n.name}class iD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Sc(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Sc(this.store.add(e))}get(e){return Sc(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Sc(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Sc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=Vv(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new cI(m),b=t(m.primaryKey,m.value,w);if(b instanceof se){const T=b.catch(S=>(w.done(),se.reject(S)));r.push(T)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sc(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Vv(r.target.error);t(o)}})}let lI=!1;function Vv(n){const e=Is.D((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lI||(lI=!0,setTimeout(()=>{throw r},0)),r}}return n}class sD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){fu(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ua(r)}yield t.nt(1)}))}}class oD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return $e("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>($e("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=Fv(u);qg(d,r)>0&&(r=d)}),new Pi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ki{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function dI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ki.at=-1;class hr{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kg(this.root,e,this.comparator,!0)}}class Kg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ni.RED,this.left=o??ni.EMPTY,this.right=u??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ni(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ni.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dn{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fI(this.data.getIterator())}getIteratorFrom(e){return new fI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class fI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yd(n){return n.hasNext()?n.getNext():void 0}class Qi{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new Qi([])}unionWith(e){let t=new Dn(dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ci(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Dr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const gI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=gI.exec(n);if(Ft(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nr(n.seconds),nanos:nr(n.nanos)}}function nr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pu(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function Yg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Uv(n){const e=n.mapValue.fields.__previous_value__;return Yg(e)?Uv(e):e}function vd(n){const e=ca(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class mI{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class la{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}function js(n){return null==n}function wf(n){return 0===n&&1/n==-1/0}function yI(n){return"number"==typeof n&&Number.isInteger(n)&&!wf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ji={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bv={nullValue:"NULL_VALUE"};function da(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yg(n)?4:uD(n)?9007199254740991:10:dt()}function ha(n,e){if(n===e)return!0;const t=da(n);if(t!==da(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vd(n).isEqual(vd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ca(r.timestampValue),d=ca(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,pu(n.bytesValue).isEqual(pu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return nr(r.geoPointValue.latitude)===nr(o.geoPointValue.latitude)&&nr(r.geoPointValue.longitude)===nr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return nr(r.integerValue)===nr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=nr(r.doubleValue),d=nr(o.doubleValue);return u===d?wf(u)===wf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ci(n.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(dI(u)!==dI(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!ha(u[m],d[m])))return!1;return!0}(n,e);default:return dt()}var o}function _d(n,e){return void 0!==(n.values||[]).find(t=>ha(t,e))}function fa(n,e){if(n===e)return 0;const t=da(n),r=da(e);if(t!==r)return Dt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=nr(o.integerValue||o.doubleValue),m=nr(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return aD(n.timestampValue,e.timestampValue);case 4:return aD(vd(n),vd(e));case 5:return Dt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=pu(o),m=pu(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const b=Dt(d[w],m[w]);if(0!==b)return b}return Dt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Dt(nr(o.latitude),nr(u.latitude));return 0!==d?d:Dt(nr(o.longitude),nr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const b=fa(d[w],m[w]);if(b)return b}return Dt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Ji.mapValue&&u===Ji.mapValue)return 0;if(o===Ji.mapValue)return 1;if(u===Ji.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let T=0;T<m.length&&T<b.length;++T){const S=Dt(m[T],b[T]);if(0!==S)return S;const F=fa(d[m[T]],w[b[T]]);if(0!==F)return F}return Dt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw dt()}}function aD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Dt(n,e);const t=ca(n),r=ca(e),o=Dt(t.seconds,r.seconds);return 0!==o?o:Dt(t.nanos,r.nanos)}function It(n){return jv(n)}function jv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ca(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pu(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=jv(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${jv(r.fields[m])}`;return u+"}"}(n.mapValue):dt();var e}function xc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $v(n){return!!n&&"integerValue"in n}function To(n){return!!n&&"arrayValue"in n}function vI(n){return!!n&&"nullValue"in n}function If(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rc(n){return!!n&&"mapValue"in n}function Nn(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Mc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nn(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nn(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uD(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _I(n){return"nullValue"in n?Bv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xc(la.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function wI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xc(la.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ji:dt()}function II(n,e){const t=fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Hv(n,e){const t=fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nn(t)}setAll(e){let t=dr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Nn(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Mc(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new $r(Nn(this.value))}}function Gv(n){const e=[];return Mc(n.fields,(t,r)=>{const o=new dr([t]);if(Rc(r)){const u=Gv(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Qi(e)}class An{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new An(e,0,Nt.min(),Nt.min(),$r.empty(),0)}static newFoundDocument(e,t,r){return new An(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new An(e,2,t,Nt.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Nt.min(),$r.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cD{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function EI(n,e=null,t=[],r=[],o=null,u=null,d=null){return new cD(n,e,t,r,o,u,d)}function Nc(n){const e=et(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+It(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),js(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>It(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>It(r)).join(",")),e.ht=t}return e.ht}function bf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!pD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ha(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DI(n.startAt,e.startAt)&&DI(n.endAt,e.endAt)}function Qg(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Jg(n,e){return n.filters.filter(t=>t instanceof Hr&&t.field.isEqual(e))}function Cf(n,e,t){let r=Bv,o=!0;for(const u of Jg(n,e)){let d=Bv,m=!0;switch(u.op){case"<":case"<=":d=_I(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Bv}II({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];II({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function zv(n,e,t){let r=Ji,o=!0;for(const u of Jg(n,e)){let d=Ji,m=!0;switch(u.op){case">=":case">":d=wI(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Ji}Hv({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Hv({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Hr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new bI(e,t,r):"array-contains"===t?new dD(e,r):"in"===t?new hD(e,r):"not-in"===t?new fD(e,r):"array-contains-any"===t?new CI(e,r):new Hr(e,t,r)}static lt(e,t,r){return"in"===t?new lD(e,r):new Df(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(fa(t,this.value)):null!==t&&da(this.value)===da(t)&&this.ft(fa(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class bI extends Hr{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.ft(t)}}class lD extends Hr{constructor(e,t){super(e,"in",t),this.keys=wd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Df extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=wd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wd(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class dD extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return To(t)&&_d(t.arrayValue,this.value)}}class hD extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_d(this.value.arrayValue,t)}}class fD extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(_d(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_d(this.value.arrayValue,t)}}class CI extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!To(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_d(this.value.arrayValue,r))}}class pa{constructor(e,t){this.position=e,this.inclusive=t}}class Oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function pD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Wv(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ye.comparator(Ye.fromName(d.referenceValue),t.key):fa(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function DI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ha(n.position[t],e.position[t]))return!1;return!0}class ga{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function gD(n,e,t,r,o,u,d,m){return new ga(n,e,t,r,o,u,d,m)}function Tf(n){return new ga(n)}function mD(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function TI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Xg(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Id(n){return null!==n.collectionGroup}function Ed(n){const e=et(n);if(null===e._t){e._t=[];const t=Xg(e),r=TI(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Oc(t)),e._t.push(new Oc(dr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Oc(dr.keyField(),u))}}}return e._t}function Fi(n){const e=et(n);if(!e.wt)if("F"===e.limitType)e.wt=EI(e.path,e.collectionGroup,Ed(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ed(e))t.push(new Oc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new pa(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new pa(e.startAt.position,e.startAt.inclusive):null;e.wt=EI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function Af(n,e,t){return new ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ma(n,e){return bf(Fi(n),Fi(e))&&n.limitType===e.limitType}function AI(n){return`${Nc(Fi(n))}|lt:${n.limitType}`}function qv(n){return`Query(target=${function Ef(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${It(r.value)}`;var r}).join(", ")}]`),js(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>It(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>It(t)).join(",")),`Target(${e})`}(Fi(n))}; limitType=${n.limitType})`}function Zv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ye.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Wv(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Ed(t),r)||t.endAt&&!function(o,u,d){const m=Wv(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Ed(t),r)));var t,r}function SI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MI(n){return(e,t)=>{let r=!1;for(const o of Ed(n)){const u=xI(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function xI(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?fa(m,w):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function RI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wf(e)?"-0":e}}function NI(n){return{integerValue:""+n}}function Pc(n,e){return yI(e)?NI(e):RI(n,e)}class em{constructor(){this._=void 0}}function OI(n,e,t){return n instanceof bd?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof gu?PI(n,e):n instanceof ya?kI(n,e):function(r,o){const u=Kv(r,o),d=Yv(u)+Yv(r.yt);return $v(u)&&$v(r.yt)?NI(d):RI(r.It,d)}(n,e)}function yD(n,e,t){return n instanceof gu?PI(n,e):n instanceof ya?kI(n,e):t}function Kv(n,e){return n instanceof kc?$v(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class bd extends em{}class gu extends em{constructor(e){super(),this.elements=e}}function PI(n,e){const t=FI(e);for(const r of n.elements)t.some(o=>ha(o,r))||t.push(r);return{arrayValue:{values:t}}}class ya extends em{constructor(e){super(),this.elements=e}}function kI(n,e){let t=FI(e);for(const r of n.elements)t=t.filter(o=>!ha(o,r));return{arrayValue:{values:t}}}class kc extends em{constructor(e,t){super(),this.It=e,this.yt=t}}function Yv(n){return nr(n.integerValue||n.doubleValue)}function FI(n){return To(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Sf{constructor(e,t){this.field=e,this.transform=t}}class Qv{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class tm{}function LI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dd(n.key,Zn.none()):new Cd(n.key,n.data,Zn.none());{const t=n.data,r=$r.empty();let o=new Dn(dr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new va(n.key,r,new Qi(o.toArray()),Zn.none())}}function _D(n,e,t){n instanceof Cd?function(r,o,u){const d=r.value.clone(),m=Xv(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof va?function(r,o,u){if(!Mf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Xv(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Jv(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xf(n,e,t,r){return n instanceof Cd?function(o,u,d,m){if(!Mf(o.precondition,u))return d;const w=o.value.clone(),b=UI(o.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof va?function(o,u,d,m){if(!Mf(o.precondition,u))return d;const w=UI(o.fieldTransforms,m,u),b=u.data;return b.setAll(Jv(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(T=>T.field))}(n,e,t,r):(d=t,Mf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function wD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Kv(r.transform,o||null);null!=u&&(null===t&&(t=$r.empty()),t.set(r.field,u))}return t||null}function VI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ci(t,r,(o,u)=>function vD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof gu&&r instanceof gu||t instanceof ya&&r instanceof ya?ci(t.elements,r.elements,ha):t instanceof kc&&r instanceof kc?ha(t.yt,r.yt):t instanceof bd&&r instanceof bd);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Cd extends tm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class va extends tm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Jv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Xv(n,e,t){const r=new Map;Ft(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,yD(d,m,t[o]))}return r}function UI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,OI(u,d,e))}return r}class Dd extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nm extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ID{constructor(e){this.count=e}}var Tr,pn;function rm(n){switch(n){default:return dt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function im(n){if(void 0===n)return vr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Tr.OK:return fe.OK;case Tr.CANCELLED:return fe.CANCELLED;case Tr.UNKNOWN:return fe.UNKNOWN;case Tr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Tr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Tr.INTERNAL:return fe.INTERNAL;case Tr.UNAVAILABLE:return fe.UNAVAILABLE;case Tr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Tr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Tr.NOT_FOUND:return fe.NOT_FOUND;case Tr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Tr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Tr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Tr.ABORTED:return fe.ABORTED;case Tr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Tr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Tr.DATA_LOSS:return fe.DATA_LOSS;default:return dt()}}(pn=Tr||(Tr={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class _a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mc(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return hI(this.inner)}size(){return this.innerSize}}const e_=new hr(Ye.comparator);function Li(){return e_}const BI=new hr(Ye.comparator);function Fc(...n){let e=BI;for(const t of n)e=e.insert(t.key,t);return e}function jI(n){let e=BI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $s(){return Td()}function Lc(){return Td()}function Td(){return new _a(n=>n.toString(),(n,e)=>n.isEqual(e))}const ED=new hr(Ye.comparator),YA=new Dn(Ye.comparator);function Ht(...n){let e=YA;for(const t of n)e=e.add(t);return e}const t_=new Dn(Dt);function sm(){return t_}class Vc{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Rf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Vc(Nt.min(),r,sm(),Li(),Ht())}}class Rf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Rf(Dr.EMPTY_BYTE_STRING,t,Ht(),Ht(),Ht())}}class Nf{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class om{constructor(e,t){this.targetId=e,this.At=t}}class n_{constructor(e,t,r=Dr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class r_{constructor(){this.Rt=0,this.bt=HI(),this.Pt=Dr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ht(),t=Ht(),r=Ht();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:dt()}}),new Rf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=HI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class $I{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Li(),this.qt=i_(),this.Kt=new Dn(Dt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(Qg(u))if(0===r){const d=new Ye(u.path);this.jt(t,d,An.newNoDocument(d,Nt.min()))}else Ft(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&Qg(m.target)){const w=new Ye(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,An.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Ht();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const b=this.Xt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new Vc(e,t,this.Kt,this.Ut,r);return this.Ut=Li(),this.qt=i_(),this.Kt=new Dn(Dt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new r_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Dn(Dt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new r_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function i_(){return new hr(Ye.comparator)}function HI(){return new hr(Ye.comparator)}const bD={asc:"ASCENDING",desc:"DESCENDING"},CD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class DD{constructor(e,t){this.databaseId=e,this.gt=t}}function Ad(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TD(n,e){return n.gt?e.toBase64():e.toUint8Array()}function GI(n,e){return Ad(n,e.toTimestamp())}function Gr(n){return Ft(!!n),Nt.fromTimestamp(function(e){const t=ca(e);return new $n(t.seconds,t.nanos)}(n))}function s_(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function AD(n){const e=fn.fromString(n);return Ft(QI(e)),e}function am(n,e){return s_(n.databaseId,e.path)}function Ao(n,e){const t=AD(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(WI(t))}function o_(n,e){return s_(n.databaseId,e)}function zI(n){const e=AD(n);return 4===e.length?fn.emptyPath():WI(e)}function Of(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WI(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qI(n,e,t){return{name:am(n,e),fields:t.value.mapValue.fields}}function ZI(n,e,t){const r=Ao(n,e.name),o=Gr(e.updateTime),u=new $r({mapValue:{fields:e.fields}}),d=An.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Pf(n,e){let t;if(e instanceof Cd)t={update:qI(n,e.key,e.value)};else if(e instanceof Dd)t={delete:am(n,e.key)};else if(e instanceof va)t={update:qI(n,e.key,e.data),updateMask:PD(e.fieldMask)};else{if(!(e instanceof nm))return dt();t={verify:am(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof bd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof gu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ya)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof kc)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:GI(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:dt()),t;var o}function a_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Zn.updateTime(Gr(o.updateTime)):void 0!==o.exists?Zn.exists(o.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Ft("REQUEST_TIME"===d.setToServerValue),m=new bd):"appendMissingElements"in d?m=new gu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new ya(d.removeAllFromArray.values||[]):"increment"in d?m=new kc(u,d.increment):dt();const w=dr.fromServerFormat(d.fieldPath);return new Sf(w,m)}(n,o)):[];var o;if(e.update){const o=Ao(n,e.update.name),u=new $r({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Qi((e.updateMask.fieldPaths||[]).map(b=>dr.fromServerFormat(b)));return new va(o,u,d,t,r)}return new Cd(o,u,t,r)}if(e.delete){const o=Ao(n,e.delete);return new Dd(o,t)}if(e.verify){const o=Ao(n,e.verify);return new nm(o,t)}return dt()}function Sd(n,e){return{documents:[o_(n,e.path)]}}function u_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=o_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=o_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const b=w.map(T=>function(S){if("=="===S.op){if(If(S.value))return{unaryFilter:{field:Md(S.field),op:"IS_NAN"}};if(vI(S.value))return{unaryFilter:{field:Md(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(If(S.value))return{unaryFilter:{field:Md(S.field),op:"IS_NOT_NAN"}};if(vI(S.value))return{unaryFilter:{field:Md(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Md(S.field),op:RD(S.op),value:S.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:Md((T=b).field),direction:YI(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(b=e.limit,n.gt||js(b)?b:{value:b});var b,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function c_(n){let e=zI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ft(1===r);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=l_(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(T=>{return new Oc(kf((S=T).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let m=null;t.limit&&(m=function(T){let S;return S="object"==typeof T?T.value:T,js(S)?null:S}(t.limit));let w=null;var T;t.startAt&&(w=new pa((T=t.startAt).values||[],!!T.before));let b=null;return t.endAt&&(b=function(T){return new pa(T.values||[],!T.before)}(t.endAt)),gD(e,o,d,u,m,"F",w,b)}function l_(n){return n?void 0!==n.unaryFilter?[OD(n)]:void 0!==n.fieldFilter?[ND(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>l_(e)).reduce((e,t)=>e.concat(t)):dt():[]}function YI(n){return bD[n]}function RD(n){return CD[n]}function Md(n){return{fieldPath:n.canonicalString()}}function kf(n){return dr.fromServerFormat(n.fieldPath)}function ND(n){return Hr.create(kf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function OD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=kf(n.unaryFilter.field);return Hr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=kf(n.unaryFilter.field);return Hr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=kf(n.unaryFilter.field);return Hr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kf(n.unaryFilter.field);return Hr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function PD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function wi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JI(e)),e=Ff(n.get(t),e);return JI(e)}function Ff(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function JI(n){return n+"\x01\x01"}function Es(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&dt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:dt()}u=d+2}return new fn(r)}const Hs=["userId","batchId"];function um(n,e){return[n,wi(e)]}function cm(n,e,t){return[n,wi(e),t]}const Lf={},kD=["prefixPath","collectionGroup","readTime","documentId"],FD=["prefixPath","collectionGroup","documentId"],LD=["collectionGroup","readTime","prefixPath","documentId"],lm=["canonicalId","targetId"],dm=["targetId","path"],VD=["path","targetId"],UD=["collectionId","parent"],XI=["indexId","uid"],eE=["uid","sequenceNumber"],d_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tE=["indexId","uid","orderedDocumentKey"],BD=["userId","collectionPath","documentId"],jD=["userId","collectionPath","largestBatchId"],QA=["userId","collectionGroup","largestBatchId"],hm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],h_=[...hm,"documentOverlays"],f_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fm=f_,p_=[...fm,"indexConfiguration","indexState","indexEntries"];class g_ extends Lv{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function zr(n,e){const t=et(n);return Is.O(t.ie,e)}class m_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&_D(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Lc();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=LI(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(Nt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&ci(this.mutations,e.mutations,(t,r)=>VI(t,r))&&ci(this.baseMutations,e.baseMutations,(t,r)=>VI(t,r))}}class y_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ft(e.mutations.length===r.length);let o=ED;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new y_(e,t,r,o)}}class pm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class So{constructor(e,t,r,o,u=Nt.min(),d=Nt.min(),m=Dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class v_{constructor(e){this.re=e}}function __(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:am(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ad(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Uc(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:Uc(e.version)}}var o,u;return r}function Vf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Uc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mu(n){const e=new $n(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function yu(n,e){const t=(e.baseMutations||[]).map(u=>a_(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>a_(n.re,u)),o=$n.fromMillis(e.localWriteTimeMs);return new m_(e.batchId,o,t,r)}function Uf(n){const e=mu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mu(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var o;return void 0!==n.query.documents?(Ft(1===(o=n.query).documents.length),r=Fi(Tf(zI(o.documents[0])))):r=Fi(c_(n.query)),new So(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Dr.fromBase64String(n.resumeToken))}function w_(n,e){const t=Uc(e.snapshotVersion),r=Uc(e.lastLimboFreeSnapshotVersion);let o;o=Qg(e.target)?Sd(n.re,e.target):u_(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Nc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function I_(n){const e=c_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Af(e,e.limit,"L"):e}function ri(n,e){return new pm(e.largestBatchId,a_(n.re,e.overlayMutation))}function Bc(n,e){const t=e.path.lastSegment();return[n,wi(e.path.popLast()),t]}function nE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Uc(r.readTime),documentKey:wi(r.documentKey.path),largestBatchId:r.largestBatchId}}class HD{getBundleMetadata(e,t){return GD(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:mu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return GD(e).put({bundleId:(r=t).id,createTime:Uc(Gr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:I_(o.bundledQuery),readTime:mu(o.readTime)};var o})}saveNamedQuery(e,t){return zD(e).put({name:(r=t).name,readTime:Uc(Gr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function GD(n){return zr(n,"bundles")}function zD(n){return zr(n,"namedQueries")}class Bf{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Bf(e,t.uid||"")}getOverlay(e,t){return xd(e).get(Bc(this.userId,t)).next(r=>r?ri(this.It,r):null)}getOverlays(e,t){const r=$s();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new pm(t,d);o.push(this.ue(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(wi(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(xd(e).Y("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=$s(),u=wi(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return xd(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const b=ri(this.It,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=$s();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xd(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,b,T)=>{const S=ri(this.It,b);u.size()<o||S.largestBatchId===d?(u.set(S.getKey(),S),d=S.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return xd(e).put(function(r,o,u){const[d,m,w]=Bc(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Pf(r.re,u.mutation)}}(this.It,this.userId,t))}}function xd(n){return zr(n,"documentOverlays")}class Gs{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(nr(e.integerValue));else if("doubleValue"in e){const r=nr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),wf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(pu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?uD(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):dt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),Ye.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function WD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function gm(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=WD(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Gs.Te=new Gs;class qD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=gm(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=gm(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class rE{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class ZD{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class jf{constructor(){this.Be=new qD,this.Le=new rE(this.Be),this.Ue=new ZD(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class jc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new jc(this.indexId,this.documentKey,this.arrayValue,r)}}function wa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=E_(n.arrayValue,e.arrayValue),0!==t?t:(t=E_(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function E_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class iE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=kv(e);if(void 0!==t&&!this.ze(t))return!1;const r=du(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class mm{constructor(){this.Ye=new $f}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Pi.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class $f{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Dn(fn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Dn(fn.comparator)).toArray()}}const b_=new Uint8Array(0);class sE{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new $f,this.Ze=new _a(r=>Nc(r),(r,o)=>bf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:wi(o)};return oE(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ws(t),""],!1,!0);return oE(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Es(d.parent))}return r})}addFieldIndex(e,t){const r=Ia(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Hf(e);return u.next(m=>{d.put(nE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Ia(e),o=Hf(e),u=Rd(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Rd(e);let o=!0;const u=new Map;return se.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Ht();const m=[];return se.forEach(u,(w,b)=>{var T;$e("IndexedDbIndexManager",`Using index ${T=w,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Jt=>`${Jt.fieldPath}:${Jt.kind}`).join(",")}`} to execute ${Nc(t)}`);const S=function(Jt,$t){const Gt=kv($t);if(void 0===Gt)return null;for(const ln of Jg(Jt,Gt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(b,w),F=function(Jt,$t){const Gt=new Map;for(const ln of du($t))for(const ii of Jg(Jt,ln.fieldPath))switch(ii.op){case"==":case"in":Gt.set(ln.fieldPath.canonicalString(),ii.value);break;case"not-in":case"!=":return Gt.set(ln.fieldPath.canonicalString(),ii.value),Array.from(Gt.values())}return null}(b,w),Y=function(Jt,$t){const Gt=[];let ln=!0;for(const ii of du($t)){const m0=0===ii.kind?Cf(Jt,ii.fieldPath,Jt.startAt):zv(Jt,ii.fieldPath,Jt.startAt);Gt.push(m0.value),ln&&(ln=m0.inclusive)}return new pa(Gt,ln)}(b,w),te=function(Jt,$t){const Gt=[];let ln=!0;for(const ii of du($t)){const m0=0===ii.kind?zv(Jt,ii.fieldPath,Jt.endAt):Cf(Jt,ii.fieldPath,Jt.endAt);Gt.push(m0.value),ln&&(ln=m0.inclusive)}return new pa(Gt,ln)}(b,w),Se=this.nn(w,b,Y),Re=this.nn(w,b,te),Tt=this.sn(w,b,F),Mt=this.rn(w.indexId,S,Se,Y.inclusive,Re,te.inclusive,Tt);return se.forEach(Mt,Jt=>r.J(Jt,t.limit).next($t=>{$t.forEach(Gt=>{const ln=Ye.fromSegments(Gt.documentKey);d.has(ln)||(d=d.add(ln),m.push(ln))})}))}).next(()=>m)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),T=[];for(let S=0;S<w;++S){const F=t?this.on(t[S/b]):b_,Y=this.un(e,F,r[S%b],o),te=this.cn(e,F,u[S%b],d),Se=m.map(Re=>this.un(e,F,Re,!0));T.push(...this.createRange(Y,te,Se))}return T}un(e,t,r,o){const u=new jc(e,Ye.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new jc(e,Ye.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new iE(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new Dn(dr.comparator),w=!1;for(const b of d.filters){const T=b;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?w=!0:m=m.add(T.field))}for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new jf;for(const o of du(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Gs.Te.ce(u,d)}return r.$e()}on(e){const t=new jf;return Gs.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new jf;return Gs.Te.ce(xc(this.databaseId,t),r.qe(function(o){const u=du(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new jf);let u=0;for(const d of du(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&To(m))o=this.fn(o,d,m);else{const b=w.qe(d.kind);Gs.Te.ce(m,b)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new jf;w.seed(m.$e()),Gs.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Hr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ia(e),o=Hf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(b,T){const S=T?new hu(T.sequenceNumber,new Pi(mu(T.readTime),new Ye(Es(T.documentKey)),T.largestBatchId)):hu.empty(),F=b.fields.map(([Y,te])=>new yf(dr.fromServerFormat(Y),te));return new lu(b.indexId,b.collectionGroup,F,S)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Dt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Ia(e),u=Hf(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,w=>u.put(nE(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,w=>this.wn(e,o,w).next(b=>{const T=this.mn(u,w);return b.isEqual(T)?se.resolve():this.gn(e,u,w,b,T)}))))})}yn(e,t,r,o){return Rd(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return Rd(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=Rd(e);let u=new Dn(wa);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new jc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new Dn(wa);const o=this.an(t,e);if(null==o)return r;const u=kv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(To(d))for(const m of d.arrayValue.values||[])r=r.add(new jc(t.indexId,e.key,this.on(m),o))}else r=r.add(new jc(t.indexId,e.key,b_,o));return r}gn(e,t,r,o,u){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,b,T,S){const F=m.getIterator(),Y=w.getIterator();let te=yd(F),Se=yd(Y);for(;te||Se;){let Re=!1,Tt=!1;if(te&&Se){const Mt=b(te,Se);Mt<0?Tt=!0:Mt>0&&(Re=!0)}else null!=te?Tt=!0:Re=!0;Re?(T(Se),Se=yd(Y)):Tt?(S(te),te=yd(F)):(te=yd(F),Se=yd(Y))}}(o,u,wa,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),se.waitFor(d)}_n(e){let t=1;return Hf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>wa(d,m)).filter((d,m,w)=>!m||0!==wa(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=wa(d,e),w=wa(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,b_,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,b_,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(C_)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||dt())).next(C_)}}function oE(n){return zr(n,"collectionParents")}function Rd(n){return zr(n,"indexEntries")}function Ia(n){return zr(n,"indexConfiguration")}function Hf(n){return zr(n,"indexState")}function C_(n){Ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;qg(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Pi(e.readTime,e.documentKey,t)}const ym={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function aE(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(T,S,F)=>(m++,F.delete()));u.push(w.next(()=>{Ft(1===m)}));const b=[];for(const T of t.mutations){const S=cm(e,T.key.path,t.batchId);u.push(o.delete(S)),b.push(T.key)}return se.waitFor(u).next(()=>b)}function D_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class vm{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Ft(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new vm(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vu(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=$c(e),d=vu(e);return d.add({}).next(m=>{Ft("number"==typeof m);const w=new m_(m,t,r,o),b=function(F,Y,te){const Se=te.baseMutations.map(Tt=>Pf(F.re,Tt)),Re=te.mutations.map(Tt=>Pf(F.re,Tt));return{userId:Y,batchId:te.batchId,localWriteTimeMs:te.localWriteTime.toMillis(),baseMutations:Se,mutations:Re}}(this.It,this.userId,w),T=[];let S=new Dn((F,Y)=>Dt(F.canonicalString(),Y.canonicalString()));for(const F of o){const Y=cm(this.userId,F.key.path,m);S=S.add(F.key.path.popLast()),T.push(d.put(b)),T.push(u.put(Y,Lf))}return S.forEach(F=>{T.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),se.waitFor(T).next(()=>w)})}lookupMutationBatch(e,t){return vu(e).get(t).next(r=>r?(Ft(r.userId===this.userId),yu(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return vu(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Ft(m.batchId>=r),u=yu(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vu(e).W("userMutationsIndex",t).next(r=>r.map(o=>yu(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=um(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return $c(e).Z({range:o},(d,m,w)=>{const[b,T,S]=d,F=Es(T);if(b===this.userId&&t.path.isEqual(F))return vu(e).get(S).next(Y=>{if(!Y)throw dt();Ft(Y.userId===this.userId),u.push(yu(this.It,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Dt);const o=[];return t.forEach(u=>{const d=um(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=$c(e).Z({range:m},(b,T,S)=>{const[F,Y,te]=b,Se=Es(Y);F===this.userId&&u.path.isEqual(Se)?r=r.add(te):S.done()});o.push(w)}),se.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=um(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new Dn(Dt);return $c(e).Z({range:d},(w,b,T)=>{const[S,F,Y]=w,te=Es(F);S===this.userId&&r.isPrefixOf(te)?te.length===o&&(m=m.add(Y)):T.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(vu(e).get(u).next(d=>{if(null===d)throw dt();Ft(d.userId===this.userId),r.push(yu(this.It,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return aE(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return $c(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Es(u[1]);o.push(w)}else m.done()}).next(()=>{Ft(0===o.length)})})}containsKey(e,t){return uE(e,this.userId,t)}Rn(e){return T_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uE(n,e,t){const r=um(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return $c(n).Z({range:u,X:!0},(m,w,b)=>{const[T,S,F]=m;T===e&&S===o&&(d=!0),b.done()}).next(()=>d)}function vu(n){return zr(n,"mutations")}function $c(n){return zr(n,"documentMutations")}function T_(n){return zr(n,"mutationQueues")}class Hc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Hc(0)}static vn(){return new Hc(-1)}}class cE{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Hc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Nt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Gc(e).Z((d,m)=>{const w=Uf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Gc(e).Z((r,o)=>{const u=Uf(o);t(u)})}Vn(e){return lE(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}Sn(e,t){return lE(e).put("targetGlobalKey",t)}Dn(e,t){return Gc(e).put(w_(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Nc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Gc(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const b=Uf(m);bf(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=_u(e);return t.forEach(d=>{const m=wi(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=_u(e);return se.forEach(t,u=>{const d=wi(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=_u(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=_u(e);let u=Ht();return o.Z({range:r,X:!0},(d,m,w)=>{const b=Es(d[1]),T=new Ye(b);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=wi(t.path),o=IDBKeyRange.bound([r],[ws(r)],!1,!0);let u=0;return _u(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,b)=>{0!==d&&(u++,b.done())}).next(()=>u>0)}se(e,t){return Gc(e).get(t).next(r=>r?Uf(r):null)}}function Gc(n){return zr(n,"targets")}function lE(n){return zr(n,"targetGlobal")}function _u(n){return zr(n,"targetDocuments")}function A_([n,e],[t,r]){const o=Dt(n,t);return 0===o?Dt(e,r):o}class KD{constructor(e){this.xn=e,this.buffer=new Dn(A_),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();A_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fu(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ua(r)}yield t.Fn(3e5)}))}}class hE{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(ki.at);const r=new KD(t);return this.$n.forEachTarget(e,o=>r.Mn(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.Mn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(ym)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ym):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,m=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(b=Date.now(),Nv()<=wo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${S} documents in `+(b-w)+`ms\nTotal Duration: ${b-T}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class fE{constructor(e,t){this.db=e,this.garbageCollector=new hE(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return Gf(e,r)}removeReference(e,t,r){return Gf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Gf(e,t)}Gn(e,t){return function(r,o){let u=!1;return T_(r).tt(d=>uE(r,d,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(b=>{if(!b)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Nt.min()),_u(e).delete([0,wi(d.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Gf(e,t)}Kn(e,t){const r=_u(e);let o,u=ki.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:b})=>{0===d?(u!==ki.at&&t(new Ye(Es(o)),u),u=b,o=w):u=ki.at}).next(()=>{u!==ki.at&&t(new Ye(Es(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gf(n,e){return _u(n).put((r=n.currentSequenceNumber,{targetId:0,path:wi(e.path),sequenceNumber:r}));var r}class pE{constructor(){this.changes=new _a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YD{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nd(e).put(r)}removeEntry(e,t,r){return Nd(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Vf(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=An.newInvalidDocument(t);return Nd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(_m(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:An.newInvalidDocument(t)};return Nd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(_m(t))},(o,u)=>{r={document:this.jn(t,u),size:D_(u)}}).next(()=>r)}getEntries(e,t){let r=Li();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=Li(),o=new hr(Ye.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,D_(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let o=new Dn(eT);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(_m(o.first()),_m(o.last())),d=o.getIterator();let m=d.getNext();return Nd(e).Z({index:"documentKeyIndex",range:u},(w,b,T)=>{const S=Ye.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&eT(m,S)<0;)r(m,null),m=d.getNext();m&&m.isEqual(S)&&(r(m,b),m=d.hasNext()?d.getNext():null),m?T.j(_m(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Vf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nd(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Li();for(const w of d){const b=this.jn(Ye.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(b.key,b)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Li();const d=XD(t,r),m=XD(t,Pi.max());return Nd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,b,T)=>{const S=this.jn(Ye.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(S.key,S),u.size===o&&T.done()}).next(()=>u)}newChangeBuffer(e){return new gE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return JD(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Qn(e,t){return JD(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function $D(n,e){let t;if(e.document)t=ZI(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),o=mu(e.noDocument.readTime);t=An.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=Ye.fromSegments(e.unknownDocument.path),o=mu(e.unknownDocument.version);t=An.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new $n(r[0],r[1]);return Nt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return An.newInvalidDocument(e)}}function QD(n){return new YD(n)}class gE extends pE{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new _a(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Dn((u,d)=>Dt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=__(this.Yn.It,d);o=o.add(u.path.popLast()),r+=D_(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=__(this.Yn.It,d.convertToNoDocument(Nt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function JD(n){return zr(n,"remoteDocumentGlobal")}function Nd(n){return zr(n,"remoteDocumentsV14")}function _m(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XD(n,e){const t=e.documentKey.path.toArray();return[n,Vf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function eT(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Dt(t[u],r[u]),o)return o;return o=Dt(t.length,r.length),o||(o=Dt(t[t.length-2],r[r.length-2]),o||Dt(t[t.length-1],r[r.length-1]))}class JA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class tT{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&xf(r.mutation,o,Qi.empty(),$n.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const o=$s();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Fc();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=$s();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=Li();const d=Td(),m=Td();return t.forEach((w,b)=>{const T=r.get(b.key);o.has(b.key)&&(void 0===T||T.mutation instanceof va)?u=u.insert(b.key,b):void 0!==T&&(d.set(b.key,T.mutation.getFieldMask()),xf(T.mutation,b,T.mutation.getFieldMask(),$n.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,T)=>d.set(b,T)),t.forEach((b,T)=>{var S;return m.set(b,new JA(T,null!==(S=d.get(b))&&void 0!==S?S:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Td();let o=new hr((d,m)=>d-m),u=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let T=r.get(w)||Qi.empty();T=m.applyToLocalView(b,T),r.set(w,T);const S=(o.get(m.batchId)||Ht()).add(w);o=o.insert(m.batchId,S)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,T=w.value,S=Lc();T.forEach(F=>{if(!u.has(F)){const Y=LI(t.get(F),r.get(F));null!==Y&&S.set(F,Y),u=u.add(F)}}),d.push(this.documentOverlayCache.saveOverlays(e,b,S))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Id(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve($s());let m=-1,w=u;return d.next(b=>se.forEach(b,(T,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(T)?se.resolve():this.getBaseDocument(e,T,S).next(F=>{w=w.insert(T,F)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Ht())).next(T=>({batchId:m,changes:jI(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let o=Fc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Fc();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,m=>{const w=(b=t,T=m.child(o),new ga(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((T,S)=>{u=u.insert(T,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const b=w.getKey();null===o.get(b)&&(o=o.insert(b,An.newInvalidDocument(b)))});let d=Fc();return o.forEach((m,w)=>{const b=u.get(m);void 0!==b&&xf(b.mutation,w,Qi.empty(),$n.now()),Zv(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(An.newInvalidDocument(t))}}class XA{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Gr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:I_(r.bundledQuery),readTime:Gr(r.readTime)}),se.resolve();var r}}class wm{constructor(){this.overlays=new hr(Ye.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$s();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=$s(),u=t.length+1,d=new Ye(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new hr((b,T)=>b-T);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let T=u.get(b.largestBatchId);null===T&&(T=$s(),u=u.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const m=$s(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,T)=>m.set(b,T)),!(m.size()>=o)););return se.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new pm(t,r));let u=this.es.get(t);void 0===u&&(u=Ht(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class mE{constructor(){this.ns=new Dn(Pr.ss),this.rs=new Dn(Pr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Pr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Pr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ye(new fn([])),r=new Pr(t,e),o=new Pr(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ye(new fn([])),r=new Pr(t,e),o=new Pr(t,e+1);let u=Ht();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Pr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ye.comparator(e.key,t.key)||Dt(e._s,t._s)}static os(e,t){return Dt(e._s,t._s)||Ye.comparator(e.key,t.key)}}class Im{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Dn(Pr.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new m_(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new Pr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pr(t,0),o=new Pr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Dt);return t.forEach(o=>{const u=new Pr(o,0),d=new Pr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ye.isDocumentKey(u)||(u=u.child(""));const d=new Pr(new Ye(u),0);let m=new Dn(Dt);return this.gs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w._s)),!0)},d),se.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Ft(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,o=>{const u=new Pr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Pr(t,0),o=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yE{constructor(e){this.Es=e,this.docs=new hr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=Li();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():An.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=Li();const u=new Ye(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||qg(Fv(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){dt()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new vE(this)}getSize(e){return se.resolve(this.size)}}class vE extends pE{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class eS{constructor(e){this.persistence=e,this.Rs=new _a(t=>Nc(t),bf),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new mE,this.targetCount=0,this.vs=Hc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Hc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class Em{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ki(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new eS(this),this.indexManager=new mm,this.remoteDocumentCache=new yE(r=>this.referenceDelegate.xs(r)),this.It=new v_(t),this.Ns=new XA(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Im(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const o=new _E(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Ms(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class _E extends Lv{constructor(e){super(),this.currentSequenceNumber=e}}class bm{constructor(e){this.persistence=e,this.Fs=new mE,this.$s=null}static Bs(e){return new bm(e)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const o=Ye.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,Nt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class wE{constructor(e){this.It=e}$(e,t,r,o){const u=new _f("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hs,{unique:!0}),m.createObjectStore("documentMutations"),nT(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),nT(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hs,{unique:!0});const T=w.store("mutations"),S=b.map(F=>T.put(F));return se.waitFor(S)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:BD});w.createIndex("collectionPathOverlayIndex",jD,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",QA,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:kD});w.createIndex("documentKeyIndex",FD),w.createIndex("collectionGroupIndex",LD)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:XI}).createIndex("sequenceNumberIndex",eE,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:d_}).createIndex("documentKeyIndex",tE,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=D_(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>se.forEach(m,w=>{Ft(w.userId===u.userId);const b=yu(this.It,w);return aE(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new fn(d),b=[0,wi(w)];u.push(t.get(b).next(T=>T?se.resolve():t.put({targetId:0,path:wi(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:UD});const r=t.store("collectionParents"),o=new $f,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:wi(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new fn(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],b)=>{const T=Es(m);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Uf(o),d=w_(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(b=d,b.document?new Ye(fn.fromString(b.document.name).popFirst(5)):b.noDocument?Ye.fromSegments(b.noDocument.path):b.unknownDocument?Ye.fromSegments(b.unknownDocument.path):dt()).path.toArray();var b;const T={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(T))}).next(()=>se.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=QD(this.It),u=new Em(bm.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var b;let T=null!==(b=m.get(w.userId))&&void 0!==b?b:Ht();yu(this.It,w).keys().forEach(S=>T=T.add(S)),m.set(w.userId,T)}),se.forEach(m,(w,b)=>{const T=new Or(b),S=Bf.oe(this.It,T),F=u.getIndexManager(T),Y=vm.oe(T,this.It,F,u.referenceDelegate);return new tT(o,Y,S,F).recalculateAndSaveOverlaysForDocumentKeys(new g_(t,ki.at),w).next()})})}}function nT(n){n.createObjectStore("targetDocuments",{keyPath:dm}).createIndex("documentTargetsIndex",VD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lm,{unique:!0}),n.createObjectStore("targetGlobal")}const IE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class S_{constructor(e,t,r,o,u,d,m,w,b,T,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=b,this.Ys=T,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=F=>Promise.resolve(),!S_.C())throw new Pe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fE(this,o),this.ii=t+"main",this.It=new v_(w),this.ri=new Is(this.ii,this.Xs,new wE(this.It)),this.Cs=new cE(this.referenceDelegate,this.It),this.remoteDocumentCache=QD(this.It),this.Ns=new HD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,IE);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ki(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(fu(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return zf(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return zc(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=zr(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return se.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):zf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Pe(fe.FAILED_PRECONDITION,IE);return!1}}return!(!this.networkEnabled||!this.inForeground)||zc(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new g_(t,ki.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>zc(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return vm.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sE(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Bf.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?p_:14===d?fm:13===d?f_:12===d?h_:11===d?hm:void dt();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new g_(w,this.Ss?this.Ss.next():ki.at),"readwrite-primary"===t?this.fi(m).next(b=>!!b||this.di(m)).next(b=>{if(!b)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Pe(fe.FAILED_PRECONDITION,vf);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return zf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(fe.FAILED_PRECONDITION,IE)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zf(e).put("owner",t)}static C(){return Is.C()}_i(e){const t=zf(e);return t.get("owner").next(r=>this.mi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zf(n){return zr(n,"owner")}function zc(n){return zr(n,"clientMetadata")}function M_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class EE{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Ht(),o=Ht();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new EE(e,t.fromCache,r,o)}}class rT{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Mi(e,t,o,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(mD(t))return se.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Af(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Ht(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Fi(t,m);return this.$i(t,b,d,w.readTime)?this.ki(e,Af(t,null,"F")):this.Bi(e,b,t,w)}))})))}Mi(e,t,r,o){return mD(t)||o.isEqual(Nt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Oi(e,t):(Nv()<=wo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qv(t)),this.Bi(e,d,t,uI(o,-1)))})}Fi(e,t){let r=new Dn(MI(e));return t.forEach((o,u)=>{Zv(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Oi(e,t){return Nv()<=wo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",qv(t)),this.Ni.getDocumentsMatchingQuery(e,t,Pi.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class tS{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new hr(Dt),this.qi=new _a(u=>Nc(u),bf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tT(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function bE(n,e,t,r){return new tS(n,e,t,r)}function CE(n,e){return x_.apply(this,arguments)}function x_(){return x_=(0,_e.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Ht();for(const b of o){d.push(b.batchId);for(const T of b.mutations)w=w.add(T.key)}for(const b of u){m.push(b.batchId);for(const T of b.mutations)w=w.add(T.key)}return t.localDocuments.getDocuments(r,w).next(b=>({ji:b,removedBatchIds:d,addedBatchIds:m}))})})}),x_.apply(this,arguments)}function nS(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,b){const T=w.batch,S=T.keys();let F=se.resolve();return S.forEach(Y=>{F=F.next(()=>b.getEntry(m,Y)).next(te=>{const Se=w.docVersions.get(Y);Ft(null!==Se),te.version.compareTo(Se)<0&&(T.applyToRemoteDocument(te,w),te.isValidDocument()&&(te.setReadTime(w.commitVersion),b.addEntry(te)))})}),F.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ht();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function DE(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function TE(n,e){const t=et(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((T,S)=>{const F=o.get(S);if(!F)return;m.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,S)));let Y=F.withSequenceNumber(u.currentSequenceNumber);var te,Se,Re;e.targetMismatches.has(S)?Y=Y.withResumeToken(Dr.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):T.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(T.resumeToken,r)),o=o.insert(S,Y),Se=Y,Re=T,(0===(te=F).resumeToken.approximateByteSize()||Se.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Re.addedDocuments.size+Re.modifiedDocuments.size+Re.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Y))});let w=Li(),b=Ht();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(R_(u,d,e.documentUpdates).next(T=>{w=T.Wi,b=T.zi})),!r.isEqual(Nt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(S=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return se.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ui=o,u))}function R_(n,e,t){let r=Ht(),o=Ht();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Li();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(Nt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):$e("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function rS(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function li(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new So(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Od(n,e,t){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,_e.Z)(function*(n,e,t){const r=et(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!fu(d))throw d;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),Wf.apply(this,arguments)}function Cm(n,e,t){const r=et(n);let o=Nt.min(),u=Ht();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,b){const T=et(m),S=T.qi.get(b);return void 0!==S?se.resolve(T.Ui.get(S)):T.Cs.getTargetData(w,b)}(r,d,Fi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:Nt.min(),t?u:Ht())).next(m=>(Dm(r,SI(e),m),{documents:m,Hi:u})))}function es(n,e){const t=et(n),r=et(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function AE(n,e){const t=et(n),r=t.Ki.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,uI(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Dm(t,e,o),o))}function Dm(n,e,t){let r=Nt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function N_(){return N_=(0,_e.Z)(function*(n,e,t,r){const o=et(n);let u=Ht(),d=Li();for(const b of t){const T=e.Ji(b.metadata.name);b.document&&(u=u.add(T));const S=e.Yi(b);S.setReadTime(e.Xi(b.metadata.readTime)),d=d.insert(T,S)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield li(o,(b=r,Fi(Tf(fn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>R_(b,m,d).next(T=>(m.apply(b),T)).next(T=>o.Cs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Cs.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,T.Wi,T.zi)).next(()=>T.Wi)))}),N_.apply(this,arguments)}function O_(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,_e.Z)(function*(n,e,t=Ht()){const r=yield li(n,Fi(I_(e.bundledQuery))),o=et(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Gr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Dr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),Tm.apply(this,arguments)}function P_(n,e){return`firestore_clients_${n}_${e}`}function SE(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Am(n,e){return`firestore_targets_${n}_${e}`}class qf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Pe(o.error.code,o.error.message))),d?new qf(e,t,o.state,u):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new Zf(e,r.state,o):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=sm();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=yI(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Kf(e,u):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class k_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new k_(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yf{constructor(){this.activeTargetIds=sm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mo{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new hr(Dt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=P_(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Yf),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(P_(e.persistenceKey,o));if(u){const d=Kf.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Am(this.persistenceKey,e));if(r){const o=Zf.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Am(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=ki.at;if(null!=u)try{const m=JSON.parse(u);Ft("number"==typeof m),d=m}catch(m){vr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==ki.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Mr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new qf(this.currentUser,e,t,r),u=SE(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=SE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=Am(this.persistenceKey,e),u=new Zf(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Kf.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return qf.Zi(new Or(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Zf.Zi(o,t)}yr(e){return k_.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=sm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class F_{constructor(){this.Lr=new Yf,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Yf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class L_{qr(e){}shutdown(){}}class xo{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class iS{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class oT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ao(e,t);$e("RestConnection","Sending: ",d,r);const m={};return this.ho(m,o,u),this.lo(e,d,m,r).then(w=>($e("RestConnection","Received: ",w),w),w=>{throw jn("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}fo(e,t,r,o,u,d){return this.co(e,t,r,o,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ao(e,t){return`${this.oo}/v1/${t}:${sT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){return new Promise((u,d)=>{const m=new tI;m.listenOnce(Mv.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case zg.NO_ERROR:const b=m.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),u(b);break;case zg.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),d(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case zg.HTTP_ERROR:const T=m.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',T,"response text:",m.getResponseText()),T>0){const S=m.getResponseJson().error;if(S&&S.status&&S.message){const F=function(Y){const te=Y.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(te)>=0?te:fe.UNKNOWN}(S.status);d(new Pe(F,S.message))}else d(new Pe(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}_o(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=YC(),d=QC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new eI({})),this.ho(m.initMessageHeaders,t,r),(0,nn.uI)()||(0,nn.b$)()||(0,nn.d)()||(0,nn.w1)()||(0,nn.Mn)()||(0,nn.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");$e("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let T=!1,S=!1;const F=new iS({Hr:te=>{S?$e("Connection","Not sending because WebChannel is closed:",te):(T||($e("Connection","Opening WebChannel transport."),b.open(),T=!0),$e("Connection","WebChannel sending:",te),b.send(te))},Jr:()=>b.close()}),Y=(te,Se,Re)=>{te.listen(Se,Tt=>{try{Re(Tt)}catch(Mt){setTimeout(()=>{throw Mt},0)}})};return Y(b,gf.EventType.OPEN,()=>{S||$e("Connection","WebChannel transport opened.")}),Y(b,gf.EventType.CLOSE,()=>{S||(S=!0,$e("Connection","WebChannel transport closed"),F.io())}),Y(b,gf.EventType.ERROR,te=>{S||(S=!0,jn("Connection","WebChannel transport errored:",te),F.io(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),Y(b,gf.EventType.MESSAGE,te=>{var Se;if(!S){const Re=te.data[0];Ft(!!Re);const Tt=Re,Mt=Tt.error||(null===(Se=Tt[0])||void 0===Se?void 0:Se.error);if(Mt){$e("Connection","WebChannel received error:",Mt);const Jt=Mt.status;let $t=function(ln){const ii=Tr[ln];if(void 0!==ii)return im(ii)}(Jt),Gt=Mt.message;void 0===$t&&($t=fe.INTERNAL,Gt="Unknown error status: "+Jt+" with message "+Mt.message),S=!0,F.io(new Pe($t,Gt)),b.close()}else $e("Connection","WebChannel received:",Re),F.ro(Re)}}),Y(d,Xw.STAT_EVENT,te=>{te.stat===xv.PROXY?$e("Connection","Detected buffering proxy"):te.stat===xv.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.so()},0),F}}function ME(){return typeof window<"u"?window:null}function Sm(){return typeof document<"u"?document:null}function Qf(n){return new DD(n,!0)}class Mm{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=o,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&$e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class aT{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.Po=r,this.vo=o,this.Vo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Mm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,_e.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,_e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,_e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xE extends aT{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function MD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:dt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.gt?(Ft(void 0===b||"string"==typeof b),Dr.fromBase64String(b||"")):(Ft(void 0===b||b instanceof Uint8Array),Dr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const b=void 0===w.code?fe.UNKNOWN:im(w.code);return new Pe(b,w.message||"")}(d);t=new n_(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ao(n,r.document.name),u=Gr(r.document.updateTime),d=new $r({mapValue:{fields:r.document.fields}}),m=An.newFoundDocument(o,u,d);t=new Nf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ao(n,r.document),u=r.readTime?Gr(r.readTime):Nt.min(),d=An.newNoDocument(o,u);t=new Nf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Ao(n,r.document);t=new Nf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return dt();{const r=e.filter,u=new ID(r.count||0);t=new om(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return Nt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Nt.min():u.readTime?Gr(u.readTime):Nt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Of(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=Qg(m)?{documents:Sd(o,m)}:{query:u_(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=TD(o,u.resumeToken):u.snapshotVersion.compareTo(Nt.min())>0&&(d.readTime=Ad(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function KI(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Of(this.It),t.removeTarget=e,this.Bo(t)}}class uT extends aT{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function xD(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,o){let u=Gr(r.updateTime?r.updateTime:o);return u.isEqual(Nt.min())&&(u=Gr(o)),new Qv(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.Zo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Of(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Pf(this.It,r))};this.Bo(t)}}class RE extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(fe.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.fo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Pe(fe.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class sS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(vr(t),this.ou=!1):$e("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class V_{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,_e.Z)(function*(){var w;Ea(d)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,_e.Z)(function*(b){const T=et(b);T._u.add(4),yield Wc(T),T.gu.set("Unknown"),T._u.delete(4),yield Pd(T)}),function(b){return w.apply(this,arguments)})(d))}))}),this.gu=new sS(r,o)}}function Pd(n){return xm.apply(this,arguments)}function xm(){return xm=(0,_e.Z)(function*(n){if(Ea(n))for(const e of n.wu)yield e(!0)}),xm.apply(this,arguments)}function Wc(n){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Rm.apply(this,arguments)}function Jf(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Nm(t)?B_(t):rp(t).ko()&&kd(t,e))}function wu(n,e){const t=et(n),r=rp(t);t.du.delete(e),r.ko()&&U_(t,e),0===t.du.size&&(r.ko()?r.Fo():Ea(t)&&t.gu.set("Unknown"))}function kd(n,e){n.yu.Ot(e.targetId),rp(n).zo(e)}function U_(n,e){n.yu.Ot(e),rp(n).Ho(e)}function B_(n){n.yu=new $I({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),rp(n).start(),n.gu.uu()}function Nm(n){return Ea(n)&&!rp(n).No()&&n.du.size>0}function Ea(n){return 0===et(n)._u.size}function NE(n){n.yu=void 0}function cT(n){return OE.apply(this,arguments)}function OE(){return OE=(0,_e.Z)(function*(n){n.du.forEach((e,t)=>{kd(n,e)})}),OE.apply(this,arguments)}function oS(n,e){return Om.apply(this,arguments)}function Om(){return Om=(0,_e.Z)(function*(n,e){NE(n),Nm(n)?(n.gu.hu(e),B_(n)):n.gu.set("Unknown")}),Om.apply(this,arguments)}function lT(n,e,t){return j_.apply(this,arguments)}function j_(){return j_=(0,_e.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof n_&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pm(n,r)}else if(e instanceof Nf?n.yu.Gt(e):e instanceof om?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Nt.min()))try{const r=yield DE(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.du.get(w);b&&o.du.set(w,b.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Dr.EMPTY_BYTE_STRING,w.snapshotVersion)),U_(o,m);const b=new So(w.target,m,1,w.sequenceNumber);kd(o,b)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield Pm(n,r)}var r}),j_.apply(this,arguments)}function Pm(n,e,t){return PE.apply(this,arguments)}function PE(){return PE=(0,_e.Z)(function*(n,e,t){if(!fu(e))throw e;n._u.add(1),yield Wc(n),n.gu.set("Offline"),t||(t=()=>DE(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Pd(n)}))}),PE.apply(this,arguments)}function dT(n,e){return e().catch(t=>Pm(n,t,e))}function Xf(n){return kE.apply(this,arguments)}function kE(){return kE=(0,_e.Z)(function*(n){const e=et(n),t=Zc(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;aS(e);)try{const o=yield rS(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,hT(e,o)}catch(o){yield Pm(e,o)}ep(e)&&FE(e)}),kE.apply(this,arguments)}function aS(n){return Ea(n)&&n.fu.length<10}function hT(n,e){n.fu.push(e);const t=Zc(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function ep(n){return Ea(n)&&!Zc(n).No()&&n.fu.length>0}function FE(n){Zc(n).start()}function fT(n){return km.apply(this,arguments)}function km(){return km=(0,_e.Z)(function*(n){Zc(n).eu()}),km.apply(this,arguments)}function qc(n){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,_e.Z)(function*(n){const e=Zc(n);for(const t of n.fu)e.Xo(t.mutations)}),Fm.apply(this,arguments)}function $_(n,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,_e.Z)(function*(n,e,t){const r=n.fu.shift(),o=y_.from(r,e,t);yield dT(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Xf(n)}),tp.apply(this,arguments)}function pT(n,e){return np.apply(this,arguments)}function np(){return np=(0,_e.Z)(function*(n,e){var t;e&&Zc(n).Yo&&(yield(t=(0,_e.Z)(function*(r,o){if(rm(u=o.code)&&u!==fe.ABORTED){const d=r.fu.shift();Zc(r).Oo(),yield dT(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Xf(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),ep(n)&&FE(n)}),np.apply(this,arguments)}function Lm(n,e){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,_e.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=Ea(t);t._u.add(3),yield Wc(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Pd(t)}),Fd.apply(this,arguments)}function LE(n,e){return VE.apply(this,arguments)}function VE(){return VE=(0,_e.Z)(function*(n,e){const t=et(n);e?(t._u.delete(2),yield Pd(t)):e||(t._u.add(2),yield Wc(t),t.gu.set("Unknown"))}),VE.apply(this,arguments)}function rp(n){return n.pu||(n.pu=function(e,t,r){const o=et(e);return o.su(),new xE(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:cT.bind(null,n),Zr:oS.bind(null,n),Wo:lT.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Oo(),Nm(n)?B_(n):n.gu.set("Unknown")):(yield n.pu.stop(),NE(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Zc(n){return n.Iu||(n.Iu=function(e,t,r){const o=et(e);return o.su(),new uT(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:fT.bind(null,n),Zr:pT.bind(null,n),tu:qc.bind(null,n),Zo:$_.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Oo(),yield Xf(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Vm{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new Vm(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ld(n,e){if(vr("AsyncQueue",`${e}: ${n}`),fu(n))return new Pe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Vd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=Fc(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new Vd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Vd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UE{constructor(){this.Tu=new hr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ud{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Ud(e,t,Vd.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ma(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class BE{constructor(){this.Au=void 0,this.listeners=[]}}class jE{constructor(){this.queries=new _a(e=>AI(e),ma),this.onlineState="Unknown",this.Ru=new Set}}function Um(n,e){return H_.apply(this,arguments)}function H_(){return H_=(0,_e.Z)(function*(n,e){const t=et(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new BE),o)try{u.Au=yield t.onListen(r)}catch(d){const m=Ld(d,`Initialization of query '${qv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&jm(t)}),H_.apply(this,arguments)}function G_(n,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,_e.Z)(function*(n,e){const t=et(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Bm.apply(this,arguments)}function z_(n,e){const t=et(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&jm(t)}function uS(n,e,t){const r=et(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function jm(n){n.Ru.forEach(e=>{e.next()})}class ip{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class gT{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class $E{constructor(e){this.It=e}Ji(e){return Ao(this.It,e)}Yi(e){return e.metadata.exists?ZI(this.It,e.document,!1):An.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Gr(e)}}class cS{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mT(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new $E(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Ht()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function iT(n,e,t,r){return N_.apply(this,arguments)}(e.localStore,new $E(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const o of e.queries)yield O_(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function mT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class HE{constructor(e){this.key=e}}class GE{constructor(e){this.key=e}}class zE{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ht(),this.mutatedKeys=Ht(),this.Ku=MI(e),this.Gu=new Vd(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new UE,o=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,S)=>{const F=o.get(T),Y=Zv(this.query,S)?S:null,te=!!F&&this.mutatedKeys.has(F.key),Se=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Re=!1;F&&Y?F.data.isEqual(Y.data)?te!==Se&&(r.track({type:3,doc:Y}),Re=!0):this.zu(F,Y)||(r.track({type:2,doc:Y}),Re=!0,(w&&this.Ku(Y,w)>0||b&&this.Ku(Y,b)<0)&&(m=!0)):!F&&Y?(r.track({type:0,doc:Y}),Re=!0):F&&!Y&&(r.track({type:1,doc:F}),Re=!0,(w||b)&&(m=!0)),Re&&(Y?(d=d.add(Y),u=Se?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const T="F"===this.query.limitType?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Gu:d,Wu:r,$i:m,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((b,T)=>function(S,F){const Y=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return Y(S)-Y(F)}(b.type,T.type)||this.Ku(b.doc,T.doc)),this.Hu(r);const d=t?this.Ju():[],m=0===this.qu.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new Ud(this.query,e.Gu,o,u,e.mutatedKeys,0===m,w,!1),Yu:d}:{Yu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new UE,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ht(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new GE(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new HE(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ht();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Ud.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class lS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dS{constructor(e){this.key=e,this.ec=!1}}class hS{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nc={},this.sc=new _a(m=>AI(m),ma),this.ic=new Map,this.rc=new Set,this.oc=new hr(Ye.comparator),this.uc=new Map,this.cc=new mE,this.ac={},this.hc=new Map,this.lc=Hc.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function fS(n,e){return WE.apply(this,arguments)}function WE(){return WE=(0,_e.Z)(function*(n,e){const t=wT(n);let r,o;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.tc();else{const d=yield li(t.localStore,Fi(e));t.isPrimaryClient&&Jf(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield W_(t,e,r,"current"===m)}return o}),WE.apply(this,arguments)}function W_(n,e,t,r){return qE.apply(this,arguments)}function qE(){return qE=(0,_e.Z)(function*(n,e,t,r){n.dc=(T,S,F)=>{return(Y=(0,_e.Z)(function*(te,Se,Re,Tt){let Mt=Se.view.ju(Re);Mt.$i&&(Mt=yield Cm(te.localStore,Se.query,!1).then(({documents:Gt})=>Se.view.ju(Gt,Mt)));const Jt=Tt&&Tt.targetChanges.get(Se.targetId),$t=Se.view.applyChanges(Mt,te.isPrimaryClient,Jt);return Te(te,Se.targetId,$t.Yu),$t.snapshot}),function(te,Se,Re,Tt){return Y.apply(this,arguments)})(n,T,S,F);var Y};const o=yield Cm(n.localStore,e,!0),u=new zE(e,o.Hi),d=u.ju(o.documents),m=Rf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);Te(n,t,w.Yu);const b=new lS(e,t,u);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),w.snapshot}),qE.apply(this,arguments)}function pS(n,e){return ZE.apply(this,arguments)}function ZE(){return ZE=(0,_e.Z)(function*(n,e){const t=et(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(u=>!ma(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Od(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),wu(t.remoteStore,r.targetId),$(t,r.targetId)}).catch(ua))):($(t,r.targetId),yield Od(t.localStore,r.targetId,!0))}),ZE.apply(this,arguments)}function KE(){return KE=(0,_e.Z)(function*(n,e,t){const r=IT(n);try{const o=yield function(u,d){const m=et(u),w=$n.now(),b=d.reduce((F,Y)=>F.add(Y.key),Ht());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",F=>{let Y=Li(),te=Ht();return m.Gi.getEntries(F,b).next(Se=>{Y=Se,Y.forEach((Re,Tt)=>{Tt.isValidDocument()||(te=te.add(Re))})}).next(()=>m.localDocuments.getOverlayedDocuments(F,Y)).next(Se=>{T=Se;const Re=[];for(const Tt of d){const Mt=wD(Tt,T.get(Tt.key).overlayedDocument);null!=Mt&&Re.push(new va(Tt.key,Mt,Gv(Mt.value.mapValue),Zn.exists(!0)))}return m.mutationQueue.addMutationBatch(F,w,Re,d)}).next(Se=>{S=Se;const Re=Se.applyToLocalDocumentSet(T,te);return m.documentOverlayCache.saveOverlays(F,Se.batchId,Re)})}).then(()=>({batchId:S.batchId,changes:jI(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ac[u.currentUser.toKey()];w||(w=new hr(Dt)),w=w.insert(d,m),u.ac[u.currentUser.toKey()]=w}(r,o.batchId,t),yield tt(r,o.changes),yield Xf(r.remoteStore)}catch(o){const u=Ld(o,"Failed to persist write");t.reject(u)}}),KE.apply(this,arguments)}function yT(n,e){return i.apply(this,arguments)}function i(){return i=(0,_e.Z)(function*(n,e){const t=et(n);try{const r=yield TE(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.uc.get(u);d&&(Ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ec=!0:o.modifiedDocuments.size>0?Ft(d.ec):o.removedDocuments.size>0&&(Ft(d.ec),d.ec=!1))}),yield tt(t,r,e)}catch(r){yield ua(r)}}),i.apply(this,arguments)}function s(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=et(u);m.onlineState=d;let w=!1;m.queries.forEach((b,T)=>{for(const S of T.listeners)S.bu(d)&&(w=!0)}),w&&jm(m)}(r.eventManager,e),o.length&&r.nc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a(n,e,t){return c.apply(this,arguments)}function c(){return c=(0,_e.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),u=o&&o.key;if(u){let d=new hr(Ye.comparator);d=d.insert(u,An.newNoDocument(u,Nt.min()));const m=Ht().add(u),w=new Vc(Nt.min(),new Map,new Dn(Dt),d,m);yield yT(r,w),r.oc=r.oc.remove(u),r.uc.delete(e),Qe(r)}else yield Od(r.localStore,e,!1).then(()=>$(r,e,t)).catch(ua)}),c.apply(this,arguments)}function l(n,e){return p.apply(this,arguments)}function p(){return p=(0,_e.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const o=yield nS(t.localStore,e);O(t,r,null),A(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tt(t,o)}catch(o){yield ua(o)}}),p.apply(this,arguments)}function v(n,e,t){return I.apply(this,arguments)}function I(){return I=(0,_e.Z)(function*(n,e,t){const r=et(n);try{const o=yield function(u,d){const m=et(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,d).next(T=>(Ft(null!==T),b=T.keys(),m.mutationQueue.removeMutationBatch(w,T))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);O(r,e,t),A(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tt(r,o)}catch(o){yield ua(o)}}),I.apply(this,arguments)}function C(){return C=(0,_e.Z)(function*(n,e){const t=et(n);Ea(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=et(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=Ld(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),C.apply(this,arguments)}function A(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function O(n,e,t){const r=et(n);let o=r.ac[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function $(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||X(n,r)})}function X(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(wu(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),Qe(n))}function Te(n,e,t){for(const r of t)r instanceof HE?(n.cc.addReference(r.key,e),He(n,r)):r instanceof GE?($e("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||X(n,r.key)):dt()}function He(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.rc.add(r),Qe(n))}function Qe(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ye(fn.fromString(e)),r=n.lc.next();n.uc.set(r,new dS(t)),n.oc=n.oc.insert(t,r),Jf(n.remoteStore,new So(Fi(Tf(t.path)),r,2,ki.at))}}function tt(n,e,t){return St.apply(this,arguments)}function St(){return St=(0,_e.Z)(function*(n,e,t){const r=et(n),o=[],u=[],d=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,w)=>{d.push(r.dc(w,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b.fromCache?"not-current":"current"),o.push(b);const T=EE.Ci(w.targetId,b);u.push(T)}}))}),yield Promise.all(d),r.nc.Wo(o),yield(m=(0,_e.Z)(function*(w,b){const T=et(w);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>se.forEach(b,F=>se.forEach(F.Si,Y=>T.persistence.referenceDelegate.addReference(S,F.targetId,Y)).next(()=>se.forEach(F.Di,Y=>T.persistence.referenceDelegate.removeReference(S,F.targetId,Y)))))}catch(S){if(!fu(S))throw S;$e("LocalStore","Failed to update sequence numbers: "+S)}for(const S of b){const F=S.targetId;if(!S.fromCache){const Y=T.Ui.get(F),Se=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);T.Ui=T.Ui.insert(F,Se)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),St.apply(this,arguments)}function ke(n,e){return Et.apply(this,arguments)}function Et(){return Et=(0,_e.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield CE(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(d=>{d.forEach(m=>{m.reject(new Pe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tt(t,r.ji)}var o}),Et.apply(this,arguments)}function cn(n,e){const t=et(n),r=t.uc.get(e);if(r&&r.ec)return Ht().add(r.key);{let o=Ht();const u=t.ic.get(e);if(!u)return o;for(const d of u){const m=t.sc.get(d);o=o.unionWith(m.view.Qu)}return o}}function Hn(n,e){return ba.apply(this,arguments)}function ba(){return ba=(0,_e.Z)(function*(n,e){const t=et(n),r=yield Cm(t.localStore,e.query,!0),o=e.view.Zu(r);return t.isPrimaryClient&&Te(t,e.targetId,o.Yu),o}),ba.apply(this,arguments)}function q_(n,e){return sp.apply(this,arguments)}function sp(){return sp=(0,_e.Z)(function*(n,e){const t=et(n);return AE(t.localStore,e).then(r=>tt(t,r))}),sp.apply(this,arguments)}function Z_(n,e,t,r){return op.apply(this,arguments)}function op(){return op=(0,_e.Z)(function*(n,e,t,r){const o=et(n),u=yield function(d,m){const w=et(d),b=et(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.Tn(T,m).next(S=>S?w.localDocuments.getDocuments(T,S):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Xf(o.remoteStore):"acknowledged"===t||"rejected"===t?(O(o,e,r||null),A(o,e),m=e,et(et(o.localStore).mutationQueue).An(m)):dt(),yield tt(o,u)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),op.apply(this,arguments)}function ap(){return ap=(0,_e.Z)(function*(n,e){const t=et(n);if(wT(t),IT(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield $m(t,r.toArray());t.fc=!0,yield LE(t.remoteStore,!0);for(const u of o)Jf(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>($(t,d),Od(t.localStore,d,!0))),wu(t.remoteStore,d)}),yield o,yield $m(t,r),function(u){const d=et(u);d.uc.forEach((m,w)=>{wu(d.remoteStore,w)}),d.cc.fs(),d.uc=new Map,d.oc=new hr(Ye.comparator)}(t),t.fc=!1,yield LE(t.remoteStore,!1)}}),ap.apply(this,arguments)}function $m(n,e,t){return up.apply(this,arguments)}function up(){return up=(0,_e.Z)(function*(n,e,t){const r=et(n),o=[],u=[];for(const d of e){let m;const w=r.ic.get(d);if(w&&0!==w.length){m=yield li(r.localStore,Fi(w[0]));for(const b of w){const T=r.sc.get(b),S=yield Hn(r,T);S.snapshot&&u.push(S.snapshot)}}else{const b=yield es(r.localStore,d);m=yield li(r.localStore,b),yield W_(r,Hm(b),d,!1)}o.push(m)}return r.nc.Wo(u),o}),up.apply(this,arguments)}function Hm(n){return gD(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pR(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function gR(n,e,t,r){return vT.apply(this,arguments)}function vT(){return vT=(0,_e.Z)(function*(n,e,t,r){const o=et(n);if(o.fc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const u=o.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield AE(o.localStore,SI(u[0])),m=Vc.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield tt(o,d,m);break}case"rejected":yield Od(o.localStore,e,!0),$(o,e,r);break;default:dt()}}),vT.apply(this,arguments)}function mR(n,e,t){return _T.apply(this,arguments)}function _T(){return _T=(0,_e.Z)(function*(n,e,t){const r=wT(n);if(r.fc){for(const o of e){if(r.ic.has(o)){$e("SyncEngine","Adding an already active target "+o);continue}const u=yield es(r.localStore,o),d=yield li(r.localStore,u);yield W_(r,Hm(u),d.targetId,!1),Jf(r.remoteStore,d)}for(const o of t)r.ic.has(o)&&(yield Od(r.localStore,o,!1).then(()=>{wu(r.remoteStore,o),$(r,o)}).catch(ua))}}),_T.apply(this,arguments)}function wT(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cn.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a.bind(null,e),e.nc.Wo=z_.bind(null,e.eventManager),e.nc._c=uS.bind(null,e.eventManager),e}function IT(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v.bind(null,e),e}class mS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.It=Qf(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return bE(this.persistence,new rT,e.initialUser,this.It)}gc(e){return new Em(bm.Bs,this.It)}mc(e){return new F_}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class yS extends mS{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield IT(r.Ec.syncEngine),yield Xf(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return bE(this.persistence,new rT,e.initialUser,this.It)}Ic(e,t){return new dE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new oD(t,this.persistence);return new sD(e.asyncQueue,r)}gc(e){const t=M_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new S_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ME(),Sm(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new F_}}class vR extends yS{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.Ec.syncEngine;r.sharedClientState instanceof Mo&&(r.sharedClientState.syncEngine={Fr:Z_.bind(null,o),$r:gR.bind(null,o),Br:mR.bind(null,o),vi:pR.bind(null,o),Or:q_.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,_e.Z)(function*(d){yield function K_(n,e){return ap.apply(this,arguments)}(r.Ec.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}mc(e){const t=ME();if(!Mo.C(t))throw new Pe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=M_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mo(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ET{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>s(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=ke.bind(null,r.syncEngine),yield LE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jE}createDatastore(e){const t=Qf(e.databaseInfo.databaseId),r=new oT(e.databaseInfo);return new RE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>s(this.syncEngine,m,0),d=xo.C()?new xo:new L_,new V_(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,b){const T=new hS(r,o,u,d,m,w);return b&&(T.fc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=et(t);$e("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Wc(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vS(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class YE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class _R{constructor(e,t){this.bc=e,this.It=t,this.metadata=new tr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),o=Number(r);isNaN(o)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(o);return new gT(JSON.parse(u),t.length+o)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,_e.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class wR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(u,d){const m=et(u),w=Of(m.It)+"/documents",b={documents:d.map(Y=>am(m.It,Y))},T=yield m.fo("BatchGetDocuments",w,b,d.length),S=new Map;T.forEach(Y=>{const te=function SD(n,e){return"found"in e?function(t,r){Ft(!!r.found);const o=Ao(t,r.found.name),u=Gr(r.found.updateTime),d=new $r({mapValue:{fields:r.found.fields}});return An.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const o=Ao(t,r.missing),u=Gr(r.readTime);return An.newNoDocument(o,u)}(n,e):dt()}(m.It,Y);S.set(te.key.toString(),te)});const F=[];return d.forEach(Y=>{const te=S.get(Y.toString());Ft(!!te),F.push(te)}),F}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ye.fromPath(o);e.mutations.push(new nm(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(o,u){const d=et(o),m=Of(d.It)+"/documents",w={writes:u.map(b=>Pf(d.It,b))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nt.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Pe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IR{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new Mm(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,_e.Z)(function*(){const t=new wR(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Oc(u)}))}).catch(o=>{e.Oc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!js(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!rm(t)}return!1}}class ER{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Or.UNAUTHENTICATED,this.clientId=oI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,_e.Z)(function*(m){$e("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>($e("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ld(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function _S(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(u){r.isEqual(u)||(yield CE(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),bT.apply(this,arguments)}function wS(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield DT(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Lm(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>Lm(e.remoteStore,u)),n.onlineComponents=e}),CT.apply(this,arguments)}function DT(n){return TT.apply(this,arguments)}function TT(){return TT=(0,_e.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield _S(n,new mS)),n.offlineComponents}),TT.apply(this,arguments)}function QE(n){return AT.apply(this,arguments)}function AT(){return AT=(0,_e.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield wS(n,new ET)),n.onlineComponents}),AT.apply(this,arguments)}function IS(n){return DT(n).then(e=>e.persistence)}function JE(n){return DT(n).then(e=>e.localStore)}function ES(n){return QE(n).then(e=>e.remoteStore)}function ST(n){return QE(n).then(e=>e.syncEngine)}function Gm(n){return MT.apply(this,arguments)}function MT(){return MT=(0,_e.Z)(function*(n){const e=yield QE(n),t=e.eventManager;return t.onListen=fS.bind(null,e.syncEngine),t.onUnlisten=pS.bind(null,e.syncEngine),t}),MT.apply(this,arguments)}function bS(n,e,t={}){const r=new tr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,d,m,w){const b=new YE({next:S=>{u.enqueueAndForget(()=>G_(o,T));const F=S.docs.has(d);!F&&S.fromCache?w.reject(new Pe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&S.fromCache&&m&&"server"===m.source?w.reject(new Pe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(S)},error:S=>w.reject(S)}),T=new ip(Tf(d.path),b,{includeMetadataChanges:!0,Nu:!0});return Um(o,T)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}function CS(n,e,t={}){const r=new tr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,d,m,w){const b=new YE({next:S=>{u.enqueueAndForget(()=>G_(o,T)),S.fromCache&&"server"===m.source?w.reject(new Pe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(S)},error:S=>w.reject(S)}),T=new ip(d,b,{includeMetadataChanges:!0,Nu:!0});return Um(o,T)}(yield Gm(n),n.asyncQueue,e,t,r)})),r.promise}const DS=new Map;function xT(n,e,t){if(!t)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function TS(n,e,t,r){if(!0===e&&!0===r)throw new Pe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AS(n){if(!Ye.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SS(n){if(Ye.isDocumentKey(n))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=XE(n);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function MS(n,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,TS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new XC;switch(t.type){case"gapi":return new KA(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=DS.get(e);t&&($e("ComponentProvider","Removing Datastore"),DS.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class Vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class Iu extends Vi{constructor(e,t,r){super(e,t,Tf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new Ye(e))}withConverter(e){return new Iu(this.firestore,e,this._path)}}function RS(n,e,...t){if(n=(0,nn.m9)(n),xT("collection","path",e),n instanceof Y_){const r=fn.fromString(e,...t);return SS(r),new Iu(n,null,r)}{if(!(n instanceof rr||n instanceof Iu))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return SS(r),new Iu(n.firestore,null,r)}}function eb(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=oI.R()),xT("doc","path",e),n instanceof Y_){const r=fn.fromString(e,...t);return AS(r),new rr(n,null,new Ye(r))}{if(!(n instanceof rr||n instanceof Iu))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return AS(r),new rr(n.firestore,n instanceof Iu?n.converter:null,new Ye(r))}}function NS(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof rr||n instanceof Iu)&&(e instanceof rr||e instanceof Iu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function OS(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof Vi&&e instanceof Vi&&n.firestore===e.firestore&&ma(n._query,e._query)&&n.converter===e.converter}class OR{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new Mm(this,"async_queue_retry"),this.jc=()=>{const t=Sm();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Sm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Sm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new tr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!fu(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,vr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const o=Vm.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(o),o}Wc(){this.qc&&dt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function RT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class PR{constructor(){this._progressObserver={},this._taskCompletionResolver=new tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends Y_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new OR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||PS(this),this._firestoreClient.terminate()}}function Wr(n){return n._firestoreClient||PS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function PS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new mI(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new ER(n._authCredentials,n._appCheckCredentials,n._queue,r)}function kS(n,e,t){const r=new tr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield _S(n,t),yield wS(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===fe.FAILED_PRECONDITION||d.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;jn("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function FS(n){if(n._initialized||n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eu(Dr.fromBase64String(e))}catch(t){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Eu(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cp{constructor(e){this._methodName=e}}class tb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}const GR=/^__.*__$/;class zR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cd(e,this.data,t,this.fieldTransforms)}}class LS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class nb{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new nb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.oa(e),o}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.ea(),o}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return sb(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(VS(this.na)&&GR.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class WR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Qf(e)}fa(e,t,r,o=!1){return new nb({na:e,methodName:t,la:r,path:dr.emptyPath(),ra:!1,ha:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=Qf(n._databaseId);return new WR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rb(n,e,t,r,o,u={}){const d=n.fa(u.merge||u.mergeFields?2:0,e,t,o);kT("Data must be an object, but it was:",d,r);const m=jS(r,d);let w,b;if(u.merge)w=new Qi(d.fieldMask),b=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const S of u.mergeFields){const F=FT(e,S,t);if(!d.contains(F))throw new Pe(fe.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);HS(T,F)||T.push(F)}w=new Qi(T),b=d.fieldTransforms.filter(S=>w.covers(S.field))}else w=null,b=d.fieldTransforms;return new zR(new $r(m),w,b)}class Q_ extends cp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q_}}function US(n,e,t){return new nb({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class NT extends cp{_toFieldTransform(e){return new Sf(e.path,new bd)}isEqual(e){return e instanceof NT}}class qR extends cp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=US(this,e,!0),r=this.da.map(u=>dp(u,t)),o=new gu(r);return new Sf(e.path,o)}isEqual(e){return this===e}}class ZR extends cp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=US(this,e,!0),r=this.da.map(u=>dp(u,t)),o=new ya(r);return new Sf(e.path,o)}isEqual(e){return this===e}}class KR extends cp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new kc(e.It,Pc(e.It,this._a));return new Sf(e.path,t)}isEqual(e){return this===e}}function OT(n,e,t,r){const o=n.fa(1,e,t);kT("Data must be an object, but it was:",o,r);const u=[],d=$r.empty();Mc(r,(w,b)=>{const T=ib(e,w,t);b=(0,nn.m9)(b);const S=o.ua(T);if(b instanceof Q_)u.push(T);else{const F=dp(b,S);null!=F&&(u.push(T),d.set(T,F))}});const m=new Qi(u);return new LS(d,m,o.fieldTransforms)}function PT(n,e,t,r,o,u){const d=n.fa(1,e,t),m=[FT(e,r,t)],w=[o];if(u.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)m.push(FT(e,u[F])),w.push(u[F+1]);const b=[],T=$r.empty();for(let F=m.length-1;F>=0;--F)if(!HS(b,m[F])){const Y=m[F];let te=w[F];te=(0,nn.m9)(te);const Se=d.ua(Y);if(te instanceof Q_)b.push(Y);else{const Re=dp(te,Se);null!=Re&&(b.push(Y),T.set(Y,Re))}}const S=new Qi(b);return new LS(T,S,d.fieldTransforms)}function BS(n,e,t,r=!1){return dp(t,n.fa(r?4:3,e))}function dp(n,e){if($S(n=(0,nn.m9)(n)))return kT("Unsupported field value:",e,n),jS(n,e);if(n instanceof cp)return function(t,r){if(!VS(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=dp(d,r.ca(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pc(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=$n.fromDate(t);return{timestampValue:Ad(r.It,o)}}if(t instanceof $n){const o=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ad(r.It,o)}}if(t instanceof tb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Eu)return{bytesValue:TD(r.It,t._byteString)};if(t instanceof rr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:s_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${XE(t)}`)}(n,e)}function jS(n,e){const t={};return hI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mc(n,(r,o)=>{const u=dp(o,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function $S(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof tb||n instanceof Eu||n instanceof rr||n instanceof cp)}function kT(n,e,t){if(!$S(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=XE(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function FT(n,e,t){if((e=(0,nn.m9)(e))instanceof Kc)return e._internalPath;if("string"==typeof e)return ib(n,e);throw sb("Field path arguments must be of type string or ",n,!1,void 0,t)}const YR=new RegExp("[~\\*/\\[\\]]");function ib(n,e,t){if(e.search(YR)>=0)throw sb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kc(...e.split("."))._internalPath}catch{throw sb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sb(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Pe(fe.INVALID_ARGUMENT,m+n+w)}function HS(n,e){return n.some(t=>t.isEqual(e))}class J_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ob("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class QR extends J_{data(){return super.data()}}function ob(n,e){return"string"==typeof e?ib(n,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}class hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yc extends J_{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ob("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class X_ extends Yc{data(e={}){return super.data(e)}}class Bd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new X_(this._firestore,this._userDataWriter,r.key,r,new hp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new X_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new hp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new X_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new hp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),b=u.indexOf(d.doc.key)),{type:JR(d.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function JR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function GS(n,e){return n instanceof Yc&&e instanceof Yc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bd&&e instanceof Bd&&n._firestore===e._firestore&&OS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function zS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e0{}function jd(n,...e){for(const t of e)n=t._apply(n);return n}class XR extends e0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=lp(e.firestore),r=function(o,u,d,m,w,b,T){let S;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){QS(T,b);const Y=[];for(const te of T)Y.push(YS(m,o,te));S={arrayValue:{values:Y}}}else S=YS(m,o,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||QS(T,b),S=BS(d,"where",T,"in"===b||"not-in"===b);const F=Hr.create(w,b,S);return function(Y,te){if(te.dt()){const Re=Xg(Y);if(null!==Re&&!Re.isEqual(te.field))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Re.toString()}' and '${te.field.toString()}'`);const Tt=TI(Y);null!==Tt&&JS(0,te.field,Tt)}const Se=function(Re,Tt){for(const Mt of Re.filters)if(Tt.indexOf(Mt.op)>=0)return Mt.op;return null}(Y,function(Re){switch(Re){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(te.op));if(null!==Se)throw new Pe(fe.INVALID_ARGUMENT,Se===te.op?`Invalid query. You cannot use more than one '${te.op.toString()}' filter.`:`Invalid query. You cannot use '${te.op.toString()}' filters with '${Se.toString()}' filters.`)}(o,F),F}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Vi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new ga(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class tN extends e0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Oc(o,u);return function(m,w){if(null===TI(m)){const b=Xg(m);null!==b&&JS(0,b,w.field)}}(r,d),d}(e._query,this.wa,this.ya);return new Vi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ga(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class WS extends e0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Vi(e.firestore,e.converter,Af(e._query,this.pa,this.Ia))}}class qS extends e0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=KS(e,this.type,this.Ta,this.Ea);return new Vi(e.firestore,e.converter,(o=t,new ga((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class ZS extends e0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=KS(e,this.type,this.Ta,this.Ea);return new Vi(e.firestore,e.converter,(o=t,new ga((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function KS(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof J_)return function(o,u,d,m,w){if(!m)throw new Pe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const T of Ed(o))if(T.field.isKeyField())b.push(xc(u,m.key));else{const S=m.data.field(T.field);if(Yg(S))throw new Pe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const F=T.field.canonicalString();throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(S)}return new pa(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=lp(n.firestore);return function(u,d,m,w,b,T){const S=u.explicitOrderBy;if(b.length>S.length)throw new Pe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let Y=0;Y<b.length;Y++){const te=b[Y];if(S[Y].field.isKeyField()){if("string"!=typeof te)throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof te}`);if(!Id(u)&&-1!==te.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${te}' contains a slash.`);const Se=u.path.child(fn.fromString(te));if(!Ye.isDocumentKey(Se))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const Re=new Ye(Se);F.push(xc(d,Re))}else{const Se=BS(m,w,te);F.push(Se)}}return new pa(F,T)}(n._query,n.firestore._databaseId,o,e,t,r)}}function YS(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Id(e)&&-1!==t.indexOf("/"))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ye.isDocumentKey(r))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xc(n,new Ye(r))}if(t instanceof rr)return xc(n,t._key);throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XE(t)}.`)}function QS(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function JS(n,e,t){if(!t.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const cN={maxAttempts:5};class LT{convertValue(e,t="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Mc(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new tb(nr(e.latitude),nr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vd(e));default:return null}}convertTimestamp(e){const t=ca(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);Ft(QI(r));const o=new la(r.get(1),r.get(3)),u=new Ye(r.popFirst(5));return o.isEqual(t)||vr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ab(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lN extends LT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class XS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,r){this._verifyNotCommitted();const o=$d(e,this._firestore),u=ab(o.converter,t,r),d=rb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Zn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=$d(e,this._firestore);let d;return d="string"==typeof(t=(0,nn.m9)(t))||t instanceof Kc?PT(this._dataReader,"WriteBatch.update",u._key,t,r,o):OT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$d(e,this._firestore);return this._mutations=this._mutations.concat(new Dd(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $d(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new Pe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fp extends LT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function eM(n,e,t){n=mn(n,rr);const r=mn(n.firestore,fr),o=ab(n.converter,e,t);return zm(r,[rb(lp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Zn.none())])}function tM(n,e,t,...r){n=mn(n,rr);const o=mn(n.firestore,fr),u=lp(o);let d;return d="string"==typeof(e=(0,nn.m9)(e))||e instanceof Kc?PT(u,"updateDoc",n._key,e,t,r):OT(u,"updateDoc",n._key,e),zm(o,[d.toMutation(n._key,Zn.exists(!0))])}function nM(n,...e){var t,r,o;n=(0,nn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||RT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(RT(e[d])){const S=e[d];e[d]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[d+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[d+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let w,b,T;if(n instanceof rr)b=mn(n.firestore,fr),T=Tf(n._key.path),w={next:S=>{e[d]&&e[d](VT(b,n,S))},error:e[d+1],complete:e[d+2]};else{const S=mn(n,Vi);b=mn(S.firestore,fr),T=S._query;const F=new fp(b);w={next:Y=>{e[d]&&e[d](new Bd(b,F,S,Y))},error:e[d+1],complete:e[d+2]},zS(n._query)}return function(S,F,Y,te){const Se=new YE(te),Re=new ip(F,Se,Y);return S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Um(yield Gm(S),Re)})),()=>{Se.Rc(),S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return G_(yield Gm(S),Re)}))}}(Wr(b),T,m,w)}function zm(n,e){return function(t,r){const o=new tr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function gS(n,e,t){return KE.apply(this,arguments)}(yield ST(t),r,o)})),o.promise}(Wr(n),e)}function VT(n,e,t){const r=t.docs.get(e._key),o=new fp(n);return new Yc(n,o,e._key,r,new hp(t.hasPendingWrites,t.fromCache),e.converter)}class wN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lp(e)}get(e){const t=$d(e,this._firestore),r=new lN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return dt();const u=o[0];if(u.isFoundDocument())return new J_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new J_(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const o=$d(e,this._firestore),u=ab(o.converter,t,r),d=rb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=$d(e,this._firestore);let d;return d="string"==typeof(t=(0,nn.m9)(t))||t instanceof Kc?PT(this._dataReader,"Transaction.update",u._key,t,r,o):OT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=$d(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$d(e,this._firestore),r=new fp(this._firestore);return super.get(e).then(o=>new Yc(this._firestore,r,t._key,o._document,new hp(!1,!1),t.converter))}}function UT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function iM(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function sM(){if(!function pI(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Tc=mc.SDK_VERSION,(0,mc._registerComponent)(new Yl.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new fr(new eD(t.getProvider("auth-internal")),new Pv(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,mc.registerVersion)(Rv,"3.4.15",n),(0,mc.registerVersion)(Rv,"3.4.15","esm2017")}();class t0{constructor(e){this._delegate=e}static fromBase64String(e){return sM(),new t0(Eu.fromBase64String(e))}static fromUint8Array(e){return iM(),new t0(Eu.fromUint8Array(e))}toBase64(){return sM(),this._delegate.toBase64()}toUint8Array(){return iM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BT(n){return function MN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class xN{enableIndexedDbPersistence(e,t){return function FR(n,e){FS(n=mn(n,fr));const t=Wr(n),r=n._freezeSettings(),o=new ET;return kS(t,o,new yS(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function LR(n){FS(n=mn(n,fr));const e=Wr(n),t=n._freezeSettings(),r=new ET;return kS(e,r,new vR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function VR(n){if(n._initialized&&!n._terminated)throw new Pe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Is.C())return Promise.resolve();const o=r+"main";yield Is.delete(o)}),function(r){return t.apply(this,arguments)})(M_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class oM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function RR(n,e,t,r={}){var o;const u=(n=mn(n,Y_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&jn("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Or.MOCK_USER;else{d=(0,nn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Pe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Or(w)}n._authCredentials=new iI(new rI(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function BR(n){return function bR(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield IS(n),t=yield ES(n);return e.setNetworkEnabled(!0),function(r){const o=et(r);return o._u.delete(0),Pd(o)}(t)}))}(Wr(n=mn(n,fr)))}(this._delegate)}disableNetwork(){return function jR(n){return function CR(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield IS(n),t=yield ES(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const u=et(o);u._u.add(0),yield Wc(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Wr(n=mn(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,TS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function UR(n){return function(e){const t=new tr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function E(n,e){return C.apply(this,arguments)}(yield ST(e),t)})),t.promise}(Wr(n=mn(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function _N(n,e){return function AR(n,e){const t=new YE(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Gm(n),o=t,et(r).Ru.add(o),void o.next();var r,o})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield Gm(n),o=t,void et(r).Ru.delete(o);var r,o}))}}(Wr(n=mn(n,fr)),RT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wm(this,RS(this._delegate,e))}catch(t){throw ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ro(this,eb(this._delegate,e))}catch(t){throw ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ns(this,function NR(n,e){if(n=mn(n,Y_),xT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vi(n,null,(t=e,new ga(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function IN(n,e,t){n=mn(n,fr);const r=Object.assign(Object.assign({},cN),t);return function(o){if(o.maxAttempts<1)throw new Pe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function SR(n,e,t){const r=new tr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const o=yield(u=n,QE(u).then(d=>d.datastore));var u;new IR(n.asyncQueue,o,t,e,r).run()})),r.promise}(Wr(n),o=>e(new wN(n,o)),r)}(this._delegate,t=>e(new aM(this,t)))}batch(){return Wr(this._delegate),new uM(new XS(this._delegate,e=>zm(this._delegate,e)))}loadBundle(e){return function $R(n,e){const t=Wr(n=mn(n,fr)),r=new PR;return function MR(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return vS(w,b);if(w instanceof ArrayBuffer)return vS(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new _R(w,d);var w}(t,Qf(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function yR(n,e,t){const r=et(n);var o;(o=(0,_e.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(F,Y){const te=et(F),Se=Gr(Y.createTime);return te.persistence.runTransaction("hasNewerBundle","readonly",Re=>te.Ns.getBundleMetadata(Re,Y.id)).then(Re=>!!Re&&Re.createTime.compareTo(Se)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(F=w).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);m._updateProgress(mT(w));const b=new cS(w,u.localStore,d.It);let T=yield d.wc();for(;T;){const F=yield b.Ou(T);F&&m._updateProgress(F),T=yield d.wc()}const S=yield b.complete();return yield tt(u,S.Bu,void 0),yield function(F,Y){const te=et(F);return te.persistence.runTransaction("Save bundle","readwrite",Se=>te.Ns.saveBundleMetadata(Se,Y))}(u.localStore,w),m._completeWith(S.progress),Promise.resolve(S.$u)}catch(w){return jn("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var F}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield ST(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function HR(n,e){return function xR(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=et(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield JE(n),e)}))}(Wr(n=mn(n,fr)),e).then(t=>t?new Vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ns(this,t):null)}}class ub extends LT{constructor(e){super(),this.firestore=e}convertBytes(e){return new t0(new Eu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ro.forKey(t,this.firestore,null)}}class aM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ub(e)}get(e){const t=gp(e);return this._delegate.get(t).then(r=>new n0(this._firestore,new Yc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=gp(e);return r?(UT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gp(e);return this._delegate.delete(t),this}}class uM{constructor(e){this._delegate=e}set(e,t,r){const o=gp(e);return r?(UT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=gp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=gp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new X_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new r0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=pp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new pp(e,new ub(e),t),o.set(t,u)),u}}pp.INSTANCES=new WeakMap;class Ro{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ub(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ro(t,new rr(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Ro(t,new rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wm(this.firestore,RS(this._delegate,e))}catch(t){throw ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof rr&&NS(this._delegate,e)}set(e,t){t=UT("DocumentReference.set",t);try{return t?eM(this._delegate,e,t):eM(this._delegate,e)}catch(r){throw ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tM(this._delegate,e):tM(this._delegate,e,t,...r)}catch(o){throw ts(o,"updateDoc()","DocumentReference.update()")}}delete(){return function yN(n){return zm(mn(n.firestore,fr),[new Dd(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=cM(e),r=lM(e,o=>new n0(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return nM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function hN(n){n=mn(n,rr);const e=mn(n.firestore,fr),t=Wr(e),r=new fp(e);return function DR(n,e){const t=new tr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,d){try{const m=yield function(w,b){const T=et(w);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,b))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Pe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Ld(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield JE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Yc(e,r,n._key,o,new hp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function fN(n){n=mn(n,rr);const e=mn(n.firestore,fr);return bS(Wr(e),n._key,{source:"server"}).then(t=>VT(e,n,t))}(this._delegate):function dN(n){n=mn(n,rr);const e=mn(n.firestore,fr);return bS(Wr(e),n._key).then(t=>VT(e,n,t))}(this._delegate),t.then(r=>new n0(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ro(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}function ts(n,e,t){return n.message=n.message.replace(e,t),n}function cM(n){for(const e of n)if("object"==typeof e&&!BT(e))return e;return{}}function lM(n,e){var t,r;let o;return o=BT(n[0])?n[0]:BT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class n0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ro(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GS(this._delegate,e._delegate)}}class r0 extends n0{data(e){const t=this._delegate.data(e);return function nI(n,e){n||dt()}(void 0!==t),t}}class ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ub(e)}where(e,t,r){try{return new ns(this.firestore,jd(this._delegate,function eN(n,e,t){const r=e,o=ob("where",n);return new XR(o,r,t)}(e,t,r)))}catch(o){throw ts(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ns(this.firestore,jd(this._delegate,function nN(n,e="asc"){const t=e,r=ob("orderBy",n);return new tN(r,t)}(e,t)))}catch(r){throw ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ns(this.firestore,jd(this._delegate,function rN(n){return MS("limit",n),new WS("limit",n,"F")}(e)))}catch(t){throw ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ns(this.firestore,jd(this._delegate,function iN(n){return MS("limitToLast",n),new WS("limitToLast",n,"L")}(e)))}catch(t){throw ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ns(this.firestore,jd(this._delegate,function sN(...n){return new qS("startAt",n,!0)}(...e)))}catch(t){throw ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ns(this.firestore,jd(this._delegate,function oN(...n){return new qS("startAfter",n,!1)}(...e)))}catch(t){throw ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ns(this.firestore,jd(this._delegate,function aN(...n){return new ZS("endBefore",n,!1)}(...e)))}catch(t){throw ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ns(this.firestore,jd(this._delegate,function uN(...n){return new ZS("endAt",n,!0)}(...e)))}catch(t){throw ts(t,"endAt()","Query.endAt()")}}isEqual(e){return OS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function gN(n){n=mn(n,Vi);const e=mn(n.firestore,fr),t=Wr(e),r=new fp(e);return function TR(n,e){const t=new tr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,d){try{const m=yield Cm(o,u,!0),w=new zE(u,m.Hi),b=w.ju(m.documents),T=w.applyChanges(b,!1);d.resolve(T.snapshot)}catch(m){const w=Ld(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield JE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Bd(e,r,n,o))}(this._delegate):"server"===e?.source?function mN(n){n=mn(n,Vi);const e=mn(n.firestore,fr),t=Wr(e),r=new fp(e);return CS(t,n._query,{source:"server"}).then(o=>new Bd(e,r,n,o))}(this._delegate):function pN(n){n=mn(n,Vi);const e=mn(n.firestore,fr),t=Wr(e),r=new fp(e);return zS(n._query),CS(t,n._query).then(o=>new Bd(e,r,n,o))}(this._delegate),t.then(r=>new jT(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cM(e),r=lM(e,o=>new jT(this.firestore,new Bd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return nM(this._delegate,t,r)}withConverter(e){return new ns(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}class NN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new r0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new r0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new NN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new r0(this._firestore,r))})}isEqual(e){return GS(this._delegate,e._delegate)}}class Wm extends ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ro(this.firestore,e):null}doc(e){try{return new Ro(this.firestore,void 0===e?eb(this._delegate):eb(this._delegate,e))}catch(t){throw ts(t,"doc()","CollectionReference.doc()")}}add(e){return function vN(n,e){const t=mn(n.firestore,fr),r=eb(n),o=ab(n.converter,e);return zm(t,[rb(lp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ro(this.firestore,t))}isEqual(e){return NS(this._delegate,e._delegate)}withConverter(e){return new Wm(this.firestore,this._delegate.withConverter(e?pp.getInstance(this.firestore,e):null))}}function gp(n){return mn(n,rr)}class $T{constructor(...e){this._delegate=new Kc(...e)}static documentId(){return new $T(dr.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof Kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class mp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function bN(){return new NT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new mp(e)}static delete(){const e=function EN(){return new Q_("deleteField")}();return e._methodName="FieldValue.delete",new mp(e)}static arrayUnion(...e){const t=function CN(...n){return new qR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new mp(t)}static arrayRemove(...e){const t=function DN(...n){return new ZR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new mp(t)}static increment(e){const t=function TN(n){return new KR("increment",n)}(e);return t._methodName="FieldValue.increment",new mp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ON={Firestore:oM,GeoPoint:tb,Timestamp:$n,Blob:t0,Transaction:aM,WriteBatch:uM,DocumentReference:Ro,DocumentSnapshot:n0,Query:ns,QueryDocumentSnapshot:r0,QuerySnapshot:jT,CollectionReference:Wm,FieldPath:$T,FieldValue:mp,setLogLevel:function RN(n){!function JC(n){Ac.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function kN(n){(function PN(n,e){n.INTERNAL.registerComponent(new Yl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},ON)))})(n,(e,t)=>new oM(e,t,new xN)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(sw.Z);var FN=R(6451),s0=R(5363),LN=R(6063);class VN extends Ai.x{constructor(e=1/0,t=1/0,r=LN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var UN=R(3099);function HT(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,UN.B)({connector:()=>new VN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function dM(n,e){return(0,Ha.m)(e)?Vn(()=>n,e):Vn(()=>n)}var GT=R(9468);R(5867);const fM=new Map,GN={activated:!1,tokenObservers:[]},zN={initialized:!1,enabled:!1};function di(n){return fM.get(n)||GN}function Ca(n,e){fM.set(n,e)}function cb(){return zN}class YN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function QN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const rs=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gM(n){if(!di(n).activated)throw rs.create("use-before-activation",{appName:n.name})}function ZT(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,_e.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Y=yield d.getHeartbeatsHeader();Y&&(u["X-Firebase-Client"]=Y)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,b;try{w=yield fetch(n,m)}catch(Y){throw rs.create("fetch-network-error",{originalErrorMessage:null===(r=Y)||void 0===r?void 0:r.message})}if(200!==w.status)throw rs.create("fetch-status-error",{httpStatus:w.status});try{b=yield w.json()}catch(Y){throw rs.create("fetch-parse-error",{originalErrorMessage:null===(o=Y)||void 0===o?void 0:o.message})}const T=b.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const S=1e3*Number(T[1]),F=Date.now();return{token:b.token,expireTimeMillis:F+S,issuedAtTimeMillis:F}}),KT.apply(this,arguments)}function tO(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const a0="firebase-app-check-store";let hb=null;function yM(){return hb||(hb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(rs.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(a0,{keyPath:"compositeKey"})}}catch(r){e(rs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),hb)}function YT(){return YT=(0,_e.Z)(function*(n,e){const r=(yield yM()).transaction(a0,"readwrite"),u=r.objectStore(a0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var b;m(rs.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),YT.apply(this,arguments)}const u0=new wo.Yd("@firebase/app-check");function IM(n,e){return(0,nn.hl)()?function sO(n,e){return function vM(n,e){return YT.apply(this,arguments)}(function wM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{u0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function EM(){return cb().enabled}function bM(){return eA.apply(this,arguments)}function eA(){return eA=(0,_e.Z)(function*(){const n=cb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),eA.apply(this,arguments)}const dO={error:"UNKNOWN_ERROR"};function hO(n){return nn.US.encodeString(JSON.stringify(n),!1)}function fb(n){return tA.apply(this,arguments)}function tA(){return tA=(0,_e.Z)(function*(n,e=!1){const t=n.app;gM(t);const r=di(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&pb(w)&&(o=w)}if(!e&&o&&pb(o))return{token:o.token};let m,d=!1;if(EM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ZT(tO(t,yield bM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const w=yield r.exchangeTokenPromise;return yield IM(t,w),Ca(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?u0.warn(w.message):u0.error(w),u=w}return o?(m={token:o.token},Ca(t,Object.assign(Object.assign({},r),{token:o})),yield IM(t,o)):m=pO(u),d&&DM(t,m),m}),tA.apply(this,arguments)}function rA(n,e){const t=di(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ca(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function CM(n){const{app:e}=n,t=di(e);let r=t.tokenRefresher;r||(r=function fO(n){const{app:e}=n;return new YN((0,_e.Z)(function*(){let r;if(r=di(e).token?yield fb(n,!0):yield fb(n),r.error)throw r.error}),()=>!0,()=>{const t=di(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ca(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DM(n,e){const t=di(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function pb(n){return n.expireTimeMillis-Date.now()>0}function pO(n){return{token:hO(dO),error:n}}class gO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=di(this.app);for(const t of e)rA(this.app,t.next);return Promise.resolve()}}const OM="app-check-internal";!function MO(){(0,mc._registerComponent)(new Yl.wA("app-check",n=>function mO(n,e){return new gO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OM).initialize()})),(0,mc._registerComponent)(new Yl.wA(OM,n=>function yO(n){return{getToken:e=>fb(n,e),addTokenListener:e=>function nA(n,e,t,r){const{app:o}=n,u=di(o),d={next:t,error:r,type:e};if(Ca(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&pb(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),CM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>CM(n))}(n,"INTERNAL",e),removeTokenListener:e=>rA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,mc.registerVersion)("@firebase/app-check","0.5.12")}();class aA{constructor(){return(0,Un.vb)("app-check")}}typeof window<"u"&&window;var mb=R(127);const kM=new h.OlP("angularfire2.auth.use-emulator"),FM=new h.OlP("angularfire2.auth.settings"),LM=new h.OlP("angularfire2.auth.tenant-id"),VM=new h.OlP("angularfire2.auth.langugage-code"),UM=new h.OlP("angularfire2.auth.use-device-language"),BM=new h.OlP("angularfire.auth.persistence"),jM=(n,e,t,r,o,u,d,m)=>(0,Ri.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[b,T]of Object.entries(d))w.settings[b]=T;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let cA=(()=>{class n{constructor(t,r,o,u,d,m,w,b,T,S,F,Y){const te=new Ai.x,Se=ft(void 0).pipe((0,s0.Q)(d.outsideAngular),Vn(()=>u.runOutsideAngular(()=>Promise.resolve().then(R.bind(R,2274)))),(0,gt.U)(()=>(0,Ri.on)(t,u,r)),(0,gt.U)(Re=>jM(Re,u,m,b,T,S,w,F)),HT({bufferSize:1,refCount:!1}));if(xr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{Se.pipe(ks()).subscribe();const Tt=Se.pipe(Vn($t=>$t.getRedirectResult().then(Gt=>Gt,()=>null)),Un.iC,HT({bufferSize:1,refCount:!1})),Mt=Se.pipe(Vn($t=>new Yr.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>$t.onAuthStateChanged(ln=>Gt.next(ln),ln=>Gt.error(ln),()=>Gt.complete()))})))),Jt=Se.pipe(Vn($t=>new Yr.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>$t.onIdTokenChanged(ln=>Gt.next(ln),ln=>Gt.error(ln),()=>Gt.complete()))}))));this.authState=Tt.pipe(dM(Mt),(0,GT.R)(d.outsideAngular),(0,s0.Q)(d.insideAngular)),this.user=Tt.pipe(dM(Jt),(0,GT.R)(d.outsideAngular),(0,s0.Q)(d.insideAngular)),this.idToken=this.user.pipe(Vn($t=>$t?(0,wn.D)($t.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Vn($t=>$t?(0,wn.D)($t.getIdTokenResult()):ft(null))),this.credential=(0,FN.T)(Tt,te,this.authState.pipe(Ur($t=>!$t))).pipe((0,gt.U)($t=>$t?.user?$t:null),(0,GT.R)(d.outsideAngular),(0,s0.Q)(d.insideAngular))}return(0,Ri.pX)(this,Se,u,{spy:{apply:(Re,Tt,Mt)=>{(Re.startsWith("signIn")||Re.startsWith("createUser"))&&Mt.then(Jt=>te.next(Jt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU),h.LFG(kM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(UM,8),h.LFG(BM,8),h.LFG(aA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function $M(n,e){return function kO(n,e=rw.z){return new Yr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function lA(n,e){return $M(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function yb(n,e){return lA(n,e).pipe(Ga(void 0),Uh(),(0,gt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(T=>T.doc.ref.isEqual(d.ref)),b=t?.payload.docs.find(T=>T.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function HM(n,e,t){return yb(n,t).pipe(Ho((r,o)=>function LO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function VO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return dA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),iw(),(0,gt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function dA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function GM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=yb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ga(void 0),Uh(),Ur(([r,o])=>o.length>0||!r),(0,gt.U)(([r,o])=>o),Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ho((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return HM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Un.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Un.iC)}add(e){return this.ref.add(e)}doc(e){return new WM(this.ref.doc(e),this.afs)}}class WM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=KM(r,t);return new zM(o,u,this.afs)}snapshotChanges(){return function FO(n,e){return $M(n,e).pipe(Ga(void 0),Uh(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(Un.iC)}}class UO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?yb(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ur(t=>t.length>0),Un.iC):yb(this.query,this.afs.schedulers.outsideAngular).pipe(Un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ho((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return HM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Un.iC)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Un.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Un.iC)}}const qM=new h.OlP("angularfire2.enableFirestorePersistence"),ZM=new h.OlP("angularfire2.firestore.persistenceSettings"),BO=new h.OlP("angularfire2.firestore.settings"),jO=new h.OlP("angularfire2.firestore.use-emulator");function KM(n,e=(t=>t)){return{query:e(n),ref:n}}let vb=(()=>{class n{constructor(t,r,o,u,d,m,w,b,T,S,F,Y,te,Se,Re,Tt,Mt){this.schedulers=w;const Jt=(0,Ri.on)(t,m,r),$t=T;S&&jM(Jt,m,F,te,Se,Re,Y,Tt),[this.firestore,this.persistenceEnabled$]=(0,Ri.cc)(`${Jt.name}.firestore`,"AngularFirestore",Jt.name,()=>{const Gt=m.runOutsideAngular(()=>Jt.firestore());if(u&&Gt.settings(u),$t&&Gt.useEmulator(...$t),o&&!xr(d)){const ln=()=>{try{return(0,wn.D)(Gt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ii){return typeof console<"u"&&console.warn(ii),ft(!1)}};return[Gt,m.runOutsideAngular(ln)]}return[Gt,ft(!1)]},[u,$t,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=KM(o,r),m=this.schedulers.ngZone.run(()=>u);return new zM(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new UO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new WM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Dh),h.LFG(Ri.xv,8),h.LFG(qM,8),h.LFG(BO,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU),h.LFG(ZM,8),h.LFG(jO,8),h.LFG(cA,8),h.LFG(kM,8),h.LFG(FM,8),h.LFG(LM,8),h.LFG(VM,8),h.LFG(UM,8),h.LFG(BM,8),h.LFG(aA,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$O=(()=>{class n{constructor(){mb.Z.registerVersion("angularfire",Un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:qM,useValue:!0},{provide:ZM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[vb]}),n})(),YM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),yp=(()=>{class n extends YM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const bu=new h.OlP("NgValueAccessor"),zO={provide:bu,useExisting:(0,h.Gpc)(()=>c0),multi:!0},qO=new h.OlP("CompositionEventMode");let c0=(()=>{class n extends YM{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function WO(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(qO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([zO]),h.qOj]}),n})();const Ui=new h.OlP("NgValidators"),Gd=new h.OlP("NgAsyncValidators");function ax(n){return null!=n}function ux(n){return(0,h.QGY)(n)?(0,wn.D)(n):n}function cx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function lx(n,e){return e.map(t=>t(n))}function dx(n){return n.map(e=>function YO(n){return!n.validate}(e)?e:t=>e.validate(t))}function hA(n){return null!=n?function hx(n){if(!n)return null;const e=n.filter(ax);return 0==e.length?null:function(t){return cx(lx(t,e))}}(dx(n)):null}function fA(n){return null!=n?function fx(n){if(!n)return null;const e=n.filter(ax);return 0==e.length?null:function(t){return function HO(...n){const e=(0,Ti.jO)(n),{args:t,keys:r}=Ku(n),o=new Yr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,b=d;for(let T=0;T<d;T++){let S=!1;(0,bl.Xf)(t[T]).subscribe((0,Er.x)(u,F=>{S||(S=!0,b--),m[T]=F},()=>w--,void 0,()=>{(!w||!S)&&(b||u.next(r?wl(r,m):m),u.complete())}))}});return e?o.pipe(ph(e)):o}(lx(t,e).map(ux)).pipe((0,gt.U)(cx))}}(dx(n)):null}function px(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function pA(n){return n?Array.isArray(n)?n:[n]:[]}function wb(n,e){return Array.isArray(n)?n.includes(e):n===e}function yx(n,e){const t=pA(e);return pA(n).forEach(o=>{wb(t,o)||t.push(o)}),t}function vx(n,e){return pA(e).filter(t=>!wb(n,t))}class _x{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class is extends _x{get formDirective(){return null}get path(){return null}}class zd extends _x{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wx{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let gA=(()=>{class n extends wx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zd,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Ix=(()=>{class n extends wx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(is,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const l0="VALID",Eb="INVALID",qm="PENDING",d0="DISABLED";function _A(n){return(bb(n)?n.validators:n)||null}function bx(n){return Array.isArray(n)?hA(n):n||null}function wA(n,e){return(bb(e)?e.asyncValidators:n)||null}function Cx(n){return Array.isArray(n)?fA(n):n||null}function bb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ax{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=bx(this._rawValidators),this._composedAsyncValidatorFn=Cx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===l0}get invalid(){return this.status===Eb}get pending(){return this.status==qm}get disabled(){return this.status===d0}get enabled(){return this.status!==d0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=bx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Cx(e)}addValidators(e){this.setValidators(yx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vx(e,this._rawAsyncValidators))}hasValidator(e){return wb(this._rawValidators,e)}hasAsyncValidator(e){return wb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=d0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=l0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===l0||this.status===qm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?d0:l0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qm,this._hasOwnPendingAsyncValidator=!0;const t=ux(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?d0:this.errors?Eb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qm)?qm:this._anyControlsHaveStatus(Eb)?Eb:l0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class IA extends Ax{constructor(e,t,r){super(_A(t),wA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Tx(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Dx(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function h0(n,e){EA(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function sP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Sx(n,e)})}(n,e),function aP(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Sx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function iP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Tb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function EA(n,e){const t=function gx(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(px(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function mx(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(px(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Tb(e._rawValidators,o),Tb(e._rawAsyncValidators,o)}function Sx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const hP={provide:is,useExisting:(0,h.Gpc)(()=>Sb)},f0=(()=>Promise.resolve(null))();let Sb=(()=>{class n extends is{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new IA({},hA(t),fA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){f0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),h0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){f0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){f0.then(()=>{const r=this._findContainer(t.path),o=new IA({});(function Mx(n,e){EA(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){f0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){f0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Rx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ui,10),h.Y36(Gd,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([hP]),h.qOj]}),n})();function Nx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ox(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Px=class extends Ax{constructor(e=null,t,r){super(_A(t),wA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Ox(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Nx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Nx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Ox(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},gP={provide:zd,useExisting:(0,h.Gpc)(()=>Mb)},Lx=(()=>Promise.resolve(null))();let Mb=(()=>{class n extends zd{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new Px,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function CA(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===c0?t=u:function lP(n){return Object.getPrototypeOf(n.constructor)===yp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function bA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){h0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Lx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.D6c)(r);Lx.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Cb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(is,9),h.Y36(Ui,10),h.Y36(Gd,10),h.Y36(bu,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([gP]),h.qOj,h.TTD]}),n})(),Vx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Bx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),UP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Bx]}),n})(),BP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[UP]}),n})();function $P(n,e){1&n&&(h.TgZ(0,"label",9),h._uU(1,"El usuario no existe"),h.qZA())}function HP(n,e){1&n&&(h.TgZ(0,"label",9),h._uU(1,"Clave inv\xe1lida"),h.qZA())}function GP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"button",1),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.pruebaLogin1())}),h._uU(2,"Ej login bien"),h.qZA(),h.TgZ(3,"button",2),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.pruebaLogin2())}),h._uU(4,"Ej pass mal"),h.qZA(),h.TgZ(5,"button",3),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.pruebaLogin3())}),h._uU(6,"Ej user mal"),h.qZA(),h.YNc(7,$P,2,0,"label",4),h.YNc(8,HP,2,0,"label",4),h.TgZ(9,"input",5),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.usuario.correo=o)}),h.qZA(),h.TgZ(10,"input",6),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.usuario.clave=o)}),h.qZA(),h.TgZ(11,"button",7),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.loguearse())}),h._uU(12,"Login"),h.qZA(),h.TgZ(13,"button",8),h._uU(14,"Reg\xedstrese"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(7),h.Q6J("ngIf",t.errorCorreo),h.xp6(1),h.Q6J("ngIf",t.errorClave),h.xp6(1),h.Q6J("ngModel",t.usuario.correo),h.xp6(1),h.Q6J("ngModel",t.usuario.clave)}}function zP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"label"),h._uU(2),h.qZA(),h.TgZ(3,"button",10),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.desloguearse())}),h._uU(4,"Salir"),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(2),h.hij("Logueado como ",t.usuario.correo,"")}}const iR=".error[_ngcontent-%COMP%]{background-color:red;border-radius:5px}";let WP=(()=>{class n{constructor(t){this.firebase=t,this.errorCorreo=!1,this.errorClave=!1,this.usuario=new Kl,this.listaUsuarios=[],this.botonPresionado=!1,this.logueado=!1,this.eventoSpinner=new h.vpe,this.eventoLogueado=new h.vpe}ngOnInit(){if(null!=localStorage.getItem("usuarioLogueado")){let t=JSON.parse(localStorage.getItem("usuarioLogueado")||"{}");this.usuario.correo=t.correo,this.usuario.clave=t.clave,this.logueado=!0}}enviarAvisoSpinner(t){this.eventoSpinner.emit(t)}enviarAvisoLogueado(t){this.eventoLogueado.emit(t)}desloguearse(){this.logueado=!1,localStorage.removeItem("usuarioLogueado"),this.enviarAvisoLogueado(!1)}loguearse(){this.botonPresionado=!0,this.errorCorreo=!1,this.errorClave=!1,this.enviarAvisoSpinner(!0),this.firebase.collection("usuarios").snapshotChanges().subscribe(t=>{if(this.enviarAvisoSpinner(!1),this.listaUsuarios=[],t.forEach(r=>{this.listaUsuarios.push(Kl.toUsuario(r.payload.doc.data()))}),this.botonPresionado)if(this.usuario.existeCorreo(this.listaUsuarios))if(this.usuario.correspondeClave(this.listaUsuarios)){localStorage.setItem("usuarioLogueado",JSON.stringify(this.usuario));let r=new wC(this.usuario.correo?.toString());this.firebase.collection("registros").add(Object.assign({},r)),this.enviarAvisoLogueado(!0),this.logueado=!0}else this.errorClave=!0;else this.errorCorreo=!0;this.botonPresionado=!1})}pruebaLogin1(){this.usuario.correo="pedro@gmail.com",this.usuario.clave="1234",this.loguearse()}pruebaLogin2(){this.usuario.correo="pedro@gmail.com",this.usuario.clave="123",this.loguearse()}pruebaLogin3(){this.usuario.correo="petete@gmail.com",this.usuario.clave="1234",this.loguearse()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vb))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],outputs:{eventoSpinner:"eventoSpinner",eventoLogueado:"eventoLogueado"},decls:5,vars:2,consts:[[4,"ngIf"],["type","button",1,"btn","btn-primary","btn-lg1","text-center",3,"click"],["type","button",1,"btn","btn-primary","btn-lg2",3,"click"],["type","button",1,"btn","btn-primary","btn-lg3",3,"click"],["class","error",4,"ngIf"],["type","text","placeholder","Ingrese correo..",3,"ngModel","ngModelChange"],["type","text","placeholder","Ingrese clave..",3,"ngModel","ngModelChange"],["type","button",3,"click"],["type","button","routerLink","registro"],[1,"error"],["type","button",1,"btn","btn-primary","btn-lg",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"html"),h._UZ(1,"head"),h.TgZ(2,"body"),h.YNc(3,GP,15,4,"div",0),h.YNc(4,zP,5,1,"div",0),h.qZA()()),2&t&&(h.xp6(3),h.Q6J("ngIf",!r.logueado),h.xp6(1),h.Q6J("ngIf",r.logueado))},dependencies:[Jn,ql,c0,gA,Mb],styles:[iR,iR]}),n})(),qP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-quien-soy"]],decls:10,vars:0,consts:[[1,"text-center"],["src","..\\assets\\tomas.jpg","alt","","width","150","height","200",1,"mb-4"],[1,"lead"],["href","https://github.com/TomasBacchetta",1,"lead",2,"color","blue"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h1"),h._uU(2,"Qui\xe9n soy"),h.qZA(),h._UZ(3,"img",1),h.TgZ(4,"p",2),h._uU(5,"Mi nombre es Tom\xe1s Bacchetta y soy alumno de la tecnicatura en programaci\xf3n de la UTNFRA"),h.qZA(),h.TgZ(6,"a",3),h._uU(7,"Mi repositorio en GitHub"),h.qZA(),h._UZ(8,"br")(9,"br"),h.qZA())},styles:["body[_ngcontent-%COMP%]{text-shadow:0 .05rem .1rem rgba(0,0,0,.5);box-shadow:inset 0 0 5rem #00000080;min-height:100vh}.cover-container[_ngcontent-%COMP%]{max-width:42em}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#ffffff80;border-bottom:.25rem solid transparent}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:focus{border-bottom-color:#ffffff40}.nav-masthead[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%] + .nav-link[_ngcontent-%COMP%]{margin-left:1rem}.nav-masthead[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#fff;border-bottom-color:#fff}.btn-secondary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:hover, .btn-secondary[_ngcontent-%COMP%]:focus{color:#333;text-shadow:none}.mb-4[_ngcontent-%COMP%]{border-radius:50%;box-shadow:10px 10px 5px #ccc;-moz-box-shadow:10px 10px 5px #ccc;-webkit-box-shadow:10px 10px 5px #ccc;-khtml-box-shadow:10px 10px 5px #ccc}"]}),n})(),ZP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-juegos"]],decls:6,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"Este es el componente juegos que solo es visible al loguearse. Aqu\xed se listar\xe1n los juegos."),h.qZA(),h.TgZ(2,"p"),h._uU(3,"La home s\xed es visible para los no logueados, a pesar de lo que dice la consigna"),h.qZA(),h.TgZ(4,"p"),h._uU(5,"En ese caso Home s\xf3lo tendr\xe1 una invitaci\xf3n a registrarse y demostraciones"),h.qZA())}}),n})();function KP(n,e){1&n&&h._UZ(0,"div",27)}function YP(n,e){1&n&&h._UZ(0,"app-quien-soy")}function QP(n,e){1&n&&h._UZ(0,"app-juegos")}let sR=(()=>{class n{constructor(){this.spinner=!1,this.quienSoy=!1,this.logueado=!1,this.juegos=!1}ngOnInit(){null!=localStorage.getItem("usuarioLogueado")&&(this.juegos=!0,this.logueado=!0)}confirmarLogueo(t){console.log(t),this.logueado=t,this.juegos=!0}activarSpinner(t){this.spinner=t}mostrarQuienSoy(){this.juegos=!1,this.quienSoy=!0}mostrarJuegos(){this.quienSoy=!1,this.juegos=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:38,vars:3,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1, shrink-to-fit=no"],["rel","stylesheet","href","https://fonts.googleapis.com/css?family=Open+Sans:400,600"],["rel","stylesheet","href","https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"],["rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"],["id","cover-spin",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"containerImage"],["src","./assets/felix-nav.png"],[1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarCollapse",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse","justify-content-start"],[1,"navbar-nav"],[1,"nav-item","nav-link",3,"click"],[1,"login","ml-auto"],[3,"eventoSpinner","eventoLogueado"],[1,"vh-100",2,"background-color","#eee"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-lg-12","col-xl-11"],[1,"card","text-black",2,"border-radius","25px"],[1,"card-body","p-md-5"],[1,"row","justify-content-center"],[1,"col-md-10","col-lg-6","col-xl-5","order-2","order-lg-1"],[4,"ngIf"],["id","cover-spin"]],template:function(t,r){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2),h.TgZ(4,"title"),h._uU(5,"Bootstrap Navbar with Inline Login Form in Dropdown"),h.qZA(),h._UZ(6,"link",3)(7,"link",4)(8,"link",5),h.qZA(),h.TgZ(9,"body"),h.YNc(10,KP,1,0,"div",6),h.TgZ(11,"nav",7)(12,"div",8),h._UZ(13,"img",9),h.qZA(),h.TgZ(14,"label",10),h._uU(15,"Juegos"),h.TgZ(16,"b"),h._uU(17,"Bacchetta"),h.qZA()(),h.TgZ(18,"button",11),h._UZ(19,"span",12),h.qZA(),h.TgZ(20,"div",13)(21,"div",14)(22,"a",15),h.NdJ("click",function(){return r.mostrarJuegos()}),h._uU(23,"Home"),h.qZA(),h.TgZ(24,"a",15),h.NdJ("click",function(){return r.mostrarQuienSoy()}),h._uU(25,"Qui\xe9n Soy"),h.qZA()(),h.TgZ(26,"div",16)(27,"app-login",17),h.NdJ("eventoSpinner",function(u){return r.activarSpinner(u)})("eventoLogueado",function(u){return r.confirmarLogueo(u)}),h.qZA()()()(),h.TgZ(28,"section",18)(29,"div",19)(30,"div",20)(31,"div",21)(32,"div",22)(33,"div",23)(34,"div",24)(35,"div",25),h.YNc(36,YP,1,0,"app-quien-soy",26),h.YNc(37,QP,1,0,"app-juegos",26),h.qZA()()()()()()()()()()),2&t&&(h.xp6(10),h.Q6J("ngIf",r.spinner),h.xp6(26),h.Q6J("ngIf",r.quienSoy),h.xp6(1),h.Q6J("ngIf",r.juegos&&r.logueado))},dependencies:[Jn,WP,qP,ZP],styles:["body[_ngcontent-%COMP%] {\n\tfont-family: 'Open Sans', sans-serif;\n}\n.form-control[_ngcontent-%COMP%] {\n\tbox-shadow: none;\n\tborder-radius: 4px;        \n\tborder-color: #dfe3e8;\n}\n.navbar[_ngcontent-%COMP%] {\n\tbackground: #fff;\n\tpadding-left: 16px;\n\tpadding-right: 16px;\n\tborder-bottom: 1px solid #dfe3e8;\n\tborder-radius: 0;\n}\n.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%] {\n\tfont-size: 20px;\n\tpadding-left: 0;\n\tpadding-right: 50px;\n  margin: 0;\n  \n  \n}\n.navbar[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]   b[_ngcontent-%COMP%] {\n\tcolor: #29c68c;\t\t\n}\n.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active {\n\tcolor: #999;\n\tbackground: transparent;\n}\n.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus {\n\tcolor: #29c68c !important;\n}\n.navbar[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%]    > a.active[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%]   .navbar-nav.show[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\n\tcolor: #26bb84 !important;\n\tbackground: transparent !important;\n}\n.navbar[_ngcontent-%COMP%]   .form-inline[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%] {\n\tbox-shadow: none;\n\tborder-radius: 2px 0 0 2px;\n\tbackground: #f5f5f5;\n\tborder-color: #dfe3e8;\n\tfont-size: 16px;\n}\n.navbar[_ngcontent-%COMP%]   .form-inline[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\n\tfont-size: 16px;\n}\n.navbar[_ngcontent-%COMP%]   .form-inline[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\n\tborder-radius: 2px;\n\tcolor: #fff;\n\tborder-color: #29c68c;\n\tbackground: #29c68c;\n\toutline: none;\n}\n.navbar[_ngcontent-%COMP%]   .form-inline[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .navbar[_ngcontent-%COMP%]   .form-inline[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus {\n\tborder-color: #26bb84;\n\tbackground: #26bb84;\n}\n.navbar[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%] {\n\tdisplay: inline-block;\n}\n.navbar[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\n\tmargin-left: 4px;\n}\n.navbar[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%] {\n\tborder-radius: 2px;\n}\n.navbar[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] {\n\tmargin-right: 4px;\n\tfloat: left;\n}\n.navbar[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%] {\n\tmax-width: 158px;\n\tborder-radius: 0 2px 2px 0;\n}    \t\n.navbar[_ngcontent-%COMP%]   .navbar-right[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]::after {\n\tdisplay: none;\n}\n.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] {\n\tfont-size: 14px;\n\tborder-radius: 1px;\n\tborder-color: #e5e5e5;\n\tbox-shadow: 0 2px 8px rgba(0,0,0,.05);\n}\n.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n\tpadding: 6px 20px;\n}\n.navbar[_ngcontent-%COMP%]   .login-dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] {\n\twidth: 505px;\n\tpadding: 20px;\n\tleft: auto;\n\tright: 0;        \n}\n.navbar[_ngcontent-%COMP%]   .login-dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]::after {\n\tdisplay: none;\n}\n@media (min-width: 1200px){\n\t.search-form[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] {\n\t\twidth: 300px;\n\t\tmargin-left: 30px;\n\t}\n}\n@media (max-width: 768px){\n\t.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%] {\n\t\twidth: 100%;\n\t\tbackground: transparent;\n\t\tpadding: 10px 20px;\n\t}\n\t.navbar[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] {\n\t\twidth: 100%;\n\t\tmargin-bottom: 15px;\n\t}\n\t.navbar[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%] {\n\t\tmax-width: none;\t\t\t\n\t}\n\t.navbar[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%] {\n\t\twidth: 100%;\n\t}\n}\n\n#cover-spin[_ngcontent-%COMP%] {\n    position:fixed;\n    width:100%;\n    left:0;right:0;top:0;bottom:0;\n    background-color: rgba(255,255,255,0.7);\n    z-index:9999;\n}\n\n@-webkit-keyframes spin {\n\tfrom {-webkit-transform:rotate(0deg);}\n\tto {-webkit-transform:rotate(360deg);}\n}\n\n@keyframes spin {\n\tfrom {transform:rotate(0deg);}\n\tto {transform:rotate(360deg);}\n}\n\n#cover-spin[_ngcontent-%COMP%]::after {\n    content:'';\n    display:block;\n    position:absolute;\n    left:48%;top:40%;\n    width:40px;height:40px;\n    border-style:solid;\n    border-color:black;\n    border-top-color:transparent;\n    border-width: 4px;\n    border-radius:50%;\n    -webkit-animation: spin .8s linear infinite;\n    animation: spin .8s linear infinite;\n}\n\na[_ngcontent-%COMP%]{\n  cursor: pointer;\n}\n\n.containerImage[_ngcontent-%COMP%] {\n    width: 40px;\n    padding-right: 5px;\n\t\n}\n\n\n.containerImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    width: 100%;\n    height: auto;\n}"]}),n})();function JP(n,e){1&n&&h._UZ(0,"div",32)}function XP(n,e){1&n&&(h.TgZ(0,"div",33)(1,"div",34)(2,"h3",35),h._uU(3,"Registro compleado"),h.qZA(),h._UZ(4,"br"),h.TgZ(5,"button",36),h._uU(6,"Volver"),h.qZA()()())}function e1(n,e){1&n&&(h.TgZ(0,"label",37),h._uU(1,"Nombre inv\xe1lido"),h.qZA())}function t1(n,e){1&n&&(h.TgZ(0,"label",37),h._uU(1,"Correo inv\xe1lido"),h.qZA())}function n1(n,e){1&n&&(h.TgZ(0,"label",37),h._uU(1,"Ya existe el usuario"),h.qZA())}function r1(n,e){1&n&&(h.TgZ(0,"label",37),h._uU(1,"Contrase\xf1a inv\xe1lida"),h.qZA())}function s1(n,e){1&n&&(h.TgZ(0,"label",37),h._uU(1,"Contrase\xf1a no concuerda"),h.qZA())}const oR='.labelError[_ngcontent-%COMP%]{background-color:red;border-radius:5px}.alerta[_ngcontent-%COMP%]{position:fixed;width:100%;left:0;right:0;top:0;bottom:0;background-color:#ffffffb3;z-index:9999}.bloque-alerta[_ngcontent-%COMP%]{display:block;position:fixed;top:50%;left:50%}.mensaje-alerta[_ngcontent-%COMP%]{position:fixed;top:50%;left:53%;transform:translate(-50%,-50%)}#cover-spin[_ngcontent-%COMP%]{position:fixed;width:100%;left:0;right:0;top:0;bottom:0;background-color:#ffffffb3;z-index:9999}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}#cover-spin[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:48%;top:40%;width:40px;height:40px;border-style:solid;border-color:#000;border-top-color:transparent;border-width:4px;border-radius:50%;animation:spin .8s linear infinite}',o1=[{path:"",component:sR},{path:"home",component:sR},{path:"registro",component:(()=>{class n{constructor(t){this.firebase=t,this.usuario=new Kl,this.claveConfirmada="",this.nombreInvalido=!1,this.correoInvalido=!1,this.claveInvalida=!1,this.claveNoConcuerda=!1,this.alerta=!1,this.existeUsuario=!1,this.spinner=!1}ngOnInit(){}cerrarAlerta(){this.alerta=!1}registrar(){let t=!0;this.claveNoConcuerda=!1,this.nombreInvalido=!1,this.correoInvalido=!1,this.claveInvalida=!1,this.existeUsuario=!1,this.usuario.clave!=this.claveConfirmada&&(t=!1,this.claveNoConcuerda=!0),this.usuario.validarNombre()||(t=!1,this.nombreInvalido=!0),this.usuario.validarCorreo()||(t=!1,this.correoInvalido=!0),this.usuario.validarClave()||(t=!1,this.claveInvalida=!0);let r=[];this.spinner=!0,this.firebase.collection("usuarios").snapshotChanges().subscribe(o=>{r=[],o.forEach(u=>{r.push(Kl.toUsuario(u.payload.doc.data()))}),this.usuario.existeCorreo(r)&&(t=!1,this.existeUsuario=!0),t&&(this.firebase.collection("usuarios").add(Object.assign({},this.usuario)),this.alerta=!0,localStorage.setItem("usuarioLogueado",JSON.stringify(this.usuario))),this.spinner=!1})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vb))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro"]],decls:55,vars:11,consts:[["id","cover-spin",4,"ngIf"],["class","alerta","id","cover-spin",4,"ngIf"],[1,"vh-100",2,"background-color","#eee"],[1,"container","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-lg-12","col-xl-11"],[1,"card","text-black",2,"border-radius","25px"],[1,"card-body","p-md-5"],[1,"row","justify-content-center"],[1,"col-md-10","col-lg-6","col-xl-5","order-2","order-lg-1"],[1,"text-center","h1","fw-bold","mb-5","mx-1","mx-md-4","mt-4"],[1,"mx-1","mx-md-4"],[1,"d-flex","flex-row","align-items-center","mb-4"],[1,"fas","fa-user","fa-lg","me-3","fa-fw"],[1,"form-outline","flex-fill","mb-0"],["name","nombre","type","text","id","form3Example1c",1,"form-control",3,"ngModel","ngModelChange"],["for","form3Example1c",1,"form-label"],["class","labelError",4,"ngIf"],[1,"fas","fa-envelope","fa-lg","me-3","fa-fw"],["name","correo","type","email","id","form3Example3c",1,"form-control",3,"ngModel","ngModelChange"],["for","form3Example3c",1,"form-label"],[1,"fas","fa-lock","fa-lg","me-3","fa-fw"],["name","clave","type","password","id","form3Example4c",1,"form-control",3,"ngModel","ngModelChange"],["for","form3Example4c",1,"form-label"],[1,"fas","fa-key","fa-lg","me-3","fa-fw"],["name","clave2","type","password","id","form3Example4cd",1,"form-control",3,"ngModel","ngModelChange"],["for","form3Example4cd",1,"form-label"],[1,"d-flex","justify-content-center","mx-4","mb-3","mb-lg-4"],["type","button",1,"btn","btn-primary","btn-lg",3,"click"],["type","button","routerLink","",1,"btn","btn-primary","btn-lg"],[1,"col-md-10","col-lg-6","col-xl-7","d-flex","align-items-center","order-1","order-lg-2"],["src","./assets/felix-register.jpg","alt","Sample image",1,"img-fluid"],["id","cover-spin"],["id","cover-spin",1,"alerta"],[1,"bloque-alerta"],[1,"mensaje-alerta"],["type","button","routerLink","",1,"btn","btn-primary"],[1,"labelError"]],template:function(t,r){1&t&&(h._UZ(0,"head"),h.YNc(1,JP,1,0,"div",0),h.YNc(2,XP,7,0,"div",1),h.TgZ(3,"section",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"p",10),h._uU(12,"Reg\xedstrese"),h.qZA(),h.TgZ(13,"form",11)(14,"div",12),h._UZ(15,"i",13),h.TgZ(16,"div",14)(17,"input",15),h.NdJ("ngModelChange",function(u){return r.usuario.nombre=u}),h.qZA(),h.TgZ(18,"label",16),h._uU(19,"Su nombre"),h.qZA(),h._UZ(20,"br"),h.YNc(21,e1,2,0,"label",17),h.qZA()(),h.TgZ(22,"div",12),h._UZ(23,"i",18),h.TgZ(24,"div",14)(25,"input",19),h.NdJ("ngModelChange",function(u){return r.usuario.correo=u}),h.qZA(),h.TgZ(26,"label",20),h._uU(27,"Su correo"),h.qZA(),h._UZ(28,"br"),h.YNc(29,t1,2,0,"label",17),h.YNc(30,n1,2,0,"label",17),h.qZA()(),h.TgZ(31,"div",12),h._UZ(32,"i",21),h.TgZ(33,"div",14)(34,"input",22),h.NdJ("ngModelChange",function(u){return r.usuario.clave=u}),h.qZA(),h.TgZ(35,"label",23),h._uU(36,"Contrase\xf1a"),h.qZA(),h._UZ(37,"br"),h.YNc(38,r1,2,0,"label",17),h.qZA()(),h.TgZ(39,"div",12),h._UZ(40,"i",24),h.TgZ(41,"div",14)(42,"input",25),h.NdJ("ngModelChange",function(u){return r.claveConfirmada=u}),h.qZA(),h.TgZ(43,"label",26),h._uU(44,"Repita su contrase\xf1a"),h.qZA(),h._UZ(45,"br"),h.YNc(46,s1,2,0,"label",17),h.qZA()(),h.TgZ(47,"div",27)(48,"button",28),h.NdJ("click",function(){return r.registrar()}),h._uU(49,"Aceptar"),h.qZA()(),h.TgZ(50,"div",27)(51,"button",29),h._uU(52,"Volver"),h.qZA()()()(),h.TgZ(53,"div",30),h._UZ(54,"img",31),h.qZA()()()()()()()()),2&t&&(h.xp6(1),h.Q6J("ngIf",r.spinner),h.xp6(1),h.Q6J("ngIf",r.alerta),h.xp6(15),h.Q6J("ngModel",r.usuario.nombre),h.xp6(4),h.Q6J("ngIf",r.nombreInvalido),h.xp6(4),h.Q6J("ngModel",r.usuario.correo),h.xp6(4),h.Q6J("ngIf",r.correoInvalido),h.xp6(1),h.Q6J("ngIf",r.existeUsuario),h.xp6(4),h.Q6J("ngModel",r.usuario.clave),h.xp6(4),h.Q6J("ngIf",r.claveInvalida),h.xp6(4),h.Q6J("ngModel",r.claveConfirmada),h.xp6(4),h.Q6J("ngIf",r.claveNoConcuerda))},dependencies:[Jn,ql,Vx,c0,gA,Ix,Mb,Sb],styles:[oR,oR]}),n})()}];let a1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ew.forRoot(o1),ew]}),n})(),u1=(()=>{class n{constructor(t){this.title="Sprint1"}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vb))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[g]}),n})();const aR_firebase={projectId:"sprint2-bacchetta-labo4",appId:"1:101983095675:web:744fc566691e8b3c514bde",storageBucket:"sprint2-bacchetta-labo4.appspot.com",locationId:"us-central",apiKey:"AIzaSyAQpXHL1YmrD_u4E1Flqvdsfi0LuIURuH8",authDomain:"sprint2-bacchetta-labo4.firebaseapp.com",messagingSenderId:"101983095675",measurementId:"G-4H8XZNXTJE"};var uR=R(655),c1=R(7982);const lR="firebase_screen_id",NA="outlet",p0="screen_class",dR="screen_name";let E1=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const OA={},b1=n=>{const e=[n[p0],n[NA]].join("#");if(OA.hasOwnProperty(e))return OA[e];{const t=E1++;return OA[e]=t,t}},M1=new h.OlP("angularfire2.analytics.analyticsCollectionEnabled"),x1=new h.OlP("angularfire2.analytics.appVersion"),R1=new h.OlP("angularfire2.analytics.appName"),N1=new h.OlP("angularfire2.analytics.debugMode"),O1=new h.OlP("angularfire2.analytics.config"),xb="dataLayer";let g0=(()=>{class n{constructor(t,r,o,u,d,m,w,b,T){if(this.analyticsInitialized=new Promise(()=>{}),function Po(n){return n===Ws}(w)){window[xb]=window[xb]||[];const F=(...Se)=>"config"===Se[0]&&"firebase"===Se[2].origin&&(this.measurementId=Se[1],!0),Y=Se=>{window.gtag=(...Re)=>{Se&&Se(...Re),"event"===Re[0]&&Re[2].send_to===this.measurementId&&(u&&(Re[2].app_name=u),o&&(Re[2].app_version=o)),d&&typeof console<"u"&&console.info(...Re),function(...Tt){window[xb].push(arguments)}(...Re)}};window[xb].some(F)?(this.analyticsInitialized=Promise.resolve(),Y()):this.analyticsInitialized=new Promise(Se=>{Y((...Re)=>{F(...Re)&&Se()})}),m&&this.updateConfig(m),d&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const S=ft(void 0).pipe((0,s0.Q)(T.outsideAngular),Vn(c1.Gb),Vn(F=>F?b.runOutsideAngular(()=>R.e(643).then(R.bind(R,8643))):fs.E),(0,gt.U)(()=>(0,Ri.cc)("analytics","AngularFireAnalytics",t.name,()=>{const F=t.analytics();return!1===r&&F.setAnalyticsCollectionEnabled(!1),F},[t,r,m,d])),HT({bufferSize:1,refCount:!1}));return(0,Ri.pX)(this,S,b)}updateConfig(t){return(0,uR.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri.Ot),h.LFG(M1,8),h.LFG(x1,8),h.LFG(R1,8),h.LFG(N1,8),h.LFG(O1,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Un.HU))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fR=(()=>{class n{constructor(t,r,o,u){if(this.disposables=[],mb.Z.registerVersion("angularfire",Un.q4.full,"compat-user-tracking"),xr(r))this.initialized=Promise.resolve();else{let d;this.initialized=u.runOutsideAngular(()=>new Promise(m=>d=m)),this.disposables=[o.authState.subscribe(m=>{t.setUserId(m?.uid),d()}),o.credential.subscribe(m=>{if(m){const w=m.user.isAnonymous?"anonymous":m.additionalUserInfo.providerId;m.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:w}),t.logEvent("login",{method:w})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g0),h.LFG(h.Lbi),h.LFG(cA),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),B1=(()=>{class n{constructor(t,r,o,u,d,m){if(mb.Z.registerVersion("angularfire",Un.q4.full,"compat-screen-tracking"),!r||!t)return this;d.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Ur(o=>o instanceof Kp)).pipe(Vn(o=>{var u;const m=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,Y=>Y.replace("://",":///"))).root.children[o.snapshot.outlet])||void 0===u?void 0:u.toString())||"",w=n.routerState.root.children.map(Y=>Y).find(Y=>Y.outlet===o.snapshot.outlet);if(!w)return ft(null);let b=w;for(;b.firstChild;)b=b.firstChild;const T=b.pathFromRoot.map(Y=>{var te;return null===(te=Y.routeConfig)||void 0===te?void 0:te.path}).filter(Y=>Y).join("/")||"/",S={[dR]:T,page_path:`/${m}`,firebase_event_origin:"auto",firebase_screen:T,[NA]:o.snapshot.outlet};e&&(S.page_title=e.getTitle());let F=w.component;if(F){if(F===M){let Y=o.snapshot;for(;Y.firstChild;)Y=Y.firstChild;F=Y.component}}else F=o.snapshot.component;if("string"==typeof F)return ft(Object.assign(Object.assign({},S),{[p0]:F}));if(F){const Y=t.resolveComponentFactory(F);return ft(Object.assign(Object.assign({},S),{[p0]:Y.selector}))}return ft(null)}),Ur(o=>!!o),(0,gt.U)(o=>Object.assign({firebase_screen_class:o[p0],[lR]:b1(o)},o)),function l1(n,e,t,r){return(0,Nr.e)((o,u)=>{let d;e&&"function"!=typeof e?({duration:t,element:d,connector:r}=e):d=e;const m=new Map,w=te=>{m.forEach(te),te(u)},b=te=>w(Se=>Se.error(te));let T=0,S=!1;const F=new Er.Q(u,te=>{try{const Se=n(te);let Re=m.get(Se);if(!Re){m.set(Se,Re=r?r():new Ai.x);const Tt=function Y(te,Se){const Re=new Yr.y(Tt=>{T++;const Mt=Se.subscribe(Tt);return()=>{Mt.unsubscribe(),0==--T&&S&&F.unsubscribe()}});return Re.key=te,Re}(Se,Re);if(u.next(Tt),t){const Mt=(0,Er.x)(Re,()=>{Re.complete(),Mt?.unsubscribe()},void 0,void 0,()=>m.delete(Se));F.add((0,bl.Xf)(t(Tt)).subscribe(Mt))}}Re.next(d?d(te):te)}catch(Se){b(Se)}},()=>w(te=>te.complete()),b,()=>m.clear(),()=>(S=!0,0===T));o.subscribe(F)})}(o=>o[NA]),(0,br.z)(o=>o.pipe(iw((u,d)=>JSON.stringify(u)===JSON.stringify(d)),Ga(void 0),Uh(),(0,gt.U)(([u,d])=>u?Object.assign({firebase_previous_class:u[p0],firebase_previous_screen:u[dR],firebase_previous_id:u[lR]},d):d)))))(r,o,u).pipe(Vn(w=>(0,uR.mG)(this,void 0,void 0,function*(){return m&&(yield m.initialized),yield t.logEvent("screen_view",w)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g0),h.LFG(yr,8),h.LFG(eo,8),h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(fR,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),j1=(()=>{class n{constructor(t,r,o){mb.Z.registerVersion("angularfire",Un.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(g0),h.LFG(B1,8),h.LFG(fR,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[g0]}),n})(),$1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[u1]}),n.\u0275inj=h.cJS({imports:[oh,a1,Ri.hO.initializeApp(aR_firebase),j1,$O,BP]}),n})();(0,h.G48)(),gl().bootstrapModule($1).catch(n=>console.error(n))},7982:(pt,Me,R)=>{R.d(Me,{Gb:()=>h.Gb});var h=R(579)},5867:(pt,Me,R)=>{R.d(Me,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=R(9681);(0,h.registerVersion)("firebase","9.9.4","app")},127:(pt,Me,R)=>{R.d(Me,{Z:()=>h.Z});var h=R(3942);h.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(pt,Me,R)=>{R.r(Me);var h=R(5861),Q=R(3942),P=R(2090),ne=R(9681),de=R(655),pe=R(1877),oe=R(4859);const Ie=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new pe.Yd("@firebase/auth");function rt(y,...f){ot.logLevel<=pe.in.ERROR&&ot.error(`Auth (${ne.SDK_VERSION}): ${y}`,...f)}function xe(y,...f){throw Ue(y,...f)}function we(y,...f){return Ue(y,...f)}function Ce(y,f,g){const _=Object.assign(Object.assign({},Je()),{[f]:g});return new P.LL("auth","Firebase",_).create(f,{appName:y.name})}function Ge(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&xe(y,"argument-error"),Ce(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...f){if("string"!=typeof y){const g=f[0],_=[...f.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(g,..._)}return me.create(y,...f)}function L(y,f,...g){if(!y)throw Ue(f,...g)}function ve(y){const f="INTERNAL ASSERTION FAILED: "+y;throw rt(f),new Error(f)}function Z(y,f){y||ve(f)}const J=new Map;function ie(y){Z(y instanceof Function,"Expected a class definition");let f=J.get(y);return f?(Z(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,J.set(y,f),f)}function Ve(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ht(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class on{constructor(f,g){this.shortDelay=f,this.longDelay=g,Z(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Pt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kn(y,f){Z(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class dn{static initialize(f,g,_){this.fetchImpl=f,g&&(this.headersImpl=g),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gn=new on(3e4,6e4);function bt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ut(y,f,g,_){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,h.Z)(function*(y,f,g,_,D={}){return qr(y,D,(0,h.Z)(function*(){let M={},G={};_&&("GET"===f?G=_:M={body:JSON.stringify(_)});const le=(0,P.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),qe=yield y._getAdditionalHeaders();return qe["Content-Type"]="application/json",y.languageCode&&(qe["X-Firebase-Locale"]=y.languageCode),dn.fetch()(sr(y,y.config.apiHost,g,le),Object.assign({method:f,headers:qe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function qr(y,f,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},en),f);try{const D=new Ar(y),M=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const G=yield M.json();if("needConfirmation"in G)throw or(y,"account-exists-with-different-credential",G);if(M.ok&&!("errorMessage"in G))return G;{const le=M.ok?G.errorMessage:G.error.message,[qe,st]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw or(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===qe)throw or(y,"email-already-in-use",G);if("USER_DISABLED"===qe)throw or(y,"user-disabled",G);const At=_[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw Ce(y,At,st);xe(y,At)}}catch(D){if(D instanceof P.ZR)throw D;xe(y,"network-request-failed")}})).apply(this,arguments)}function In(y,f,g,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(y,f,g,_,D={}){const M=yield Ut(y,f,g,_,D);return"mfaPendingCredential"in M&&xe(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function sr(y,f,g,_){const D=`${f}${g}?${_}`;return y.config.emulator?Kn(y.config,D):`${y.config.apiScheme}://${D}`}class Ar{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,_)=>{this.timer=setTimeout(()=>_(we(this.auth,"network-request-failed")),Gn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(y,f,g){const _={appName:y.name};g.email&&(_.email=g.email),g.phoneNumber&&(_.phoneNumber=g.phoneNumber);const D=we(y,f,_);return D.customData._tokenResponse=g,D}function Xe(){return(Xe=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function vn(y,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function yn(y,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Sn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function rn(){return(rn=(0,h.Z)(function*(y,f=!1){const g=(0,P.m9)(y),_=yield g.getIdToken(f),D=at(_);L(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const M="object"==typeof D.firebase?D.firebase:void 0,G=M?.sign_in_provider;return{claims:D,token:_,authTime:Sn(mt(D.auth_time)),issuedAtTime:Sn(mt(D.iat)),expirationTime:Sn(mt(D.exp)),signInProvider:G||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function mt(y){return 1e3*Number(y)}function at(y){var f;const[g,_,D]=y.split(".");if(void 0===g||void 0===_||void 0===D)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,P.tV)(_);return M?JSON.parse(M):(rt("Failed to decode base64 JWT payload"),null)}catch(M){return rt("Caught error parsing JWT payload as JSON",null===(f=M)||void 0===f?void 0:f.toString()),null}}function an(y,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(_){throw _ instanceof P.ZR&&Qn(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function Qn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ct{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const _=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),_)}iteration(){var f=this;return(0,h.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(g=_)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Kr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sn(this.lastLoginAt),this.creationTime=Sn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kt(y){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(y){var f;const g=y.auth,_=yield y.getIdToken(),D=yield an(y,yn(g,{idToken:_}));L(D?.users.length,g,"internal-error");const M=D.users[0];y._notifyReloadListener(M);const G=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?k(M.providerUserInfo):[],le=U(y.providerData,G),At=!!y.isAnonymous&&!(y.email&&M.passwordHash||le?.length),_t={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:le,metadata:new Kr(M.createdAt,M.lastLoginAt),isAnonymous:At};Object.assign(y,_t)})).apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(y){const f=(0,P.m9)(y);yield Kt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function U(y,f){return[...y.filter(_=>!f.some(D=>D.providerId===_.providerId)),...f]}function k(y){return y.map(f=>{var{providerId:g}=f,_=(0,de._T)(f,["providerId"]);return{providerId:g,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function H(){return(H=(0,h.Z)(function*(y,f){const g=yield qr(y,{},(0,h.Z)(function*(){const _=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:M}=y.config,G=sr(y,D,"/v1/token",`key=${M}`),le=yield y._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",dn.fetch()(G,{method:"POST",headers:le,body:_})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){L(f.idToken,"internal-error"),L(typeof f.idToken<"u","internal-error"),L(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Lt(y){const f=at(y);return L(f,"internal-error"),L(typeof f.exp<"u","internal-error"),L(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var _=this;return(0,h.Z)(function*(){return L(!_.accessToken||_.refreshToken,f,"user-token-expired"),g||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(f,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var _=this;return(0,h.Z)(function*(){const{accessToken:D,refreshToken:M,expiresIn:G}=yield function B(y,f){return H.apply(this,arguments)}(f,g);_.updateTokensAndExpiration(D,M,Number(G))})()}updateTokensAndExpiration(f,g,_){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(f,g){const{refreshToken:_,accessToken:D,expirationTime:M}=g,G=new Ae;return _&&(L("string"==typeof _,"internal-error",{appName:f}),G.refreshToken=_),D&&(L("string"==typeof D,"internal-error",{appName:f}),G.accessToken=D),M&&(L("number"==typeof M,"internal-error",{appName:f}),G.expirationTime=M),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ae,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ze(y,f){L("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class it{constructor(f){var{uid:g,auth:_,stsTokenManager:D}=f,M=(0,de._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ct(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=_,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Kr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const _=yield an(g,g.stsTokenManager.getToken(g.auth,f));return L(_,g.auth,"internal-error"),g.accessToken!==_&&(g.accessToken=_,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),_})()}getIdTokenResult(f){return function On(y){return rn.apply(this,arguments)}(this,f)}reload(){return function qt(y){return z.apply(this,arguments)}(this)}_assign(f){this!==f&&(L(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new it(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var _=this;return(0,h.Z)(function*(){let D=!1;f.idToken&&f.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(f),D=!0),g&&(yield Kt(_)),yield _.auth._persistUserIfCurrent(_),D&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield an(f,function hi(y,f){return Xe.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var _,D,M,G,le,qe,st,At;const _t=null!==(_=g.displayName)&&void 0!==_?_:void 0,mr=null!==(D=g.email)&&void 0!==D?D:void 0,qi=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,lc=null!==(G=g.photoURL)&&void 0!==G?G:void 0,dc=null!==(le=g.tenantId)&&void 0!==le?le:void 0,Br=null!==(qe=g._redirectEventId)&&void 0!==qe?qe:void 0,Rh=null!==(st=g.createdAt)&&void 0!==st?st:void 0,Ka=null!==(At=g.lastLoginAt)&&void 0!==At?At:void 0,{uid:hc,emailVerified:Ay,isAnonymous:tg,providerData:yo,stsTokenManager:Sy}=g;L(hc&&Sy,f,"internal-error");const R0=Ae.fromJSON(this.name,Sy);L("string"==typeof hc,f,"internal-error"),ze(_t,f.name),ze(mr,f.name),L("boolean"==typeof Ay,f,"internal-error"),L("boolean"==typeof tg,f,"internal-error"),ze(qi,f.name),ze(lc,f.name),ze(dc,f.name),ze(Br,f.name),ze(Rh,f.name),ze(Ka,f.name);const ea=new it({uid:hc,auth:f,email:mr,emailVerified:Ay,displayName:_t,isAnonymous:tg,photoURL:lc,phoneNumber:qi,tenantId:dc,stsTokenManager:R0,createdAt:Rh,lastLoginAt:Ka});return yo&&Array.isArray(yo)&&(ea.providerData=yo.map(jl=>Object.assign({},jl))),Br&&(ea._redirectEventId=Br),ea}static _fromIdTokenResponse(f,g,_=!1){return(0,h.Z)(function*(){const D=new Ae;D.updateFromServerResponse(g);const M=new it({uid:g.localId,auth:f,stsTokenManager:D,isAnonymous:_});return yield Kt(M),M})()}}const tn=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,_){var D=this;return(0,h.Z)(function*(){D.storage[g]=_})()}_get(g){var _=this;return(0,h.Z)(function*(){const D=_.storage[g];return void 0===D?null:D})()}_remove(g){var _=this;return(0,h.Z)(function*(){delete _.storage[g]})()}_addListener(g,_){}_removeListener(g,_){}}return y.type="NONE",y})();function re(y,f,g){return`firebase:${y}:${f}:${g}`}class ce{constructor(f,g,_){this.persistence=f,this.auth=g,this.userKey=_;const{config:D,name:M}=this.auth;this.fullUserKey=re(this.userKey,D.apiKey,M),this.fullPersistenceKey=re("persistence",D.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?it._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const _=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,_?g.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,_="authUser"){return(0,h.Z)(function*(){if(!g.length)return new ce(ie(tn),f,_);const D=(yield Promise.all(g.map(function(){var st=(0,h.Z)(function*(At){if(yield At._isAvailable())return At});return function(At){return st.apply(this,arguments)}}()))).filter(st=>st);let M=D[0]||ie(tn);const G=re(_,f.config.apiKey,f.name);let le=null;for(const st of g)try{const At=yield st._get(G);if(At){const _t=it._fromJSON(f,At);st!==M&&(le=_t),M=st;break}}catch{}const qe=D.filter(st=>st._shouldAllowMigration);return M._shouldAllowMigration&&qe.length?(M=qe[0],le&&(yield M._set(G,le.toJSON())),yield Promise.all(g.map(function(){var st=(0,h.Z)(function*(At){if(At!==M)try{yield At._remove(G)}catch{}});return function(At){return st.apply(this,arguments)}}())),new ce(M,f,_)):new ce(M,f,_)})()}}function Ee(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(wt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Le(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ne(f))return"Blackberry";if(nt(f))return"Webos";if(We(f))return"Safari";if((f.includes("chrome/")||vt(f))&&!f.includes("edge/"))return"Chrome";if(xt(f))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function Le(y=(0,P.z$)()){return/firefox\//i.test(y)}function We(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function vt(y=(0,P.z$)()){return/crios\//i.test(y)}function wt(y=(0,P.z$)()){return/iemobile/i.test(y)}function xt(y=(0,P.z$)()){return/android/i.test(y)}function Ne(y=(0,P.z$)()){return/blackberry/i.test(y)}function nt(y=(0,P.z$)()){return/webos/i.test(y)}function Rt(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function fi(y=(0,P.z$)()){return Rt(y)||xt(y)||nt(y)||Ne(y)||/windows phone/i.test(y)||wt(y)}function Ei(y,f=[]){let g;switch(y){case"Browser":g=Ee((0,P.z$)());break;case"Worker":g=`${Ee((0,P.z$)())}-${y}`;break;default:g=y}const _=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ne.SDK_VERSION}/${_}`}class Bi{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const _=M=>new Promise((G,le)=>{try{G(f(M))}catch(qe){le(qe)}});_.onAbort=g,this.queue.push(_);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,h.Z)(function*(){var _;if(g.auth.currentUser===f)return;const D=[];try{for(const M of g.queue)yield M(f),M.onAbort&&D.push(M.onAbort)}catch(M){D.reverse();for(const G of D)try{G()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=M)||void 0===_?void 0:_.message})}})()}}class kt{constructor(f,g,_){this.app=f,this.heartbeatServiceProvider=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ye(this),this.idTokenSubscription=new ye(this),this.beforeStateQueue=new Bi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(f,g){var _=this;return g&&(this._popupRedirectResolver=ie(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var D,M;if(!_._deleted&&(_.persistenceManager=yield ce.create(_,f),!_._deleted)){if(null!==(D=_._popupRedirectResolver)&&void 0!==D&&D._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(g),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var _;const D=yield g.assertedPersistence.getCurrentUser();let M=D,G=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const le=null===(_=g.redirectUser)||void 0===_?void 0:_._redirectEventId,qe=M?._redirectEventId,st=yield g.tryRedirectSignIn(f);(!le||le===qe)&&st?.user&&(M=st.user,G=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(M)}catch(le){M=D,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(le))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return L(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let _=null;try{_=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){var _;try{yield Kt(f)}catch(D){if("auth/network-request-failed"!==(null===(_=D)||void 0===_?void 0:_.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const _=f?(0,P.m9)(f):null;return _&&L(_.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(_&&_._clone(g))})()}_updateCurrentUser(f,g=!1){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return f&&L(_.tenantId===f.tenantId,_,"tenant-id-mismatch"),g||(yield _.beforeStateQueue.runMiddleware(f)),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(f),_.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,g,_){return this.registerStateListener(this.authStateSubscription,f,g,_)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,_){return this.registerStateListener(this.idTokenSubscription,f,g,_)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var _=this;return(0,h.Z)(function*(){const D=yield _.getOrInitRedirectPersistenceManager(g);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const _=f&&ie(f)||g._popupRedirectResolver;L(_,g,"argument-error"),g.redirectPersistenceManager=yield ce.create(g,[ie(_._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var _,D;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(_=g._currentUser)||void 0===_?void 0:_._redirectEventId)===f?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,_,D){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return L(G,this,"internal-error"),G.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,_,D):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ei(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var g;const _={"X-Client-Version":f.clientVersion};f.app.options.appId&&(_["X-Firebase-gmpid"]=f.app.options.appId);const D=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return D&&(_["X-Firebase-Client"]=D),_})()}}function q(y){return(0,P.m9)(y)}class ye{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ut(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Xt(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class hn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ve("not implemented")}_getIdTokenResponse(f){return ve("not implemented")}_linkToIdToken(f,g){return ve("not implemented")}_getReauthenticationResolver(f){return ve("not implemented")}}function Lr(y,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:resetPassword",bt(y,f))})).apply(this,arguments)}function gn(y,f){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Du(y,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",bt(y,f))})).apply(this,arguments)}function Cs(){return(Cs=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signInWithPassword",bt(y,f))})).apply(this,arguments)}function ji(y,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:sendOobCode",bt(y,f))})).apply(this,arguments)}function Jn(y,f){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(y,f){return ji(y,f)})).apply(this,arguments)}function Sr(y,f){return gr.apply(this,arguments)}function gr(){return(gr=(0,h.Z)(function*(y,f){return ji(y,f)})).apply(this,arguments)}function zs(y,f){return ss.apply(this,arguments)}function ss(){return(ss=(0,h.Z)(function*(y,f){return ji(y,f)})).apply(this,arguments)}function Da(y,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(y,f){return ji(y,f)})).apply(this,arguments)}function Jc(){return(Jc=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signInWithEmailLink",bt(y,f))})).apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signInWithEmailLink",bt(y,f))})).apply(this,arguments)}class Aa extends hn{constructor(f,g,_,D=null){super("password",_),this._email=f,this._password=g,this._tenantId=D}static _fromEmailAndPassword(f,g){return new Aa(f,g,"password")}static _fromEmailAndCode(f,g,_=null){return new Aa(f,g,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function No(y,f){return Cs.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Qc(y,f){return Jc.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:xe(f,"internal-error")}})()}_linkToIdToken(f,g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return gn(f,{idToken:g,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Tu(y,f){return Ta.apply(this,arguments)}(f,{idToken:g,email:_._email,oobCode:_._password});default:xe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ar(y,f){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signInWithIdp",bt(y,f))})).apply(this,arguments)}class bi extends hn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new bi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):xe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:D}=g,M=(0,de._T)(g,["providerId","signInMethod"]);if(!_||!D)return null;const G=new bi(_,D);return G.idToken=M.idToken||void 0,G.accessToken=M.accessToken||void 0,G.secret=M.secret,G.nonce=M.nonce,G.pendingToken=M.pendingToken||null,G}_getIdTokenResponse(f){return ar(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,ar(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ar(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.xO)(g)}return f}}function el(y,f){return tl.apply(this,arguments)}function tl(){return(tl=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:sendVerificationCode",bt(y,f))})).apply(this,arguments)}function rl(){return(rl=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",bt(y,f))})).apply(this,arguments)}function Wd(){return(Wd=(0,h.Z)(function*(y,f){const g=yield In(y,"POST","/v1/accounts:signInWithPhoneNumber",bt(y,f));if(g.temporaryProof)throw or(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const il={USER_NOT_FOUND:"user-not-found"};function qd(){return(qd=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",bt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),il)})).apply(this,arguments)}class os extends hn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new os({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new os({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function nl(y,f){return rl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Zm(y,f){return Wd.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Km(y,f){return qd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:_,verificationCode:D}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:_,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:_,phoneNumber:D,temporaryProof:M}=f;return _||g||D||M?new os({verificationId:g,verificationCode:_,phoneNumber:D,temporaryProof:M}):null}}class Sa{constructor(f){var g,_,D,M,G,le;const qe=(0,P.zd)((0,P.pd)(f)),st=null!==(g=qe.apiKey)&&void 0!==g?g:null,At=null!==(_=qe.oobCode)&&void 0!==_?_:null,_t=function Au(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=qe.mode)&&void 0!==D?D:null);L(st&&At&&_t,"argument-error"),this.apiKey=st,this.operation=_t,this.code=At,this.continueUrl=null!==(M=qe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(G=qe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(le=qe.tenantId)&&void 0!==le?le:null}static parseLink(f){const g=function wp(y){const f=(0,P.zd)((0,P.pd)(y)).link,g=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,_=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(_?(0,P.zd)((0,P.pd)(_)).link:null)||_||g||f||y}(f);try{return new Sa(g)}catch{return null}}}let Ci=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,_){return Aa._fromEmailAndPassword(g,_)}static credentialWithLink(g,_){const D=Sa.parseLink(_);return L(D,"argument-error"),Aa._fromEmailAndCode(g,D.code,D.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class as{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class us extends as{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ds extends us{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return L("providerId"in g&&"signInMethod"in g,"argument-error"),bi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return L(f.idToken||f.accessToken,"argument-error"),bi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ds.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ds.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:_,oauthTokenSecret:D,pendingToken:M,nonce:G,providerId:le}=f;if(!_&&!D&&!g&&!M||!le)return null;try{return new Ds(le)._credential({idToken:g,accessToken:_,nonce:G,pendingToken:M})}catch{return null}}}let Ma=(()=>{class y extends us{constructor(){super("facebook.com")}static credential(g){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),xa=(()=>{class y extends us{constructor(){super("google.com"),this.addScope("profile")}static credential(g,_){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:D}=g;if(!_&&!D)return null;try{return y.credential(_,D)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Su=(()=>{class y extends us{constructor(){super("github.com")}static credential(g){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class cs extends hn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return ar(f,this.buildRequest())}_linkToIdToken(f,g){const _=this.buildRequest();return _.idToken=g,ar(f,_)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ar(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:_,signInMethod:D,pendingToken:M}=g;return _&&D&&M&&_===D?new cs(_,M):null}static _create(f,g){return new cs(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qs extends as{constructor(f){L(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return qs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return qs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=cs.fromJSON(f);return L(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:_}=f;if(!g||!_)return null;try{return cs._create(_,g)}catch{return null}}}let Mr=(()=>{class y extends us{constructor(){super("twitter.com")}static credential(g,_){return bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:_})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:_,oauthTokenSecret:D}=g;if(!_||!D)return null;try{return y.credential(_,D)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Zs(y,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signUp",bt(y,f))})).apply(this,arguments)}class xr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,_,D=!1){return(0,h.Z)(function*(){const M=yield it._fromIdTokenResponse(f,_,D),G=Ip(_);return new xr({user:M,providerId:G,_tokenResponse:_,operationType:g})})()}static _forOperation(f,g,_){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(_,!0);const D=Ip(_);return new xr({user:f,providerId:D,_tokenResponse:_,operationType:g})})()}}function Ip(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Fn(){return(Fn=(0,h.Z)(function*(y){var f;const g=q(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new xr({user:g.currentUser,providerId:null,operationType:"signIn"});const _=yield Zs(g,{returnSecureToken:!0}),D=yield xr._fromIdTokenResponse(g,"signIn",_,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class Ra extends P.ZR{constructor(f,g,_,D){var M;super(g.code,g.message),this.operationType=_,this.user=D,Object.setPrototypeOf(this,Ra.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(f,g,_,D){return new Ra(f,g,_,D)}}function Ks(y,f,g,_){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Ra._fromErrorAndOperation(y,M,f,_):M})}function Ts(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function sl(){return(sl=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y);yield Zt(!0,g,f);const{providerUserInfo:_}=yield vn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),D=Ts(_||[]);return g.providerData=g.providerData.filter(M=>D.has(M.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function gi(y,f){return As.apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(y,f,g=!1){const _=yield an(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return xr._forOperation(y,"link",_)})).apply(this,arguments)}function Zt(y,f,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(y,f,g){yield Kt(f);const D=!1===y?"provider-already-linked":"no-such-provider";L(Ts(f.providerData).has(g)===y,f.auth,D)})).apply(this,arguments)}function Ys(y,f){return xu.apply(this,arguments)}function xu(){return(xu=(0,h.Z)(function*(y,f,g=!1){var _;const{auth:D}=y,M="reauthenticate";try{const G=yield an(y,Ks(D,M,f,y),g);L(G.idToken,D,"internal-error");const le=at(G.idToken);L(le,D,"internal-error");const{sub:qe}=le;return L(y.uid===qe,D,"user-mismatch"),xr._forOperation(y,M,G)}catch(G){throw"auth/user-not-found"===(null===(_=G)||void 0===_?void 0:_.code)&&xe(D,"user-mismatch"),G}})).apply(this,arguments)}function $i(y,f){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.Z)(function*(y,f,g=!1){const _="signIn",D=yield Ks(y,_,f),M=yield xr._fromIdTokenResponse(y,_,D);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function ko(y,f){return x.apply(this,arguments)}function x(){return(x=(0,h.Z)(function*(y,f){return $i(q(y),f)})).apply(this,arguments)}function N(y,f){return W.apply(this,arguments)}function W(){return(W=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y);return yield Zt(!1,g,f.providerId),gi(g,f)})).apply(this,arguments)}function ae(y,f){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,h.Z)(function*(y,f){return Ys((0,P.m9)(y),f)})).apply(this,arguments)}function Ke(y,f){return ct.apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(y,f){return In(y,"POST","/v1/accounts:signInWithCustomToken",bt(y,f))})).apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(y,f){const g=q(y),_=yield Ke(g,{token:f,returnSecureToken:!0}),D=yield xr._fromIdTokenResponse(g,"signIn",_);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class De{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?yt._fromServerResponse(f,g):xe(f,"internal-error")}}class yt extends De{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new yt(g)}}function Ot(y,f,g){var _;L((null===(_=g.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),L(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(L(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(L(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Tn(){return(Tn=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D={requestType:"PASSWORD_RESET",email:f};g&&Ot(_,D,g),yield Sr(_,D)})).apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(y,f,g){yield Lr((0,P.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Oa(){return(Oa=(0,h.Z)(function*(y,f){yield Du((0,P.m9)(y),{oobCode:f})})).apply(this,arguments)}function Lo(y,f){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y),_=yield Lr(g,{oobCode:f}),D=_.requestType;switch(L(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":L(_.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":L(_.mfaInfo,g,"internal-error");default:L(_.email,g,"internal-error")}let M=null;return _.mfaInfo&&(M=De._fromServerResponse(q(g),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:D}})).apply(this,arguments)}function xs(){return(xs=(0,h.Z)(function*(y,f){const{data:g}=yield Lo((0,P.m9)(y),f);return g.email})).apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(y,f,g){const _=q(y),D=yield Zs(_,{returnSecureToken:!0,email:f,password:g}),M=yield xr._fromIdTokenResponse(_,"signIn",D);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}function Vo(){return(Vo=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D={requestType:"EMAIL_SIGNIN",email:f};L(g.handleCodeInApp,_,"argument-error"),g&&Ot(_,D,g),yield zs(_,D)})).apply(this,arguments)}function Kd(){return(Kd=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D=Ci.credentialWithLink(f,g||Ve());return L(D._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),ko(_,D)})).apply(this,arguments)}function v0(y,f){return Ep.apply(this,arguments)}function Ep(){return(Ep=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:createAuthUri",bt(y,f))})).apply(this,arguments)}function Ru(){return(Ru=(0,h.Z)(function*(y,f){const _={identifier:f,continueUri:ht()?Ve():"http://localhost"},{signinMethods:D}=yield v0((0,P.m9)(y),_);return D||[]})).apply(this,arguments)}function Nu(){return(Nu=(0,h.Z)(function*(y,f){const g=(0,P.m9)(y),D={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ot(g.auth,D,f);const{email:M}=yield Jn(g.auth,D);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function Yd(){return(Yd=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ot(_.auth,M,g);const{email:G}=yield Da(_.auth,M);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function Cp(y,f){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,h.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Jd(){return(Jd=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const _=(0,P.m9)(y),M={idToken:yield _.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},G=yield an(_,Cp(_.auth,M));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const le=_.providerData.find(({providerId:qe})=>"password"===qe);le&&(le.displayName=_.displayName,le.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function Pa(y,f,g){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,h.Z)(function*(y,f,g){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const G=yield an(y,gn(_,M));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class mi{constructor(f,g,_={}){this.isNewUser=f,this.providerId=g,this.profile=_}}class Mn extends mi{constructor(f,g,_,D){super(f,g,_),this.username=D}}class ty extends mi{constructor(f,g){super(f,"facebook.com",g)}}class ny extends Mn{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class ry extends mi{constructor(f,g){super(f,"google.com",g)}}class iy extends Mn{constructor(f,g,_){super(f,"twitter.com",g,_)}}function al(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function wr(y){var f,g;if(!y)return null;const{providerId:_}=y,D=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(g=null===(f=at(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new mi(M,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new ty(M,D);case"github.com":return new ny(M,D);case"google.com":return new ry(M,D);case"twitter.com":return new iy(M,D,y.screenName||null);case"custom":case"anonymous":return new mi(M,null);default:return new mi(M,_,D)}}(g)}class Bo{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Bo("enroll",f)}static _fromMfaPendingCredential(f){return new Bo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,_;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Bo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(_=f.multiFactorSession)&&void 0!==_&&_.idToken)return Bo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class rh{constructor(f,g,_){this.session=f,this.hints=g,this.signInResolver=_}static _fromError(f,g){const _=q(f),D=g.customData._serverResponse,M=(D.mfaInfo||[]).map(le=>De._fromServerResponse(_,le));L(D.mfaPendingCredential,_,"internal-error");const G=Bo._fromMfaPendingCredential(D.mfaPendingCredential);return new rh(G,M,function(){var le=(0,h.Z)(function*(qe){const st=yield qe._process(_,G);delete D.mfaInfo,delete D.mfaPendingCredential;const At=Object.assign(Object.assign({},D),{idToken:st.idToken,refreshToken:st.refreshToken});switch(g.operationType){case"signIn":const _t=yield xr._fromIdTokenResponse(_,g.operationType,At);return yield _._updateCurrentUser(_t.user),_t;case"reauthenticate":return L(g.user,_,"internal-error"),xr._forOperation(g.user,g.operationType,At);default:xe(_,"internal-error")}});return function(qe){return le.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function ih(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:start",bt(y,f))}class sy{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(_=>De._fromServerResponse(f.auth,_)))})}static _fromUser(f){return new sy(f)}getSession(){var f=this;return(0,h.Z)(function*(){return Bo._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var _=this;return(0,h.Z)(function*(){const D=f,M=yield _.getSession(),G=yield an(_.user,D._process(_.user.auth,M,g));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){var _;const D="string"==typeof f?f:f.uid,M=yield g.user.getIdToken(),G=yield an(g.user,function Ap(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:withdraw",bt(y,f))}(g.user.auth,{idToken:M,mfaEnrollmentId:D}));g.enrolledFactors=g.enrolledFactors.filter(({uid:le})=>le!==D),yield g.user._updateTokensIfNecessary(G);try{yield g.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(_=le)||void 0===_?void 0:_.code))throw le}})()}}const dl=new WeakMap,ku="__sak";class hl{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ku,"1"),this.storage.removeItem(ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vu=(()=>{class y extends hl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,_)=>this.onStorageEvent(g,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Fu(){const y=(0,P.z$)();return We(y)||Rt(y)}()&&function _n(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fi(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const _ of Object.keys(this.listeners)){const D=this.storage.getItem(_),M=this.localCache[_];D!==M&&g(_,M,D)}}onStorageEvent(g,_=!1){if(!g.key)return void this.forAllChangedKeys((le,qe,st)=>{this.notifyListeners(le,st)});const D=g.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(D);if(g.newValue!==le)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!_)return}const M=()=>{const le=this.storage.getItem(D);!_&&this.localCache[D]===le||this.notifyListeners(D,le)},G=this.storage.getItem(D);!function sn(){return(0,P.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,_){this.localCache[g]=_;const D=this.listeners[g];if(D)for(const M of Array.from(D))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,_,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:_,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,_){var D=()=>super._set,M=this;return(0,h.Z)(function*(){yield D().call(M,g,_),M.localCache[g]=JSON.stringify(_)})()}_get(g){var _=()=>super._get,D=this;return(0,h.Z)(function*(){const M=yield _().call(D,g);return D.localCache[g]=JSON.stringify(M),M})()}_remove(g){var _=()=>super._remove,D=this;return(0,h.Z)(function*(){yield _().call(D,g),delete D.localCache[g]})()}}return y.type="LOCAL",y})(),ds=(()=>{class y extends hl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,_){}_removeListener(g,_){}}return y.type="SESSION",y})();let xp=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const _=this.receivers.find(M=>M.isListeningto(g));if(_)return _;const D=new y(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var _=this;return(0,h.Z)(function*(){const D=g,{eventId:M,eventType:G,data:le}=D.data,qe=_.handlersMap[G];if(!qe?.size)return;D.ports[0].postMessage({status:"ack",eventId:M,eventType:G});const st=Array.from(qe).map(function(){var _t=(0,h.Z)(function*(mr){return mr(D.origin,le)});return function(mr){return _t.apply(this,arguments)}}()),At=yield function fl(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(_){return{fulfilled:!1,reason:_}}});return function(g){return f.apply(this,arguments)}}()))}(st);D.ports[0].postMessage({status:"done",eventId:M,eventType:G,response:At})})()}_subscribe(g,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(_)}_unsubscribe(g,_){this.handlersMap[g]&&_&&this.handlersMap[g].delete(_),(!_||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Bu(y="",f=10){let g="";for(let _=0;_<f;_++)g+=Math.floor(10*Math.random());return y+g}class oy{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,_=50){var D=this;return(0,h.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let G,le;return new Promise((qe,st)=>{const At=Bu("",20);M.port1.start();const _t=setTimeout(()=>{st(new Error("unsupported_event"))},_);le={messageChannel:M,onMessage(mr){const qi=mr;if(qi.data.eventId===At)switch(qi.data.status){case"ack":clearTimeout(_t),G=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),qe(qi.data.response);break;default:clearTimeout(_t),clearTimeout(G),st(new Error("invalid_response"))}}},D.handlers.add(le),M.port1.addEventListener("message",le.onMessage),D.target.postMessage({eventType:f,eventId:At,data:g},[M.port2])}).finally(()=>{le&&D.removeMessageHandler(le)})})()}}function ur(){return window}function sh(){return typeof ur().WorkerGlobalScope<"u"&&"function"==typeof ur().importScripts}function $u(){return($u=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fa="firebaseLocalStorageDb",La="firebaseLocalStorage",oh="fbase_key";class Hu{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Gu(y,f){return y.transaction([La],f?"readwrite":"readonly").objectStore(La)}function Va(){const y=indexedDB.open(Fa,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(La,{keyPath:oh})}catch(D){g(D)}}),y.addEventListener("success",(0,h.Z)(function*(){const _=y.result;_.objectStoreNames.contains(La)?f(_):(_.close(),yield function _0(){const y=indexedDB.deleteDatabase(Fa);return new Hu(y).toPromise()}(),f(yield Va()))}))})}function eo(y,f,g){return ah.apply(this,arguments)}function ah(){return(ah=(0,h.Z)(function*(y,f,g){const _=Gu(y,!0).put({[oh]:f,value:g});return new Hu(_).toPromise()})).apply(this,arguments)}function uh(){return(uh=(0,h.Z)(function*(y,f){const g=Gu(y,!1).get(f),_=yield new Hu(g).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Ua(y,f){const g=Gu(y,!0).delete(f);return new Hu(g).toPromise()}const Ba=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield Va()),g.db})()}_withRetries(g){var _=this;return(0,h.Z)(function*(){let D=0;for(;;)try{const M=yield _._openDb();return yield g(M)}catch(M){if(D++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return sh()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=xp._getInstance(function gl(){return sh()?self:null}()),g.receiver._subscribe("keyChanged",function(){var _=(0,h.Z)(function*(D,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(D,M){return _.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var _=(0,h.Z)(function*(D,M){return["keyChanged"]});return function(D,M){return _.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var _,D;if(g.activeServiceWorker=yield function ju(){return $u.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new oy(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(_=M[0])||void 0===_?void 0:_.fulfilled)&&(null===(D=M[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var _=this;return(0,h.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function pl(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:g},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Va();return yield eo(g,ku,"1"),yield Ua(g,ku),!0}catch{}return!1})()}_withPendingWrite(g){var _=this;return(0,h.Z)(function*(){_.pendingWrites++;try{yield g()}finally{_.pendingWrites--}})()}_set(g,_){var D=this;return(0,h.Z)(function*(){return D._withPendingWrite((0,h.Z)(function*(){return yield D._withRetries(M=>eo(M,g,_)),D.localCache[g]=_,D.notifyServiceWorker(g)}))})()}_get(g){var _=this;return(0,h.Z)(function*(){const D=yield _._withRetries(M=>function Np(y,f){return uh.apply(this,arguments)}(M,g));return _.localCache[g]=D,D})()}_remove(g){var _=this;return(0,h.Z)(function*(){return _._withPendingWrite((0,h.Z)(function*(){return yield _._withRetries(D=>Ua(D,g)),delete _.localCache[g],_.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const _=yield g._withRetries(G=>{const le=Gu(G,!1).getAll();return new Hu(le).toPromise()});if(!_)return[];if(0!==g.pendingWrites)return[];const D=[],M=new Set;for(const{fbase_key:G,value:le}of _)M.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(le)&&(g.notifyListeners(G,le),D.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!M.has(G)&&(g.notifyListeners(G,null),D.push(G));return D})()}notifyListeners(g,_){this.localCache[g]=_;const D=this.listeners[g];if(D)for(const M of Array.from(D))M(_)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(_)}_removeListener(g,_){this.listeners[g]&&(this.listeners[g].delete(_),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ml(y,f){return Ut(y,"POST","/v2/accounts/mfaSignIn:start",bt(y,f))}function jo(){return(jo=(0,h.Z)(function*(y){return(yield Ut(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ch(y){return new Promise((f,g)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=f,_.onerror=D=>{const M=we("internal-error");M.customData=D,g(M)},_.type="text/javascript",_.charset="UTF-8",function Wu(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(_)})}function lh(y){return`__${y}${Math.floor(1e6*Math.random())}`}const dh=1e12;class Cn{constructor(f){this.auth=f,this.counter=dh,this._widgets=new Map}render(f,g){const _=this.counter;return this._widgets.set(_,new w0(f,this.auth.name,g||{})),this.counter++,_}reset(f){var g;const _=f||dh;null===(g=this._widgets.get(_))||void 0===g||g.delete(),this._widgets.delete(_)}getResponse(f){var g;return(null===(g=this._widgets.get(f||dh))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var _;return null===(_=g._widgets.get(f||dh))||void 0===_||_.execute(),""})()}}class w0{constructor(f,g,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;L(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Nb(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ay=lh("rcb"),Ob=new on(3e4,6e4);class kb{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=ur().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return L(function Fb(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(ur().grecaptcha):new Promise((_,D)=>{const M=ur().setTimeout(()=>{D(we(f,"network-request-failed"))},Ob.get());ur()[ay]=()=>{ur().clearTimeout(M),delete ur()[ay];const le=ur().grecaptcha;if(!le)return void D(we(f,"internal-error"));const qe=le.render;le.render=(st,At)=>{const _t=qe(st,At);return this.counter++,_t},this.hostLanguage=g,_(le)},ch(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:ay,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),D(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=ur().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vl{load(f){return(0,h.Z)(function*(){return new Cn(f)})()}clearedOneInstance(){}}const I0="recaptcha",E0={theme:"light",type:"image"};class Ir{constructor(f,g=Object.assign({},E0),_){this.parameters=g,this.type=I0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=q(_),this.isInvisible="invisible"===this.parameters.size,L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;L(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vl:new kb,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),_=f.getAssertedRecaptcha();return _.getResponse(g)||new Promise(M=>{const G=le=>{!le||(f.tokenChangeListeners.delete(G),M(le))};f.tokenChangeListeners.add(G),f.isInvisible&&_.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){L(!this.parameters.sitekey,this.auth,"argument-error"),L(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),L(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(_=>_(g)),"function"==typeof f)f(g);else if("string"==typeof f){const _=ur()[f];"function"==typeof _&&_(g)}}}assertNotDestroyed(){L(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const _=document.createElement("div");g.appendChild(_),g=_}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){L(ht()&&!sh(),f.auth,"internal-error"),yield function wn(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function zu(y){return jo.apply(this,arguments)}(f.auth);L(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return L(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ti{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=os._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Ai(){return(Ai=(0,h.Z)(function*(y,f,g){const _=q(y),D=yield to(_,f,(0,P.m9)(g));return new Ti(D,M=>ko(_,M))})).apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);yield Zt(!1,_,"phone");const D=yield to(_.auth,f,(0,P.m9)(g));return new Ti(D,M=>N(_,M))})).apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y),D=yield to(_.auth,f,(0,P.m9)(g));return new Ti(D,M=>ae(_,M))})).apply(this,arguments)}function to(y,f,g){return _l.apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(y,f,g){var _;const D=yield g.verify();try{let M;if(L("string"==typeof D,y,"argument-error"),L(g.type===I0,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const G=M.session;if("phoneNumber"in M)return L("enroll"===G.type,y,"internal-error"),(yield ih(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{L("signin"===G.type,y,"internal-error");const le=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return L(le,y,"missing-multi-factor-info"),(yield ml(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield el(y,{phoneNumber:M.phoneNumber,recaptchaToken:D});return G}}finally{g._reset()}})).apply(this,arguments)}function hh(){return(hh=(0,h.Z)(function*(y,f){yield gi((0,P.m9)(y),f)})).apply(this,arguments)}let Ku=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=q(g)}verifyPhoneNumber(g,_){return to(this.auth,g,(0,P.m9)(_))}static credential(g,_){return os._fromVerification(g,_)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:_,temporaryProof:D}=g;return _&&D?os._fromTokenResponse(_,D):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ja(y,f){return f?ie(f):(L(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class no extends hn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ar(f,this._buildIdpRequest())}_linkToIdToken(f,g){return ar(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return ar(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function gt(y){return $i(y.auth,new no(y),y.bypassAuthState)}function fh(y){const{auth:f,user:g}=y;return L(g,f,"internal-error"),Ys(g,new no(y),y.bypassAuthState)}function $a(y){return ph.apply(this,arguments)}function ph(){return(ph=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return L(g,f,"internal-error"),gi(g,new no(y),y.bypassAuthState)})).apply(this,arguments)}class wl{constructor(f,g,_,D,M=!1){this.auth=f,this.resolver=_,this.user=D,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(_,D){f.pendingPromise={resolve:_,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(_,D){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:_,sessionId:D,postBody:M,tenantId:G,error:le,type:qe}=f;if(le)return void g.reject(le);const st={auth:g.auth,requestUri:_,sessionId:D,tenantId:G||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(qe)(st))}catch(At){g.reject(At)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return gt;case"linkViaPopup":case"linkViaRedirect":return $a;case"reauthViaPopup":case"reauthViaRedirect":return fh;default:xe(this.auth,"internal-error")}}resolve(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Er=new on(2e3,1e4);function Il(){return(Il=(0,h.Z)(function*(y,f,g){const _=q(y);Ge(y,f,as);const D=ja(_,g);return new ro(_,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function El(){return(El=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);Ge(_.auth,f,as);const D=ja(_.auth,g);return new ro(_.auth,"reauthViaPopup",f,D,_).executeNotNull()})).apply(this,arguments)}function Qu(){return(Qu=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);Ge(_.auth,f,as);const D=ja(_.auth,g);return new ro(_.auth,"linkViaPopup",f,D,_).executeNotNull()})).apply(this,arguments)}let ro=(()=>{class y extends wl{constructor(g,_,D,M,G){super(g,_,M,G),this.provider=D,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const _=yield g.execute();return L(_,g.auth,"internal-error"),_})()}onExecution(){var g=this;return(0,h.Z)(function*(){Z(1===g.filter.length,"Popup operations only handle one event");const _=Bu();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],_),g.authWindow.associatedEvent=_,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(we(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var _,D;this.pollId=null!==(D=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==D&&D.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Er.get())};g()}}return y.currentPopupAction=null,y})();const hs=new Map;class gh extends wl{constructor(f,g,_=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,_),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let _=hs.get(g.auth._key());if(!_){try{const M=(yield function Ha(y,f){return $o.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;_=()=>Promise.resolve(M)}catch(D){_=()=>Promise.reject(D)}hs.set(g.auth._key(),_)}return g.bypassAuthState||hs.set(g.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,_=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(_,f);if("unknown"!==f.type){if(f.eventId){const D=yield _.auth._redirectUserForId(f.eventId);if(D)return _.user=D,g().call(_,f);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function $o(){return($o=(0,h.Z)(function*(y,f){const g=Vn(f),_=io(y);if(!(yield _._isAvailable()))return!1;const D="true"===(yield _._get(g));return yield _._remove(g),D})).apply(this,arguments)}function fs(y,f){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,h.Z)(function*(y,f){return io(y)._set(Vn(f),"true")})).apply(this,arguments)}function Ps(y,f){hs.set(y._key(),f)}function io(y){return ie(y._redirectPersistence)}function Vn(y){return re("pendingRedirect",y.config.apiKey,y.name)}function Ur(){return(Ur=(0,h.Z)(function*(y,f,g){const _=q(y);Ge(y,f,as);const D=ja(_,g);return yield fs(D,_),D._openRedirect(_,f,"signInViaRedirect")})).apply(this,arguments)}function Dl(){return(Dl=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);Ge(_.auth,f,as);const D=ja(_.auth,g);yield fs(D,_.auth);const M=yield Ju(_);return D._openRedirect(_.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(y,f,g){const _=(0,P.m9)(y);Ge(_.auth,f,as);const D=ja(_.auth,g);yield Zt(!1,_,f.providerId),yield fs(D,_.auth);const M=yield Ju(_);return D._openRedirect(_.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(y,f){return yield q(y)._initializationPromise,oo(y,f,!1)})).apply(this,arguments)}function oo(y,f){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(y,f,g=!1){const _=q(y),D=ja(_,f),G=yield new gh(_,D,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,f)),G})).apply(this,arguments)}function Ju(y){return ao.apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(y){const f=Bu(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class mh{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(f,_)&&(g=!0,this.sendToConsumer(f,_),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ps(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zt(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var _;if(f.error&&!zt(f)){const D=(null===(_=f.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";g.onError(we(this.auth,D))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const _=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&_}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Al(f))}saveEventToCache(f){this.cachedEventUids.add(Al(f)),this.lastProcessedEventTime=Date.now()}}function Al(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function zt({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function za(y){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(y,f={}){return Ut(y,"GET","/v1/projects",f)})).apply(this,arguments)}const b0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kp=/^https?/;function yh(){return(yh=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield za(y);for(const g of f)try{if(Fp(g))return}catch{}xe(y,"unauthorized-domain")})).apply(this,arguments)}function Fp(y){const f=Ve(),{protocol:g,hostname:_}=new URL(f);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===_}if(!kp.test(g))return!1;if(b0.test(y))return _===y;const D=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(_)}const Lp=new on(3e4,6e4);function hy(){const y=ur().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Si=null;function vh(y){return Si=Si||function lr(y){return new Promise((f,g)=>{var _,D,M;function G(){hy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{hy(),g(we(y,"network-request-failed"))},timeout:Lp.get()})}if(null!==(D=null===(_=ur().gapi)||void 0===_?void 0:_.iframes)&&void 0!==D&&D.Iframe)f(gapi.iframes.getContext());else{if(null===(M=ur().gapi)||void 0===M||!M.load){const le=lh("iframefcb");return ur()[le]=()=>{gapi.load?G():g(we(y,"network-request-failed"))},ch(`https://apis.google.com/js/api.js?onload=${le}`).catch(qe=>g(qe))}G()}}).catch(f=>{throw Si=null,f})}(y),Si}const Vp=new on(5e3,15e3),fy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Up(y){const f=y.config;L(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?Kn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:f.apiKey,appName:y.name,v:ne.SDK_VERSION},D=wh.get(y.config.apiHost);D&&(_.eid=D);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${g}?${(0,P.xO)(_).slice(1)}`}function Go(){return Go=(0,h.Z)(function*(y){const f=yield vh(y),g=ur().gapi;return L(g,y,"internal-error"),f.open({where:document.body,url:Up(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fy,dontclear:!0},_=>new Promise(function(){var D=(0,h.Z)(function*(M,G){yield _.restyle({setHideOnLeave:!1});const le=we(y,"network-request-failed"),qe=ur().setTimeout(()=>{G(le)},Vp.get());function st(){ur().clearTimeout(qe),M(_)}_.ping(st).then(st,()=>{G(le)})});return function(M,G){return D.apply(this,arguments)}}()))}),Go.apply(this,arguments)}const Sl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xu{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rl(y,f,g,_,D,M){L(y.config.authDomain,y,"auth-domain-config-required"),L(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:_,v:ne.SDK_VERSION,eventId:D};if(f instanceof as){f.setDefaultLanguage(y.languageCode),G.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(G.customParameters=JSON.stringify(f.getCustomParameters()));for(const[qe,st]of Object.entries(M||{}))G[qe]=st}if(f instanceof us){const qe=f.getScopes().filter(st=>""!==st);qe.length>0&&(G.scopes=qe.join(","))}y.tenantId&&(G.tid=y.tenantId);const le=G;for(const qe of Object.keys(le))void 0===le[qe]&&delete le[qe];return`${function Nl({config:y}){return y.emulator?Kn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(le).slice(1)}`}const Wo="webStorageSupport";class Mi extends class py{constructor(f){this.factorId=f}_process(f,g,_){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,_);case"signin":return this._finalizeSignIn(f,g.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Mi(f)}_finalizeEnroll(f,g,_){return function ll(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:finalize",bt(y,f))}(f,{idToken:g,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function yl(y,f){return Ut(y,"POST","/v2/accounts/mfaSignIn:finalize",bt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let co=(()=>{class y{constructor(){}static assertion(g){return Mi._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Eh="@firebase/auth";class D0{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(_=>{var D;f((null===(D=_)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lo(){return window}function bh(){return(bh=(0,h.Z)(function*(y,f,g){var _;const{BuildInfo:D}=lo();Z(f.sessionId,"AuthEvent did not contain a session ID");const M=yield vy(f.sessionId),G={};return Rt()?G.ibi=D.packageName:xt()?G.apn=D.packageName:xe(y,"operation-not-supported-in-this-environment"),D.displayName&&(G.appDisplayName=D.displayName),G.sessionId=M,Rl(y,g,f.type,void 0,null!==(_=f.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(y){const{BuildInfo:f}=lo(),g={};Rt()?g.iosBundleId=f.packageName:xt()?g.androidPackageName=f.packageName:xe(y,"operation-not-supported-in-this-environment"),yield za(y,g)})).apply(this,arguments)}function yi(){return(yi=(0,h.Z)(function*(y,f,g){const{cordova:_}=lo();let D=()=>{};try{yield new Promise((M,G)=>{let le=null;function qe(){var _t;M();const mr=null===(_t=_.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof mr&&mr(),"function"==typeof g?.close&&g.close()}function st(){le||(le=window.setTimeout(()=>{G(we(y,"redirect-cancelled-by-user"))},2e3))}function At(){"visible"===document?.visibilityState&&st()}f.addPassiveListener(qe),document.addEventListener("resume",st,!1),xt()&&document.addEventListener("visibilitychange",At,!1),D=()=>{f.removePassiveListener(qe),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",At,!1),le&&window.clearTimeout(le)}})}finally{D()}})).apply(this,arguments)}function vy(y){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,h.Z)(function*(y){const f=S0(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function S0(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let _=0;_<y.length;_++)g[_]=y.charCodeAt(_);return g}!function A0(y){(0,ne._registerComponent)(new oe.wA("auth",(f,{options:g})=>{const _=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),{apiKey:M,authDomain:G}=_.options;return((le,qe)=>{L(M&&!M.includes(":"),"invalid-api-key",{appName:le.name}),L(!G?.includes(":"),"argument-error",{appName:le.name});const st={apiKey:M,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ei(y)},At=new kt(le,qe,st);return function je(y,f){const g=f?.persistence||[],_=(Array.isArray(g)?g:[g]).map(ie);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(_,f?.popupRedirectResolver)}(At,g),At})(_,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,_)=>{f.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new oe.wA("auth-internal",f=>{const g=q(f.getProvider("auth").getImmediate());return new D0(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(Eh,"0.20.6",function T0(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ne.registerVersion)(Eh,"0.20.6","esm2017")}("Browser");class kl extends mh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function nc(y){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,h.Z)(function*(y){const f=yield Dh()._get(Th(y));return f&&(yield Dh()._remove(Th(y))),f})).apply(this,arguments)}function Zo(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const _=Math.floor(Math.random()*f.length);y.push(f.charAt(_))}return y.join("")}function Dh(){return ie(Vu)}function Th(y){return re("authEvent",y.config.apiKey,y.name)}function Ko(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Wp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function xi(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Ah(y=(0,P.z$)()){return!("file:"!==xi()&&"ionic:"!==xi()&&"capacitor:"!==xi()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dy(){try{const y=self.localStorage,f=Bu();if(y)return y.setItem(f,"1"),y.removeItem(f),!function x0(y=(0,P.z$)()){return function by(){return(0,P.w1)()&&11===document?.documentMode}()||function Cy(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch{return Yo()&&(0,P.hl)()}return!1}function Yo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function sc(){return(function Fl(){return"http:"===xi()||"https:"===xi()}()||(0,P.ru)()||Ah())&&!function Ey(){return(0,P.b$)()||(0,P.UG)()}()&&Dy()&&!Yo()}function Sh(){return Ah()&&typeof document<"u"}function Ll(){return(Ll=(0,h.Z)(function*(){return!!Sh()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Qr={LOCAL:"local",NONE:"none",SESSION:"session"},Wa=L,oc="persistence";function ac(y){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(y){yield y._initializationPromise;const f=Vl(),g=re(oc,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Vl(){var y;try{return(null===(y=function Kp(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const go=L;class mo{constructor(){this.browserResolver=ie(class $p{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=oo,this._overrideRedirectResult=Ps}_openPopup(f,g,_,D){var M=this;return(0,h.Z)(function*(){var G;Z(null===(G=M.eventManagers[f._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const le=Rl(f,g,_,Ve(),D);return function Ls(y,f,g,_=500,D=600){const M=Math.max((window.screen.availHeight-D)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let le="";const qe=Object.assign(Object.assign({},Sl),{width:_.toString(),height:D.toString(),top:M,left:G}),st=(0,P.z$)().toLowerCase();g&&(le=vt(st)?"_blank":g),Le(st)&&(f=f||"http://localhost",qe.scrollbars="yes");const At=Object.entries(qe).reduce((mr,[qi,lc])=>`${mr}${qi}=${lc},`,"");if(function Pn(y=(0,P.z$)()){var f;return Rt(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(st)&&"_self"!==le)return function jp(y,f){const g=document.createElement("a");g.href=y,g.target=f;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(_)}(f||"",le),new Xu(null);const _t=window.open(f||"",le,At);L(_t,y,"popup-blocked");try{_t.focus()}catch{}return new Xu(_t)}(f,le,Bu())})()}_openRedirect(f,g,_,D){var M=this;return(0,h.Z)(function*(){return yield M._originValidation(f),function Ns(y){ur().location.href=y}(Rl(f,g,_,Ve(),D)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:D,promise:M}=this.eventManagers[g];return D?Promise.resolve(D):(Z(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(f);return this.eventManagers[g]={promise:_},_.catch(()=>{delete this.eventManagers[g]}),_}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const _=yield function Bp(y){return Go.apply(this,arguments)}(f),D=new mh(f);return _.register("authEvent",M=>(L(M?.authEvent,f,"invalid-auth-event"),{status:D.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:D},g.iframes[f._key()]=_,D})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Wo,{type:Wo},D=>{var M;const G=null===(M=D?.[0])||void 0===M?void 0:M[Wo];void 0!==G&&g(!!G),xe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function gs(y){return yh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return fi()||We()||Rt()}}),this.cordovaResolver=ie(class Iy{constructor(){this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=oo,this._overrideRedirectResult=Ps}_initialize(f){var g=this;return(0,h.Z)(function*(){const _=f._key();let D=g.eventManagers.get(_);return D||(D=new kl(f),g.eventManagers.set(_,D),g.attachCallbackListeners(f,D)),D})()}_openPopup(f){xe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,_,D){var M=this;return(0,h.Z)(function*(){!function Ol(y){var f,g,_,D,M,G,le,qe,st,At;const _t=lo();L("function"==typeof(null===(f=_t?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),L(typeof(null===(g=_t?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),L("function"==typeof(null===(M=null===(D=null===(_=_t?.cordova)||void 0===_?void 0:_.plugins)||void 0===D?void 0:D.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(qe=null===(le=null===(G=_t?.cordova)||void 0===G?void 0:G.plugins)||void 0===le?void 0:le.browsertab)||void 0===qe?void 0:qe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(At=null===(st=_t?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===At?void 0:At.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const G=yield M._initialize(f);yield G.initialized(),G.resetRedirect(),function Nr(){hs.clear()}(),yield M._originValidation(f);const le=function qo(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Zo(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(f,_,D);yield function fo(y,f){return Dh()._set(Th(y),f)}(f,le);const qe=yield function my(y,f,g){return bh.apply(this,arguments)}(f,le,g),st=yield function tc(y){const{cordova:f}=lo();return new Promise(g=>{f.plugins.browsertab.isAvailable(_=>{let D=null;_?f.plugins.browsertab.openUrl(y):D=f.InAppBrowser.open(y,function bn(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(D)})})}(qe);return function ms(y,f,g){return yi.apply(this,arguments)}(f,G,st)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function yy(y){return ho.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:_,handleOpenURL:D,BuildInfo:M}=lo(),G=setTimeout((0,h.Z)(function*(){yield nc(f),g.onEvent(Wp())}),500),le=function(){var At=(0,h.Z)(function*(_t){clearTimeout(G);const mr=yield nc(f);let qi=null;mr&&_t?.url&&(qi=function _y(y,f){var g,_;const D=function wy(y){const f=Ko(y),g=f.link?decodeURIComponent(f.link):void 0,_=Ko(g).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Ko(D).link||D||_||g||y}(f);if(D.includes("/__/auth/callback")){const M=Ko(D),G=M.firebaseError?function zp(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,le=null===(_=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===_?void 0:_[1],qe=le?we(le):null;return qe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:qe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:D,postBody:null}}return null}(mr,_t.url)),g.onEvent(qi||Wp())});return function(mr){return At.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,le);const qe=D,st=`${M.packageName.toLowerCase()}://`;lo().handleOpenURL=function(){var At=(0,h.Z)(function*(_t){if(_t.toLowerCase().startsWith(st)&&le({url:_t}),"function"==typeof qe)try{qe(_t)}catch(mr){console.error(mr)}});return function(_t){return At.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=oo,this._overrideRedirectResult=Ps}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,_,D){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,_,D)})()}_openRedirect(f,g,_,D){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,_,D)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Sh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return go(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Zp(){return Ll.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ys(y){return y.unwrap()}function Ty(y){return Za(y)}function Za(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ku.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let _;switch(g){case"google.com":_=xa;break;case"facebook.com":_=Ma;break;case"github.com":_=Su;break;case"twitter.com":_=Mr;break;default:const{oauthIdToken:D,oauthAccessToken:M,oauthTokenSecret:G,pendingToken:le,nonce:qe}=f;return M||G||D||le?le?g.startsWith("saml.")?cs._create(g,le):bi._fromParams({providerId:g,signInMethod:g,pendingToken:le,idToken:D,accessToken:M}):new Ds(g).credential({idToken:D,accessToken:M,rawNonce:qe}):null}return y instanceof P.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function Wn(y,f){return f.catch(g=>{throw g instanceof P.ZR&&function qa(y,f){var g,_;const D=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=f)||void 0===_?void 0:_.code))f.resolver=new Mh(y,function Pu(y,f){var g;const _=(0,P.m9)(y),D=f;return L(f.customData.operationType,_,"argument-error"),L(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,_,"argument-error"),rh._fromError(_,D)}(y,f));else if(D){const M=Za(f),G=f;M&&(G.credential=M,G.tenantId=D.tenantId||void 0,G.email=D.email||void 0,G.phoneNumber=D.phoneNumber||void 0)}}(y,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:Ty(g),additionalUserInfo:al(g),user:Us.getOrCreate(D)}})}function cc(y,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:_=>Wn(y,g.confirm(_))}})).apply(this,arguments)}class Mh{constructor(f,g){this.resolver=g,this.auth=function uc(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Wn(ys(this.auth),this.resolver.resolveSignIn(f))}}class Us{constructor(f){this._delegate=f,this.multiFactor=function ka(y){const f=(0,P.m9)(y);return dl.has(f)||dl.set(f,sy._fromUser(f)),dl.get(f)}(f)}static getOrCreate(f){return Us.USER_MAP.has(f)||Us.USER_MAP.set(f,new Us(f)),Us.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return Wn(g.auth,N(g._delegate,f))})()}linkWithPhoneNumber(f,g){var _=this;return(0,h.Z)(function*(){return cc(_.auth,function Ln(y,f,g){return Gi.apply(this,arguments)}(_._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return Wn(g.auth,function Yu(y,f,g){return Qu.apply(this,arguments)}(g._delegate,f,mo))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield ac(q(g.auth)),function dy(y,f,g){return function ks(y,f,g){return zi.apply(this,arguments)}(y,f,g)}(g._delegate,f,mo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return Wn(g.auth,ae(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return cc(this.auth,function Zu(y,f,g){return Yr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Wn(this.auth,function ly(y,f,g){return El.apply(this,arguments)}(this._delegate,f,mo))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield ac(q(g.auth)),function br(y,f,g){return function so(y,f,g){return Dl.apply(this,arguments)}(y,f,g)}(g._delegate,f,mo)})()}sendEmailVerification(f){return function Jm(y,f){return Nu.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function si(y,f){return sl.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Dp(y,f){return Pa((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Ou(y,f){return Pa((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function uy(y,f){return hh.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ey(y,f){return Jd.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Xm(y,f,g){return Yd.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Us.USER_MAP=new WeakMap;const vs=L;let Xo=(()=>{class y{constructor(g,_){if(this.app=g,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;vs(D,"invalid-api-key",{appName:g.name}),vs(D,"invalid-api-key",{appName:g.name});const M=typeof window<"u"?mo:void 0;this._delegate=_.initialize({options:{persistence:xh(D,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Ie),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,_){!function Be(y,f,g){const _=q(y);L(_._canInitEmulator,_,"emulator-config-failed"),L(/^https?:\/\//.test(f),_,"invalid-emulator-scheme");const D=!!g?.disableWarnings,M=ut(f),{host:G,port:le}=function Bt(y){const f=ut(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const _=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(_);if(D){const M=D[1];return{host:M,port:Xt(_.substr(M.length+1))}}{const[M,G]=_.split(":");return{host:M,port:Xt(G)}}}(f);_.config.emulator={url:`${M}//${G}${null===le?"":`:${le}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:le,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function kn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,_)}applyActionCode(g){return function Rr(y,f){return Oa.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Lo(this._delegate,g)}confirmPasswordReset(g,_){return function Fo(y,f,g){return Di.apply(this,arguments)}(this._delegate,g,_)}createUserWithEmailAndPassword(g,_){var D=this;return(0,h.Z)(function*(){return Wn(D._delegate,function Rs(y,f,g){return Xn.apply(this,arguments)}(D._delegate,g,_))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function bp(y,f){return Ru.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Qs(y,f){return"EMAIL_SIGNIN"===Sa.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){vs(sc(),g._delegate,"operation-not-supported-in-this-environment");const _=yield function cr(y,f){return Wi.apply(this,arguments)}(g._delegate,mo);return _?Wn(g._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function er(y,f){q(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,_,D){const{next:M,error:G,complete:le}=Qp(g,_,D);return this._delegate.onAuthStateChanged(M,G,le)}onIdTokenChanged(g,_,D){const{next:M,error:G,complete:le}=Qp(g,_,D);return this._delegate.onIdTokenChanged(M,G,le)}sendSignInLinkToEmail(g,_){return function Zd(y,f,g){return Vo.apply(this,arguments)}(this._delegate,g,_)}sendPasswordResetEmail(g,_){return function Hi(y,f,g){return Tn.apply(this,arguments)}(this._delegate,g,_||void 0)}setPersistence(g){var _=this;return(0,h.Z)(function*(){let D;switch(function Yp(y,f){Wa(Object.values(Qr).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?Wa(f!==Qr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Wa(f===Qr.NONE,y,"unsupported-persistence-type"):Yo()?Wa(f===Qr.NONE||f===Qr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Wa(f===Qr.NONE||Dy(),y,"unsupported-persistence-type")}(_._delegate,g),g){case Qr.SESSION:D=ds;break;case Qr.LOCAL:D=(yield ie(Ba)._isAvailable())?Ba:Vu;break;case Qr.NONE:D=tn;break;default:return xe("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Wn(this._delegate,function Qm(y){return Fn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Wn(this._delegate,ko(this._delegate,g))}signInWithCustomToken(g){return Wn(this._delegate,function Yt(y,f){return zn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,_){return Wn(this._delegate,function ls(y,f,g){return ko((0,P.m9)(y),Ci.credential(f,g))}(this._delegate,g,_))}signInWithEmailLink(g,_){return Wn(this._delegate,function y0(y,f,g){return Kd.apply(this,arguments)}(this._delegate,g,_))}signInWithPhoneNumber(g,_){return cc(this._delegate,function ft(y,f,g){return Ai.apply(this,arguments)}(this._delegate,g,_))}signInWithPopup(g){var _=this;return(0,h.Z)(function*(){return vs(sc(),_._delegate,"operation-not-supported-in-this-environment"),Wn(_._delegate,function cy(y,f,g){return Il.apply(this,arguments)}(_._delegate,g,mo))})()}signInWithRedirect(g){var _=this;return(0,h.Z)(function*(){return vs(sc(),_._delegate,"operation-not-supported-in-this-environment"),yield ac(_._delegate),function xn(y,f,g){return function Ga(y,f,g){return Ur.apply(this,arguments)}(y,f,g)}(_._delegate,g,mo)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Ms(y,f){return xs.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Qr,y})();function Qp(y,f,g){let _=y;"function"!=typeof y&&({next:_,error:f,complete:g}=y);const D=_;return{next:G=>D(G&&Us.getOrCreate(G)),error:f,complete:g}}function xh(y,f){const g=function Qo(y,f){const g=Vl();if(!g)return[];const _=re(oc,y,f);switch(g.getItem(_)){case Qr.NONE:return[tn];case Qr.LOCAL:return[Ba,ds];case Qr.SESSION:return[ds];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(Ba)&&g.push(Ba),typeof window<"u")for(const _ of[Vu,ds])g.includes(_)||g.push(_);return g.includes(tn)||g.push(tn),g}class Ul{constructor(){this.providerId="phone",this._delegate=new Ku(ys(Q.Z.auth()))}static credential(f,g){return Ku.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Ul.PHONE_SIGN_IN_METHOD=Ku.PHONE_SIGN_IN_METHOD,Ul.PROVIDER_ID=Ku.PROVIDER_ID;const Jp=L;class Bl{constructor(f,g,_=Q.Z.app()){var D;Jp(null===(D=_.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Ir(f,g,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function eg(y){y.INTERNAL.registerComponent(new oe.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),_=f.getProvider("auth");return new Xo(g,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ci,FacebookAuthProvider:Ma,GithubAuthProvider:Su,GoogleAuthProvider:xa,OAuthProvider:Ds,SAMLAuthProvider:qs,PhoneAuthProvider:Ul,PhoneMultiFactorGenerator:co,RecaptchaVerifier:Bl,TwitterAuthProvider:Mr,Auth:Xo,AuthCredential:hn,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.19")}(Q.Z)},9751:(pt,Me,R)=>{R.d(Me,{y:()=>ge});var h=R(2961),Q=R(727),P=R(8822),ne=R(9635),de=R(2416),pe=R(576),oe=R(2806);let ge=(()=>{class K{constructor(be){be&&(this._subscribe=be)}lift(be){const Ie=new K;return Ie.source=this,Ie.operator=be,Ie}subscribe(be,Ie,Je){const me=function j(K){return K&&K instanceof h.Lv||function V(K){return K&&(0,pe.m)(K.next)&&(0,pe.m)(K.error)&&(0,pe.m)(K.complete)}(K)&&(0,Q.Nn)(K)}(be)?be:new h.Hp(be,Ie,Je);return(0,oe.x)(()=>{const{operator:ue,source:ot}=this;me.add(ue?ue.call(me,ot):ot?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(be){try{return this._subscribe(be)}catch(Ie){be.error(Ie)}}forEach(be,Ie){return new(Ie=he(Ie))((Je,me)=>{const ue=new h.Hp({next:ot=>{try{be(ot)}catch(rt){me(rt),ue.unsubscribe()}},error:me,complete:Je});this.subscribe(ue)})}_subscribe(be){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(be)}[P.L](){return this}pipe(...be){return(0,ne.U)(be)(this)}toPromise(be){return new(be=he(be))((Ie,Je)=>{let me;this.subscribe(ue=>me=ue,ue=>Je(ue),()=>Ie(me))})}}return K.create=Oe=>new K(Oe),K})();function he(K){var Oe;return null!==(Oe=K??de.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(pt,Me,R)=>{R.d(Me,{x:()=>oe});var h=R(9751),Q=R(727);const ne=(0,R(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=R(8737),pe=R(2806);let oe=(()=>{class he extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new ge(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new ne}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Oe,observers:be}=this;return K||Oe?Q.Lc:(this.currentObservers=null,be.push(j),new Q.w0(()=>{this.currentObservers=null,(0,de.P)(be,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Oe,isStopped:be}=this;K?j.error(Oe):be&&j.complete()}asObservable(){const j=new h.y;return j.source=this,j}}return he.create=(V,j)=>new ge(V,j),he})();class ge extends oe{constructor(V,j){super(),this.destination=V,this.source=j}next(V){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,V)}error(V){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,V)}complete(){var V,j;null===(j=null===(V=this.destination)||void 0===V?void 0:V.complete)||void 0===j||j.call(V)}_subscribe(V){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(V))&&void 0!==K?K:Q.Lc}}},2961:(pt,Me,R)=>{R.d(Me,{Hp:()=>Je,Lv:()=>K});var h=R(576),Q=R(727),P=R(2416),ne=R(7849);function de(){}const pe=he("C",void 0,void 0);function he(xe,we,Ce){return{kind:xe,value:we,error:Ce}}var V=R(3410),j=R(2806);class K extends Q.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,Q.Nn)(we)&&we.add(this)):this.destination=rt}static create(we,Ce,Ge){return new Je(we,Ce,Ge)}next(we){this.isStopped?ot(function ge(xe){return he("N",xe,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ot(function oe(xe){return he("E",void 0,xe)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ot(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function be(xe,we){return Oe.call(xe,we)}class Ie{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(we)}catch(Ge){me(Ge)}}error(we){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(we)}catch(Ge){me(Ge)}else me(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ce){me(Ce)}}}class Je extends K{constructor(we,Ce,Ge){let Ue;if(super(),(0,h.m)(we)||!we)Ue={next:we??void 0,error:Ce??void 0,complete:Ge??void 0};else{let L;this&&P.v.useDeprecatedNextContext?(L=Object.create(we),L.unsubscribe=()=>this.unsubscribe(),Ue={next:we.next&&be(we.next,L),error:we.error&&be(we.error,L),complete:we.complete&&be(we.complete,L)}):Ue=we}this.destination=new Ie(Ue)}}function me(xe){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(xe):(0,ne.h)(xe)}function ot(xe,we){const{onStoppedNotification:Ce}=P.v;Ce&&V.z.setTimeout(()=>Ce(xe,we))}const rt={closed:!0,next:de,error:function ue(xe){throw xe},complete:de}},727:(pt,Me,R)=>{R.d(Me,{Lc:()=>pe,w0:()=>de,Nn:()=>oe});var h=R(576);const P=(0,R(3888).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Oe)=>`${Oe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ne=R(8737);class de{constructor(V){this.initialTeardown=V,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let V;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const be of j)be.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,h.m)(K))try{K()}catch(be){V=be instanceof P?be.errors:[be]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const be of Oe)try{ge(be)}catch(Ie){V=V??[],Ie instanceof P?V=[...V,...Ie.errors]:V.push(Ie)}}if(V)throw new P(V)}}add(V){var j;if(V&&V!==this)if(this.closed)ge(V);else{if(V instanceof de){if(V.closed||V._hasParent(this))return;V._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(V)}}_hasParent(V){const{_parentage:j}=this;return j===V||Array.isArray(j)&&j.includes(V)}_addParent(V){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(V),j):j?[j,V]:V}_removeParent(V){const{_parentage:j}=this;j===V?this._parentage=null:Array.isArray(j)&&(0,ne.P)(j,V)}remove(V){const{_finalizers:j}=this;j&&(0,ne.P)(j,V),V instanceof de&&V._removeParent(this)}}de.EMPTY=(()=>{const he=new de;return he.closed=!0,he})();const pe=de.EMPTY;function oe(he){return he instanceof de||he&&"closed"in he&&(0,h.m)(he.remove)&&(0,h.m)(he.add)&&(0,h.m)(he.unsubscribe)}function ge(he){(0,h.m)(he)?he():he.unsubscribe()}},2416:(pt,Me,R)=>{R.d(Me,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Me,R)=>{R.d(Me,{E:()=>Q});const Q=new(R(9751).y)(de=>de.complete())},8996:(pt,Me,R)=>{R.d(Me,{D:()=>we});var h=R(8421),Q=R(5363),P=R(9468),pe=R(9751),ge=R(2202),he=R(576),V=R(9672);function K(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new pe.y(Ue=>{(0,V.f)(Ue,Ge,()=>{const L=Ce[Symbol.asyncIterator]();(0,V.f)(Ue,Ge,()=>{L.next().then(ve=>{ve.done?Ue.complete():Ue.next(ve.value)})},0,!0)})})}var Oe=R(3670),be=R(8239),Ie=R(1144),Je=R(6495),me=R(2206),ue=R(4532),ot=R(3260);function we(Ce,Ge){return Ge?function xe(Ce,Ge){if(null!=Ce){if((0,Oe.c)(Ce))return function ne(Ce,Ge){return(0,h.Xf)(Ce).pipe((0,P.R)(Ge),(0,Q.Q)(Ge))}(Ce,Ge);if((0,Ie.z)(Ce))return function oe(Ce,Ge){return new pe.y(Ue=>{let L=0;return Ge.schedule(function(){L===Ce.length?Ue.complete():(Ue.next(Ce[L++]),Ue.closed||this.schedule())})})}(Ce,Ge);if((0,be.t)(Ce))return function de(Ce,Ge){return(0,h.Xf)(Ce).pipe((0,P.R)(Ge),(0,Q.Q)(Ge))}(Ce,Ge);if((0,me.D)(Ce))return K(Ce,Ge);if((0,Je.T)(Ce))return function j(Ce,Ge){return new pe.y(Ue=>{let L;return(0,V.f)(Ue,Ge,()=>{L=Ce[ge.h](),(0,V.f)(Ue,Ge,()=>{let ve,Z;try{({value:ve,done:Z}=L.next())}catch(J){return void Ue.error(J)}Z?Ue.complete():Ue.next(ve)},0,!0)}),()=>(0,he.m)(L?.return)&&L.return()})}(Ce,Ge);if((0,ot.L)(Ce))return function rt(Ce,Ge){return K((0,ot.Q)(Ce),Ge)}(Ce,Ge)}throw(0,ue.z)(Ce)}(Ce,Ge):(0,h.Xf)(Ce)}},8421:(pt,Me,R)=>{R.d(Me,{Xf:()=>Oe});var h=R(655),Q=R(1144),P=R(8239),ne=R(9751),de=R(3670),pe=R(2206),oe=R(4532),ge=R(6495),he=R(3260),V=R(576),j=R(7849),K=R(8822);function Oe(xe){if(xe instanceof ne.y)return xe;if(null!=xe){if((0,de.c)(xe))return function be(xe){return new ne.y(we=>{const Ce=xe[K.L]();if((0,V.m)(Ce.subscribe))return Ce.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,Q.z)(xe))return function Ie(xe){return new ne.y(we=>{for(let Ce=0;Ce<xe.length&&!we.closed;Ce++)we.next(xe[Ce]);we.complete()})}(xe);if((0,P.t)(xe))return function Je(xe){return new ne.y(we=>{xe.then(Ce=>{we.closed||(we.next(Ce),we.complete())},Ce=>we.error(Ce)).then(null,j.h)})}(xe);if((0,pe.D)(xe))return ue(xe);if((0,ge.T)(xe))return function me(xe){return new ne.y(we=>{for(const Ce of xe)if(we.next(Ce),we.closed)return;we.complete()})}(xe);if((0,he.L)(xe))return function ot(xe){return ue((0,he.Q)(xe))}(xe)}throw(0,oe.z)(xe)}function ue(xe){return new ne.y(we=>{(function rt(xe,we){var Ce,Ge,Ue,L;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,h.KL)(xe);!(Ge=yield Ce.next()).done;)if(we.next(Ge.value),we.closed)return}catch(ve){Ue={error:ve}}finally{try{Ge&&!Ge.done&&(L=Ce.return)&&(yield L.call(Ce))}finally{if(Ue)throw Ue.error}}we.complete()})})(xe,we).catch(Ce=>we.error(Ce))})}},6451:(pt,Me,R)=>{R.d(Me,{T:()=>pe});var h=R(8189),Q=R(8421),P=R(515),ne=R(7669),de=R(8996);function pe(...oe){const ge=(0,ne.yG)(oe),he=(0,ne._6)(oe,1/0),V=oe;return V.length?1===V.length?(0,Q.Xf)(V[0]):(0,h.J)(he)((0,de.D)(V,ge)):P.E}},5403:(pt,Me,R)=>{R.d(Me,{Q:()=>P,x:()=>Q});var h=R(2961);function Q(ne,de,pe,oe,ge){return new P(ne,de,pe,oe,ge)}class P extends h.Lv{constructor(de,pe,oe,ge,he,V){super(de),this.onFinalize=he,this.shouldUnsubscribe=V,this._next=pe?function(j){try{pe(j)}catch(K){de.error(K)}}:super._next,this._error=ge?function(j){try{ge(j)}catch(K){de.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(j){de.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(pt,Me,R)=>{R.d(Me,{U:()=>P});var h=R(4482),Q=R(5403);function P(ne,de){return(0,h.e)((pe,oe)=>{let ge=0;pe.subscribe((0,Q.x)(oe,he=>{oe.next(ne.call(de,he,ge++))}))})}},8189:(pt,Me,R)=>{R.d(Me,{J:()=>P});var h=R(5577),Q=R(4671);function P(ne=1/0){return(0,h.z)(Q.y,ne)}},5577:(pt,Me,R)=>{R.d(Me,{z:()=>ge});var h=R(4004),Q=R(8421),P=R(4482),ne=R(9672),de=R(5403),oe=R(576);function ge(he,V,j=1/0){return(0,oe.m)(V)?ge((K,Oe)=>(0,h.U)((be,Ie)=>V(K,be,Oe,Ie))((0,Q.Xf)(he(K,Oe))),j):("number"==typeof V&&(j=V),(0,P.e)((K,Oe)=>function pe(he,V,j,K,Oe,be,Ie,Je){const me=[];let ue=0,ot=0,rt=!1;const xe=()=>{rt&&!me.length&&!ue&&V.complete()},we=Ge=>ue<K?Ce(Ge):me.push(Ge),Ce=Ge=>{be&&V.next(Ge),ue++;let Ue=!1;(0,Q.Xf)(j(Ge,ot++)).subscribe((0,de.x)(V,L=>{Oe?.(L),be?we(L):V.next(L)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(ue--;me.length&&ue<K;){const L=me.shift();Ie?(0,ne.f)(V,Ie,()=>Ce(L)):Ce(L)}xe()}catch(L){V.error(L)}}))};return he.subscribe((0,de.x)(V,we,()=>{rt=!0,xe()})),()=>{Je?.()}}(K,Oe,he,j)))}},5363:(pt,Me,R)=>{R.d(Me,{Q:()=>ne});var h=R(9672),Q=R(4482),P=R(5403);function ne(de,pe=0){return(0,Q.e)((oe,ge)=>{oe.subscribe((0,P.x)(ge,he=>(0,h.f)(ge,de,()=>ge.next(he),pe),()=>(0,h.f)(ge,de,()=>ge.complete(),pe),he=>(0,h.f)(ge,de,()=>ge.error(he),pe)))})}},3099:(pt,Me,R)=>{R.d(Me,{B:()=>de});var h=R(8421),Q=R(7579),P=R(2961),ne=R(4482);function de(oe={}){const{connector:ge=(()=>new Q.x),resetOnError:he=!0,resetOnComplete:V=!0,resetOnRefCountZero:j=!0}=oe;return K=>{let Oe,be,Ie,Je=0,me=!1,ue=!1;const ot=()=>{be?.unsubscribe(),be=void 0},rt=()=>{ot(),Oe=Ie=void 0,me=ue=!1},xe=()=>{const we=Oe;rt(),we?.unsubscribe()};return(0,ne.e)((we,Ce)=>{Je++,!ue&&!me&&ot();const Ge=Ie=Ie??ge();Ce.add(()=>{Je--,0===Je&&!ue&&!me&&(be=pe(xe,j))}),Ge.subscribe(Ce),!Oe&&Je>0&&(Oe=new P.Hp({next:Ue=>Ge.next(Ue),error:Ue=>{ue=!0,ot(),be=pe(rt,he,Ue),Ge.error(Ue)},complete:()=>{me=!0,ot(),be=pe(rt,V),Ge.complete()}}),(0,h.Xf)(we).subscribe(Oe))})(K)}}function pe(oe,ge,...he){if(!0===ge)return void oe();if(!1===ge)return;const V=new P.Hp({next:()=>{V.unsubscribe(),oe()}});return ge(...he).subscribe(V)}},9468:(pt,Me,R)=>{R.d(Me,{R:()=>Q});var h=R(4482);function Q(P,ne=0){return(0,h.e)((de,pe)=>{pe.add(P.schedule(()=>de.subscribe(pe),ne))})}},8505:(pt,Me,R)=>{R.d(Me,{b:()=>de});var h=R(576),Q=R(4482),P=R(5403),ne=R(4671);function de(pe,oe,ge){const he=(0,h.m)(pe)||oe||ge?{next:pe,error:oe,complete:ge}:pe;return he?(0,Q.e)((V,j)=>{var K;null===(K=he.subscribe)||void 0===K||K.call(he);let Oe=!0;V.subscribe((0,P.x)(j,be=>{var Ie;null===(Ie=he.next)||void 0===Ie||Ie.call(he,be),j.next(be)},()=>{var be;Oe=!1,null===(be=he.complete)||void 0===be||be.call(he),j.complete()},be=>{var Ie;Oe=!1,null===(Ie=he.error)||void 0===Ie||Ie.call(he,be),j.error(be)},()=>{var be,Ie;Oe&&(null===(be=he.unsubscribe)||void 0===be||be.call(he)),null===(Ie=he.finalize)||void 0===Ie||Ie.call(he)}))}):ne.y}},4408:(pt,Me,R)=>{R.d(Me,{o:()=>de});var h=R(727);class Q extends h.w0{constructor(oe,ge){super()}schedule(oe,ge=0){return this}}const P={setInterval(pe,oe,...ge){const{delegate:he}=P;return he?.setInterval?he.setInterval(pe,oe,...ge):setInterval(pe,oe,...ge)},clearInterval(pe){const{delegate:oe}=P;return(oe?.clearInterval||clearInterval)(pe)},delegate:void 0};var ne=R(8737);class de extends Q{constructor(oe,ge){super(oe,ge),this.scheduler=oe,this.work=ge,this.pending=!1}schedule(oe,ge=0){if(this.closed)return this;this.state=oe;const he=this.id,V=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(V,he,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(V,this.id,ge),this}requestAsyncId(oe,ge,he=0){return P.setInterval(oe.flush.bind(oe,this),he)}recycleAsyncId(oe,ge,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ge;P.clearInterval(ge)}execute(oe,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(oe,ge);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ge){let V,he=!1;try{this.work(oe)}catch(j){he=!0,V=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),V}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ge}=this,{actions:he}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(he,this),null!=oe&&(this.id=this.recycleAsyncId(ge,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Me,R)=>{R.d(Me,{v:()=>P});var h=R(6063);class Q{constructor(de,pe=Q.now){this.schedulerActionCtor=de,this.now=pe}schedule(de,pe=0,oe){return new this.schedulerActionCtor(this,de).schedule(oe,pe)}}Q.now=h.l.now;class P extends Q{constructor(de,pe=Q.now){super(de,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:pe}=this;if(this._active)return void pe.push(de);let oe;this._active=!0;do{if(oe=de.execute(de.state,de.delay))break}while(de=pe.shift());if(this._active=!1,oe){for(;de=pe.shift();)de.unsubscribe();throw oe}}}},4986:(pt,Me,R)=>{R.d(Me,{z:()=>P});var h=R(4408);const P=new(R(7565).v)(h.o)},6063:(pt,Me,R)=>{R.d(Me,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(pt,Me,R)=>{R.d(Me,{z:()=>h});const h={setTimeout(Q,P,...ne){const{delegate:de}=h;return de?.setTimeout?de.setTimeout(Q,P,...ne):setTimeout(Q,P,...ne)},clearTimeout(Q){const{delegate:P}=h;return(P?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(pt,Me,R)=>{R.d(Me,{h:()=>Q});const Q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Me,R)=>{R.d(Me,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Me,R)=>{R.d(Me,{_6:()=>pe,jO:()=>ne,yG:()=>de});var h=R(576);function P(oe){return oe[oe.length-1]}function ne(oe){return(0,h.m)(P(oe))?oe.pop():void 0}function de(oe){return function Q(oe){return oe&&(0,h.m)(oe.schedule)}(P(oe))?oe.pop():void 0}function pe(oe,ge){return"number"==typeof P(oe)?oe.pop():ge}},8737:(pt,Me,R)=>{function h(Q,P){if(Q){const ne=Q.indexOf(P);0<=ne&&Q.splice(ne,1)}}R.d(Me,{P:()=>h})},3888:(pt,Me,R)=>{function h(Q){const ne=Q(de=>{Error.call(de),de.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}R.d(Me,{d:()=>h})},2806:(pt,Me,R)=>{R.d(Me,{O:()=>ne,x:()=>P});var h=R(2416);let Q=null;function P(de){if(h.v.useDeprecatedSynchronousErrorHandling){const pe=!Q;if(pe&&(Q={errorThrown:!1,error:null}),de(),pe){const{errorThrown:oe,error:ge}=Q;if(Q=null,oe)throw ge}}else de()}function ne(de){h.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=de)}},9672:(pt,Me,R)=>{function h(Q,P,ne,de=0,pe=!1){const oe=P.schedule(function(){ne(),pe?Q.add(this.schedule(null,de)):this.unsubscribe()},de);if(Q.add(oe),!pe)return oe}R.d(Me,{f:()=>h})},4671:(pt,Me,R)=>{function h(Q){return Q}R.d(Me,{y:()=>h})},1144:(pt,Me,R)=>{R.d(Me,{z:()=>h});const h=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(pt,Me,R)=>{R.d(Me,{D:()=>Q});var h=R(576);function Q(P){return Symbol.asyncIterator&&(0,h.m)(P?.[Symbol.asyncIterator])}},576:(pt,Me,R)=>{function h(Q){return"function"==typeof Q}R.d(Me,{m:()=>h})},3670:(pt,Me,R)=>{R.d(Me,{c:()=>P});var h=R(8822),Q=R(576);function P(ne){return(0,Q.m)(ne[h.L])}},6495:(pt,Me,R)=>{R.d(Me,{T:()=>P});var h=R(2202),Q=R(576);function P(ne){return(0,Q.m)(ne?.[h.h])}},8239:(pt,Me,R)=>{R.d(Me,{t:()=>Q});var h=R(576);function Q(P){return(0,h.m)(P?.then)}},3260:(pt,Me,R)=>{R.d(Me,{L:()=>ne,Q:()=>P});var h=R(655),Q=R(576);function P(de){return(0,h.FC)(this,arguments,function*(){const oe=de.getReader();try{for(;;){const{value:ge,done:he}=yield(0,h.qq)(oe.read());if(he)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ge)}}finally{oe.releaseLock()}})}function ne(de){return(0,Q.m)(de?.getReader)}},4482:(pt,Me,R)=>{R.d(Me,{A:()=>Q,e:()=>P});var h=R(576);function Q(ne){return(0,h.m)(ne?.lift)}function P(ne){return de=>{if(Q(de))return de.lift(function(pe){try{return ne(pe,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(pt,Me,R)=>{R.d(Me,{U:()=>P,z:()=>Q});var h=R(4671);function Q(...ne){return P(ne)}function P(ne){return 0===ne.length?h.y:1===ne.length?ne[0]:function(pe){return ne.reduce((oe,ge)=>ge(oe),pe)}}},7849:(pt,Me,R)=>{R.d(Me,{h:()=>P});var h=R(2416),Q=R(3410);function P(ne){Q.z.setTimeout(()=>{const{onUnhandledError:de}=h.v;if(!de)throw ne;de(ne)})}},4532:(pt,Me,R)=>{function h(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}R.d(Me,{z:()=>h})},655:(pt,Me,R)=>{function ne(Z,J){var ie={};for(var ee in Z)Object.prototype.hasOwnProperty.call(Z,ee)&&J.indexOf(ee)<0&&(ie[ee]=Z[ee]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var je=0;for(ee=Object.getOwnPropertySymbols(Z);je<ee.length;je++)J.indexOf(ee[je])<0&&Object.prototype.propertyIsEnumerable.call(Z,ee[je])&&(ie[ee[je]]=Z[ee[je]])}return ie}function ge(Z,J,ie,ee){return new(ie||(ie=Promise))(function(Ve,ht){function Wt(on){try{Ze(ee.next(on))}catch(Kn){ht(Kn)}}function Pt(on){try{Ze(ee.throw(on))}catch(Kn){ht(Kn)}}function Ze(on){on.done?Ve(on.value):function je(Ve){return Ve instanceof ie?Ve:new ie(function(ht){ht(Ve)})}(on.value).then(Wt,Pt)}Ze((ee=ee.apply(Z,J||[])).next())})}function me(Z){return this instanceof me?(this.v=Z,this):new me(Z)}function ue(Z,J,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var je,ee=ie.apply(Z,J||[]),Ve=[];return je={},ht("next"),ht("throw"),ht("return"),je[Symbol.asyncIterator]=function(){return this},je;function ht(dn){ee[dn]&&(je[dn]=function(en){return new Promise(function(Gn,bt){Ve.push([dn,en,Gn,bt])>1||Wt(dn,en)})})}function Wt(dn,en){try{!function Pt(dn){dn.value instanceof me?Promise.resolve(dn.value.v).then(Ze,on):Kn(Ve[0][2],dn)}(ee[dn](en))}catch(Gn){Kn(Ve[0][3],Gn)}}function Ze(dn){Wt("next",dn)}function on(dn){Wt("throw",dn)}function Kn(dn,en){dn(en),Ve.shift(),Ve.length&&Wt(Ve[0][0],Ve[0][1])}}function rt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,J=Z[Symbol.asyncIterator];return J?J.call(Z):(Z=function K(Z){var J="function"==typeof Symbol&&Symbol.iterator,ie=J&&Z[J],ee=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&ee>=Z.length&&(Z=void 0),{value:Z&&Z[ee++],done:!Z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},ee("next"),ee("throw"),ee("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ee(Ve){ie[Ve]=Z[Ve]&&function(ht){return new Promise(function(Wt,Pt){!function je(Ve,ht,Wt,Pt){Promise.resolve(Pt).then(function(Ze){Ve({value:Ze,done:Wt})},ht)}(Wt,Pt,(ht=Z[Ve](ht)).done,ht.value)})}}}R.d(Me,{FC:()=>ue,KL:()=>rt,_T:()=>ne,mG:()=>ge,qq:()=>me})},4650:(pt,Me,R)=>{R.d(Me,{$8M:()=>yl,$Z:()=>ai,AFp:()=>yE,AaK:()=>ge,CHM:()=>Ot,CRH:()=>Vf,CZH:()=>Im,CqO:()=>Dv,D6c:()=>zE,EJc:()=>M_,EpF:()=>Cv,F4k:()=>cu,FYo:()=>At,FiY:()=>cr,G48:()=>cT,GfV:()=>lc,Gpc:()=>j,JOm:()=>vo,KtG:()=>Hi,LFG:()=>xn,LSH:()=>ic,Lbi:()=>bm,Lck:()=>ED,MMx:()=>Vc,NdJ:()=>Gg,OlP:()=>Cn,PXZ:()=>ME,Q6J:()=>pd,QGY:()=>Hg,QP$:()=>vt,Qsj:()=>_t,R0b:()=>es,RDi:()=>Up,Rgc:()=>Lf,SBq:()=>le,Sil:()=>CE,Suo:()=>__,TTD:()=>us,TgZ:()=>uu,X6Q:()=>NE,XFs:()=>Xe,Xpm:()=>B,Xts:()=>sc,Y36:()=>Xa,YKP:()=>Td,YNc:()=>lf,Yjl:()=>ce,Yz7:()=>en,Z0I:()=>Ii,ZZ4:()=>z_,_Bn:()=>$s,_UZ:()=>jg,_Vd:()=>D,_c5:()=>HE,_uU:()=>Pi,aQg:()=>ip,c2e:()=>S_,cJS:()=>bt,cg1:()=>da,dDg:()=>Zf,dqk:()=>Lt,eFA:()=>xE,ekj:()=>Pv,eoX:()=>Kf,f3M:()=>Ur,g9A:()=>_E,h0i:()=>Lc,hGG:()=>GE,hij:()=>vf,iGM:()=>v_,ifc:()=>at,ip1:()=>Pr,jDz:()=>Nf,kL8:()=>_d,lG2:()=>re,lqb:()=>Wn,lri:()=>Am,n5z:()=>Os,oAB:()=>it,oxw:()=>Sv,q4F:()=>dc,qLn:()=>ng,qOj:()=>Vg,qZA:()=>df,rWj:()=>qf,sBO:()=>lT,sIi:()=>od,s_b:()=>dm,soG:()=>zc,tb:()=>wE,tp0:()=>oo,uIk:()=>bc,vHH:()=>Ie,vpe:()=>Hs,wAp:()=>It,xp6:()=>Yy,z2F:()=>wu,zSh:()=>ys,zs3:()=>_e});var h=R(7579),Q=R(727),P=R(9751),ne=R(6451),de=R(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function oe(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ge(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ge).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const V=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ge(this())},i}function K(i){return Oe(i)?i():i}function Oe(i){return"function"==typeof i&&i.hasOwnProperty(V)&&i.__forward_ref__===j}class Ie extends Error{constructor(s,a){super(function Je(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i,s){throw new Ie(-201,!1)}function Pt(i,s){null==i&&function Ze(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function en(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function bt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ut(i){return qr(i,sr)||qr(i,or)}function Ii(i){return null!==Ut(i)}function qr(i,s){return i.hasOwnProperty(s)?i[s]:null}function kr(i){return i&&(i.hasOwnProperty(Ar)||i.hasOwnProperty(hi))?i[Ar]:null}const sr=pe({\u0275prov:pe}),Ar=pe({\u0275inj:pe}),or=pe({ngInjectableDef:pe}),hi=pe({ngInjectorDef:pe});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let vn;function yn(i){const s=vn;return vn=i,s}function Fr(i,s,a){const c=Ut(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Xe.Optional?null:void 0!==s?s:void we(ge(i))}function En(i){return{toString:i}.toString()}var On=(()=>((On=On||{})[On.OnPush=0]="OnPush",On[On.Default=1]="Default",On))(),at=(()=>{return(i=at||(at={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",at;var i})();const Lt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},Ct=[],Kr=pe({\u0275cmp:pe}),Kt=pe({\u0275dir:pe}),pr=pe({\u0275pipe:pe}),qt=pe({\u0275mod:pe}),z=pe({\u0275fac:pe}),U=pe({__NG_ELEMENT_ID__:pe});let k=0;function B(i){return En(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===On.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||at.Emulated,id:"c"+k++,styles:i.styles||Ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},p=i.dependencies,v=i.features;return l.inputs=tn(i.inputs,c),l.outputs=tn(i.outputs),v&&v.forEach(I=>I(l)),l.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ae).filter(ze):null,l.pipeDefs=p?()=>("function"==typeof p?p():p).map(We).filter(ze):null,l})}function Ae(i){return Ee(i)||Le(i)}function ze(i){return null!==i}function it(i){return En(()=>({type:i.type,bootstrap:i.bootstrap||Ct,declarations:i.declarations||Ct,imports:i.imports||Ct,exports:i.exports||Ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function tn(i,s){if(null==i)return Qn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),a[l]=c,s&&(s[l]=p)}return a}const re=B;function ce(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ee(i){return i[Kr]||null}function Le(i){return i[Kt]||null}function We(i){return i[pr]||null}function vt(i){const s=Ee(i)||Le(i)||We(i);return null!==s&&s.standalone}function wt(i,s){const a=i[qt]||null;if(!a&&!0===s)throw new Error(`Type ${ge(i)} does not have '\u0275mod' property.`);return a}function Sr(i){return Array.isArray(i)&&"object"==typeof i[1]}function gr(i){return Array.isArray(i)&&!0===i[1]}function zs(i){return 0!=(8&i.flags)}function ss(i){return 2==(2&i.flags)}function Da(i){return 1==(1&i.flags)}function Vr(i){return null!==i.template}function Qc(i){return 0!=(256&i[2])}function Ci(i,s){return i.hasOwnProperty(z)?i[z]:null}class as{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function us(){return Ds}function Ds(i){return i.type.prototype.ngOnChanges&&(i.setInput=xa),Ma}function Ma(){const i=Mu(this),s=i?.current;if(s){const a=i.previous;if(a===Qn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function xa(i,s,a,c){const l=Mu(i)||function cs(i,s){return i[Su]=s}(i,{previous:Qn,current:null}),p=l.current||(l.current={}),v=l.previous,I=this.declaredInputs[a],E=v[I];p[I]=new as(E&&E.currentValue,s,v===Qn),i[c]=s}us.ngInherit=!0;const Su="__ngSimpleChanges__";function Mu(i){return i[Su]||null}function Fn(i){for(;Array.isArray(i);)i=i[0];return i}function Ts(i,s){return Fn(s[i])}function si(i,s){return Fn(s[i.index])}function gi(i,s){return i.data[s]}function Zt(i,s){const a=s[i];return Sr(a)?a:a[0]}function ol(i){return 4==(4&i[2])}function Ys(i){return 64==(64&i[2])}function $i(i,s){return null==s?null:i[s]}function Na(i){i[18]=0}function ko(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const x={lFrame:ey(null),bindingsEnabled:!0};function ct(){return x.bindingsEnabled}function De(){return x.lFrame.lView}function yt(){return x.lFrame.tView}function Ot(i){return x.lFrame.contextLView=i,i[8]}function Hi(i){return x.lFrame.contextLView=null,i}function Tn(){let i=Fo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Fo(){return x.lFrame.currentTNode}function Rr(i,s){const a=x.lFrame;a.currentTNode=i,a.isParent=s}function Oa(){return x.lFrame.isParent}function Vo(){return x.lFrame.bindingIndex++}function v0(i,s){const a=x.lFrame;a.bindingIndex=a.bindingRootIndex=i,bp(s)}function bp(i){x.lFrame.currentDirectiveIndex=i}function Jm(){return x.lFrame.currentQueryIndex}function Nu(i){x.lFrame.currentQueryIndex=i}function Xm(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Yd(i,s,a){if(a&Xe.SkipSelf){let l=s,p=i;for(;!(l=l.parent,null!==l||a&Xe.Host||(l=Xm(p),null===l||(p=p[15],10&l.type))););if(null===l)return!1;s=l,i=p}const c=x.lFrame=Qd();return c.currentTNode=s,c.lView=i,!0}function Cp(i){const s=Qd(),a=i[1];x.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Qd(){const i=x.lFrame,s=null===i?null:i.child;return null===s?ey(i):s}function ey(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Jd(){const i=x.lFrame;return x.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dp=Jd;function Ou(){const i=Jd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function wr(){return x.lFrame.selectedIndex}function mi(i){x.lFrame.selectedIndex=i}function Mn(){const i=x.lFrame;return gi(i.tView,i.selectedIndex)}function ul(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:A}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(a,A)}}function cl(i,s,a){nh(i,s,3,a)}function Uo(i,s,a,c){(3&i[2])===a&&nh(i,s,a,c)}function th(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function nh(i,s,a,c){const p=c??-1,v=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<v;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<p||-1==p)&&(Tp(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Tp(i,s,a,c){const l=a[c]<0,p=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class Xs{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function ka(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const p=a[c++],v=a[c++],I=a[c++];i.setAttribute(s,v,I,p)}else{const p=l,v=a[++c];hl(p)?i.setProperty(s,p,v):i.setAttribute(s,p,v),c++}}return c}function ku(i){return 3===i||4===i||6===i}function hl(i){return 64===i.charCodeAt(0)}function Fu(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||Sp(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function Sp(i,s,a,c,l){let p=0,v=i.length;if(-1===s)v=-1;else for(;p<i.length;){const I=i[p++];if("number"==typeof I){if(I===s){v=-1;break}if(I>s){v=p-1;break}}}for(;p<i.length;){const I=i[p];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[p+1]=l));if(c===i[p+1])return void(i[p+2]=l)}p++,null!==c&&p++,null!==l&&p++}-1!==v&&(i.splice(v,0,s),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==l&&i.splice(p++,0,l)}function Mp(i){return-1!==i}function Lu(i){return 32767&i}function Uu(i,s){let a=function Vu(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let ds=!0;function fl(i){const s=ds;return ds=i,s}let ur=0;const Ns={};function ju(i,s){const a=pl(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,$u(c.data,i),$u(s,null),$u(c.blueprint,null));const l=gl(i,s),p=i.injectorIndex;if(Mp(l)){const v=Lu(l),I=Uu(l,s),E=I[1].data;for(let C=0;C<8;C++)s[p+C]=I[v+C]|E[v+C]}return s[p+8]=l,p}function $u(i,s){i.push(0,0,0,0,0,0,0,0,s)}function pl(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function gl(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=ml(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Fa(i,s,a){!function sh(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(U)&&(c=a[U]),null==c&&(c=a[U]=ur++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function La(i,s,a){if(a&Xe.Optional)return i;we()}function oh(i,s,a,c){if(a&Xe.Optional&&void 0===c&&(c=null),0==(a&(Xe.Self|Xe.Host))){const l=i[9],p=yn(void 0);try{return l?l.get(s,c,a&Xe.Optional):Fr(s,c,a&Xe.Optional)}finally{yn(p)}}return La(c,0,a)}function Hu(i,s,a,c=Xe.Default,l){if(null!==i){if(1024&s[2]){const v=function Ba(i,s,a,c,l){let p=i,v=s;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=Gu(p,v,a,c|Xe.Self,Ns);if(I!==Ns)return I;let E=p.parent;if(!E){const C=v[21];if(C){const A=C.get(a,Ns,c);if(A!==Ns)return A}E=ml(v),v=v[15]}p=E}return l}(i,s,a,c,Ns);if(v!==Ns)return v}const p=Gu(i,s,a,c,Ns);if(p!==Ns)return p}return oh(s,a,c,l)}function Gu(i,s,a,c,l){const p=function ah(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(U)?i[U]:void 0;return"number"==typeof s?s>=0?255&s:Op:s}(a);if("function"==typeof p){if(!Yd(s,i,c))return c&Xe.Host?La(l,0,c):oh(s,a,c,l);try{const v=p(c);if(null!=v||c&Xe.Optional)return v;we()}finally{Dp()}}else if("number"==typeof p){let v=null,I=pl(i,s),E=-1,C=c&Xe.Host?s[16][6]:null;for((-1===I||c&Xe.SkipSelf)&&(E=-1===I?gl(i,s):s[I+8],-1!==E&&uh(c,!1)?(v=s[1],I=Lu(E),s=Uu(E,s)):I=-1);-1!==I;){const A=s[1];if(Np(p,I,A.data)){const O=_0(I,s,a,v,c,C);if(O!==Ns)return O}E=s[I+8],-1!==E&&uh(c,s[1].data[I+8]===C)&&Np(p,I,s)?(v=A,I=Lu(E),s=Uu(E,s)):I=-1}}return l}function _0(i,s,a,c,l,p){const v=s[1],I=v.data[i+8],A=Va(I,v,a,null==c?ss(I)&&ds:c!=v&&0!=(3&I.type),l&Xe.Host&&p===I);return null!==A?eo(s,v,A,I):Ns}function Va(i,s,a,c,l){const p=i.providerIndexes,v=s.data,I=1048575&p,E=i.directiveStart,A=p>>20,$=l?I+A:i.directiveEnd;for(let X=c?I:I+A;X<$;X++){const Te=v[X];if(X<E&&a===Te||X>=E&&Te.type===a)return X}if(l){const X=v[E];if(X&&Vr(X)&&X.type===a)return E}return null}function eo(i,s,a,c){let l=i[a];const p=s.data;if(function Bo(i){return i instanceof Xs}(l)){const v=l;v.resolving&&function ot(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ue(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(p[a]));const I=fl(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?yn(v.injectImpl):null;Yd(i,c,Xe.Default);try{l=i[a]=v.factory(void 0,p,i,c),s.firstCreatePass&&a>=c.directiveStart&&function eh(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:p}=s.type.prototype;if(c){const v=Ds(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==E&&yn(E),fl(I),v.resolving=!1,Dp()}}return l}function Np(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function uh(i,s){return!(i&Xe.Self||i&Xe.Host&&s)}class Ua{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Hu(this._tNode,this._lView,s,c,a)}}function Op(){return new Ua(Tn(),De())}function Os(i){return En(()=>{const s=i.prototype.constructor,a=s[z]||Pp(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const p=l[z]||Pp(l);if(p&&p!==a)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Pp(i){return Oe(i)?()=>{const s=Pp(K(i));return s&&s()}:Ci(i)}function ml(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function yl(i){return function Rp(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const p=a[l];if(ku(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(p===s)return a[l+1];l+=2}}}return null}(Tn(),i)}const jo="__parameters__";function qu(i,s,a){return En(()=>{const c=function lh(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...p){if(this instanceof l)return c.apply(this,p),this;const v=new l(...p);return I.annotation=v,I;function I(E,C,A){const O=E.hasOwnProperty(jo)?E[jo]:Object.defineProperty(E,jo,{value:[]})[jo];for(;O.length<=A;)O.push(null);return(O[A]=O[A]||[]).push(v),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class Cn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=en({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ln(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Ln(c,s)):s!==i&&s.push(c)}return s}function Gi(i,s){i.forEach(a=>Array.isArray(a)?Gi(a,s):s(a))}function Zu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Yr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function gt(i,s,a){let c=$a(i,s);return c>=0?i[1|c]=a:(c=~c,function hh(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function fh(i,s){const a=$a(i,s);if(a>=0)return i[1|a]}function $a(i,s){return function wl(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const p=c+(l-c>>1),v=i[p<<a];if(s===v)return p<<a;v>s?l=p:c=p+1}return~(l<<a)}(i,s,1)}const hs={},gh="__NG_DI_FLAG__",Ha="ngTempTokenPath",fs=/\n/gm,Nr="__source";let Ps;function io(i){const s=Ps;return Ps=i,s}function Vn(i,s=Xe.Default){if(void 0===Ps)throw new Ie(-203,!1);return null===Ps?Fr(i,void 0,s):Ps.get(i,s&Xe.Optional?null:void 0,s)}function xn(i,s=Xe.Default){return(function Zr(){return vn}()||Vn)(K(i),s)}function Ur(i,s=Xe.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),xn(i,s)}function br(i){const s=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let l,p=Xe.Default;for(let v=0;v<c.length;v++){const I=c[v],E=Dl(I);"number"==typeof E?-1===E?l=I.token:p|=E:l=I}s.push(xn(l,p))}else s.push(xn(c))}return s}function so(i,s){return i[gh]=s,i.prototype[gh]=s,i}function Dl(i){return i[gh]}const cr=so(qu("Optional"),8),oo=so(qu("SkipSelf"),4);let wh;function Up(i){wh=i}class Rl{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Mi(i){return i instanceof Rl?i.changingThisBreaksApplicationSecurity:i}const yy=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function ic(i){const s=function Yo(){const i=De();return i&&i[12]}();return s?s.sanitize(er.URL,i)||"":function co(i,s){const a=function Eh(i){return i instanceof Rl&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Mi(i):function ho(i){return(i=String(i)).match(yy)?i:"unsafe:"+i}(me(i))}const sc=new Cn("ENVIRONMENT_INITIALIZER"),Sh=new Cn("INJECTOR",-1),Zp=new Cn("INJECTOR_DEF_TYPES");class Ll{get(s,a=hs){if(a===hs){const c=new Error(`NullInjectorError: No provider for ${ge(s)}!`);throw c.name="NullInjectorError",c}return a}}function Kp(...i){return{\u0275providers:Qr(0,i)}}function Qr(i,...s){const a=[],c=new Set;let l;return Gi(s,p=>{const v=p;oc(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&Wa(l,a),a}function Wa(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];Gi(l,p=>{s.push(p)})}}function oc(i,s,a,c){if(!(i=K(i)))return!1;let l=null,p=kr(i);const v=!p&&Ee(i);if(p||v){if(v&&!v.standalone)return!1;l=i}else{const E=i.ngModule;if(p=kr(E),!p)return!1;l=E}const I=c.has(l);if(v){if(I)return!1;if(c.add(l),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const C of E)oc(C,s,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let C;c.add(l);try{Gi(p.imports,A=>{oc(A,s,a,c)&&(C||(C=[]),C.push(A))})}finally{}void 0!==C&&Wa(C,s)}if(!I){const C=Ci(l)||(()=>new l);s.push({provide:l,useFactory:C,deps:Ct},{provide:Zp,useValue:l,multi:!0},{provide:sc,useValue:()=>xn(l),multi:!0})}const E=p.providers;null==E||I||Gi(E,A=>{s.push(A)})}}return l!==i&&void 0!==i.providers}const ac=pe({provide:String,useValue:pe});function vi(i){return null!==i&&"object"==typeof i&&ac in i}function go(i){return"function"==typeof i}const ys=new Cn("Set Injector scope."),uc={},Ty={};let qa;function Za(){return void 0===qa&&(qa=new Ll),qa}class Wn{}class cc extends Wn{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bl(s,v=>this.processProvider(v)),this.records.set(Sh,Xo(void 0,this)),l.has("environment")&&this.records.set(Wn,Xo(void 0,this));const p=this.records.get(ys);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Zp.multi,Ct,Xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=io(this),c=yn(void 0);try{return s()}finally{io(a),yn(c)}}get(s,a=hs,c=Xe.Default){this.assertNotDestroyed();const l=io(this),p=yn(void 0);try{if(!(c&Xe.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Ul(i){return"function"==typeof i||"object"==typeof i&&i instanceof Cn}(s)&&Ut(s);I=E&&this.injectableDefInScope(E)?Xo(Jo(s),uc):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Xe.Self?Za():this.parent).get(s,a=c&Xe.Optional&&a===hs?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Ha]=v[Ha]||[]).unshift(ge(s)),l)throw v;return function dy(i,s,a,c){const l=i[Ha];throw s[Nr]&&l.unshift(s[Nr]),i.message=function ks(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=ge(s);if(Array.isArray(s))l=s.map(ge).join(" -> ");else if("object"==typeof s){let p=[];for(let v in s)if(s.hasOwnProperty(v)){let I=s[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):ge(I)))}l=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(fs,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Ha]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{yn(p),io(l)}}resolveInjectorInitializers(){const s=io(this),a=yn(void 0);try{const c=this.get(sc.multi,Ct,Xe.Self);for(const l of c)l()}finally{io(s),yn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ge(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(s){let a=go(s=K(s))?s:K(s&&s.provide);const c=function Us(i){return vi(i)?Xo(void 0,i.useValue):Xo(vs(i),uc)}(s);if(go(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Xo(void 0,uc,!0),l.factory=()=>br(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===uc&&(a.value=Ty,a.value=a.factory()),"object"==typeof a.value&&a.value&&function xh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Jo(i){const s=Ut(i),a=null!==s?s.factory:Ci(i);if(null!==a)return a;if(i instanceof Cn)throw new Ie(204,!1);if(i instanceof Function)return function Mh(i){const s=i.length;if(s>0)throw function to(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Ie(204,!1);const a=function ir(i){const s=i&&(i[sr]||i[or]);if(s){const a=function In(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ie(204,!1)}function vs(i,s,a){let c;if(go(i)){const l=K(i);return Ci(l)||Jo(l)}if(vi(i))c=()=>K(i.useValue);else if(function Vl(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...br(i.deps||[]));else if(function Qo(i){return!(!i||!i.useExisting)}(i))c=()=>xn(K(i.useExisting));else{const l=K(i&&(i.useClass||i.provide));if(!function Qp(i){return!!i.deps}(i))return Ci(l)||Jo(l);c=()=>new l(...br(i.deps))}return c}function Xo(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Jp(i){return!!i.\u0275providers}function Bl(i,s){for(const a of i)Array.isArray(a)?Bl(a,s):Jp(a)?Bl(a.\u0275providers,s):s(a)}class eg{}class _{resolveComponentFactory(s){throw function y(i){const s=Error(`No component factory found for ${ge(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let D=(()=>{class i{}return i.NULL=new _,i})();function M(){return G(Tn(),De())}function G(i,s){return new le(si(i,s))}let le=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=M,i})();function qe(i){return i instanceof le?i.nativeElement:i}class At{}let _t=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function mr(){const i=De(),a=Zt(Tn().index,i);return(Sr(a)?a:i)[11]}(),i})(),qi=(()=>{class i{}return i.\u0275prov=en({token:i,providedIn:"root",factory:()=>null}),i})();class lc{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const dc=new lc("14.2.0"),Br={};function xy(i){return i.ngOriginalError}class ng{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&xy(s);for(;a&&xy(a);)a=xy(a);return a||null}}const Ny=new Map;let Gb=0;const Hl="__ngContext__";function oi(i,s){Sr(s)?(i[Hl]=s[20],function Wb(i){Ny.set(i[20],i)}(s)):i[Hl]=s}function Nh(i){const s=i[Hl];return"number"==typeof s?function k0(i){return Ny.get(i)||null}(s):s||null}function Oy(i){const s=Nh(i);return s?Sr(s)?s:s.lView:null}function ta(i){return i instanceof Function?i():i}var vo=(()=>((vo=vo||{})[vo.Important=1]="Important",vo[vo.DashCase=2]="DashCase",vo))();function cg(i,s){return undefined(i,s)}function zl(i){const s=i[3];return gr(s)?s[3]:s}function Vy(i){return H0(i[13])}function Uy(i){return H0(i[4])}function H0(i){for(;null!==i&&!gr(i);)i=i[4];return i}function Wl(i,s,a,c,l){if(null!=c){let p,v=!1;gr(c)?p=c:Sr(c)&&(v=!0,c=c[0]);const I=Fn(c);0===i&&null!==a?null==l?W0(s,a,I):gc(s,a,I,l||null,!0):1===i&&null!==a?gc(s,a,I,l||null,!0):2===i?function pg(i,s,a){const c=yr(i,s);c&&function oC(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,v):3===i&&s.destroyNode(I),null!=p&&function Zl(i,s,a,c,l){const p=a[7];p!==Fn(a)&&Wl(s,i,c,p,l);for(let I=10;I<a.length;I++){const E=a[I];Ya(E[1],E,i,s,c,p)}}(s,i,p,a,l)}}function lg(i,s,a){return i.createElement(s,a)}function kh(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,ko(l,-1)),a.splice(c,1)}function dg(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&kh(l,c),s>0&&(i[a-1][4]=c[4]);const p=Yr(i,10+s);!function G0(i,s){Ya(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function hg(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Ya(i,s,a,3,null,null),function tC(i){let s=i[13];if(!s)return Fh(i[1],i);for(;s;){let a=null;if(Sr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Sr(s)&&Fh(s[1],s),s=s[3];null===s&&(s=i),Sr(s)&&Fh(s[1],s),a=s&&s[4]}s=a}}(s)}}function Fh(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function sC(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof Xs)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=l[p[v]],E=p[v+1];try{E.call(I)}finally{}}else try{p.call(l)}finally{}}}}(i,s),function iC(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],I="function"==typeof v?v(s):Fn(s[v]),E=c[l=a[p+2]],C=a[p+3];"boolean"==typeof C?I.removeEventListener(a[p],E,C):C>=0?c[l=C]():c[l=-C].unsubscribe(),p+=2}else{const v=c[l=a[p+1]];a[p].call(v)}if(null!==c){for(let p=l+1;p<c.length;p++)(0,c[p])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&gr(s[3])){a!==s[3]&&kh(a,s);const c=s[19];null!==c&&c.detachView(i)}!function F0(i){Ny.delete(i[20])}(s)}}function Lh(i,s,a){return function z0(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===at.None||l===at.Emulated)return null}return si(c,a)}(i,s.parent,a)}function gc(i,s,a,c,l){i.insertBefore(s,a,c,l)}function W0(i,s,a){i.appendChild(s,a)}function q0(i,s,a,c,l){null!==c?gc(i,s,a,c,l):W0(i,s,a)}function yr(i,s){return i.parentNode(s)}let fg=function ql(i,s,a){return 40&i.type?si(i,a):null};function Vh(i,s,a,c){const l=Lh(i,c,s),p=s[11],I=function Hy(i,s,a){return fg(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)q0(p,l,a[E],I,!1);else q0(p,l,a,I,!1)}function zy(i,s){if(null!==s){const a=s.type;if(3&a)return si(s,i);if(4&a)return Wy(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return zy(i,c);{const l=i[s.index];return gr(l)?Wy(-1,l):Fn(l)}}if(32&a)return cg(s,i)()||Fn(i[s.index]);{const c=cC(i,s);return null!==c?Array.isArray(c)?c[0]:zy(zl(i[16]),c):zy(i,s.next)}}return null}function cC(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Wy(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return zy(c,l)}return s[7]}function gg(i,s,a,c,l,p,v){for(;null!=a;){const I=c[a.index],E=a.type;if(v&&0===s&&(I&&oi(Fn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)gg(i,s,a.child,c,l,p,!1),Wl(s,i,l,I,p);else if(32&E){const C=cg(a,c);let A;for(;A=C();)Wl(s,i,l,A,p);Wl(s,i,l,I,p)}else 16&E?qy(i,s,c,a,l,p):Wl(s,i,l,I,p);a=v?a.projectionNext:a.next}}function Ya(i,s,a,c,l,p){gg(a,c,i.firstChild,s,l,p,!1)}function qy(i,s,a,c,l,p){const v=a[16],E=v[6].projection[c.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)Wl(s,i,l,E[C],p);else gg(i,s,E,v[3],l,p,!0)}function lC(i,s,a){i.setAttribute(s,"style",a)}function mg(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Ky(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const p=s.length;if(l+p===c||i.charCodeAt(l+p)<=32)return l}a=l+1}}const Y0="ng-template";function dC(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==Ky(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function Q0(i){return 4===i.type&&i.value!==Y0}function J0(i,s,a){return s===(4!==i.type||a?i.value:Y0)}function hC(i,s,a){let c=4;const l=i.attrs||[],p=function pC(i){for(let s=0;s<i.length;s++)if(ku(i[s]))return s;return i.length}(l);let v=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!J0(i,E,a)||""===E&&1===s.length){if(_o(c))return!1;v=!0}}else{const C=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!dC(i.attrs,C,a)){if(_o(c))return!1;v=!0}continue}const O=yg(8&c?"class":E,l,Q0(i),a);if(-1===O){if(_o(c))return!1;v=!0;continue}if(""!==C){let $;$=O>p?"":l[O+1].toLowerCase();const X=8&c?$:null;if(X&&-1!==Ky(X,C,0)||2&c&&C!==$){if(_o(c))return!1;v=!0}}}}else{if(!v&&!_o(c)&&!_o(E))return!1;if(v&&_o(E))continue;v=!1,c=E|1&c}}return _o(c)||v}function _o(i){return 0==(1&i)}function yg(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let p=!1;for(;l<s.length;){const v=s[l];if(v===i)return l;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=p?1:2}return-1}return function gC(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function fC(i,s,a=!1){for(let c=0;c<s.length;c++)if(hC(i,s[c],a))return!0;return!1}function tw(i,s){return i?":not("+s.trim()+")":s}function mC(i){let s=i[0],a=1,c=2,l="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];l+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!_o(v)&&(s+=tw(p,l),l=""),c=v,p=p||!_o(c);a++}return""!==l&&(s+=tw(p,l)),s}const jt={};function Yy(i){nw(yt(),De(),wr()+i,!1)}function nw(i,s,a,c){if(!c)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&cl(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Uo(s,p,0,a)}mi(a)}function EC(i,s=null,a=null,c){const l=sw(i,s,a,c);return l.resolveInjectorInitializers(),l}function sw(i,s=null,a=null,c,l=new Set){const p=[a||Ct,Kp(i)];return c=c||("object"==typeof i?void 0:ge(i)),new cc(p,s||Za(),c||null,l)}let _e=(()=>{class i{static create(a,c){if(Array.isArray(a))return EC({name:""},c,a,"");{const l=a.name??"";return EC({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=hs,i.NULL=new Ll,i.\u0275prov=en({token:i,providedIn:"any",factory:()=>xn(Sh)}),i.__NG_ELEMENT_ID__=-1,i})();function Xa(i,s=Xe.Default){const a=De();return null===a?xn(i,s):Hu(Tn(),a,K(i),s)}function ai(){throw new Error("invalid")}function Bh(i,s){return i<<17|s<<2}function Zi(i){return i>>17&32767}function Eg(i){return 2|i}function Bs(i){return(131068&i)>>2}function rv(i,s){return-131069&i|s<<2}function eu(i){return 1|i}function Cw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],p=a[c+1];if(-1!==p){const v=i.data[p];Nu(l),v.contentQueries(2,s[p],p)}}}function Ag(i,s,a,c,l,p,v,I,E,C,A){const O=s.blueprint.slice();return O[0]=l,O[2]=76|c,(null!==A||i&&1024&i[2])&&(O[2]|=1024),Na(O),O[3]=O[15]=i,O[8]=a,O[10]=v||i&&i[10],O[11]=I||i&&i[11],O[12]=E||i&&i[12]||null,O[9]=C||i&&i[9]||null,O[6]=p,O[20]=function zb(){return Gb++}(),O[21]=A,O[16]=2==s.type?i[16]:O,O}function tu(i,s,a,c,l){let p=i.data[s];if(null===p)p=function Zh(i,s,a,c,l){const p=Fo(),v=Oa(),E=i.data[s]=function VC(i,s,a,c,l,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==p&&(v?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}(i,s,a,c,l),function y0(){return x.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=l;const v=function Di(){const i=x.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Rr(p,!0),p}function ed(i,s,a,c){if(0===a)return-1;const l=s.length;for(let p=0;p<a;p++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function td(i,s,a){Cp(s);try{const c=i.viewQuery;null!==c&&tf(1,c,a);const l=i.template;null!==l&&Kh(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Cw(i,s),i.staticViewQueries&&tf(2,i.viewQuery,a);const p=i.components;null!==p&&function kC(i,s){for(let a=0;a<s.length;a++)Vw(i,s[a])}(s,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Ou()}}function nd(i,s,a,c){const l=s[2];if(128!=(128&l)){Cp(s);try{Na(s),function Zd(i){return x.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Kh(i,s,a,2,c);const v=3==(3&l);if(v){const C=i.preOrderCheckHooks;null!==C&&cl(s,C,null)}else{const C=i.preOrderHooks;null!==C&&Uo(s,C,0,null),th(s,0)}if(function hv(i){for(let s=Vy(i);null!==s;s=Uy(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],p=l[3];0==(512&l[2])&&ko(p,1),l[2]|=512}}}(s),function Og(i){for(let s=Vy(i);null!==s;s=Uy(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Ys(c)&&nd(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&Cw(i,s),v){const C=i.contentCheckHooks;null!==C&&cl(s,C)}else{const C=i.contentHooks;null!==C&&Uo(s,C,1),th(s,1)}!function PC(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)mi(~l);else{const p=l,v=a[++c],I=a[++c];v0(v,p),I(2,s[p])}}}finally{mi(-1)}}(i,s);const I=i.components;null!==I&&function Dw(i,s){for(let a=0;a<s.length;a++)Lw(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&tf(2,E,c),v){const C=i.viewCheckHooks;null!==C&&cl(s,C)}else{const C=i.viewHooks;null!==C&&Uo(s,C,2),th(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,ko(s[3],-1))}finally{Ou()}}}function FC(i,s,a,c){const l=s[10],v=ol(s);try{!v&&l.begin&&l.begin(),v&&td(i,s,c),nd(i,s,a,c)}finally{!v&&l.end&&l.end()}}function Kh(i,s,a,c,l){const p=wr(),v=2&c;try{mi(-1),v&&s.length>22&&nw(i,s,22,!1),a(c,l)}finally{mi(p)}}function Yh(i,s,a){!ct()||(function Nw(i,s,a,c){const l=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||ju(a,s),oi(c,s);const v=a.initialInputs;for(let I=l;I<p;I++){const E=i.data[I],C=Vr(E);C&&dv(s,a,E);const A=eo(s,i,I,a);oi(A,s),null!==v&&ef(0,I-l,A,E,0,v),C&&(Zt(a.index,s)[8]=A)}}(i,s,a,si(a,s)),128==(128&a.flags)&&function Jh(i,s,a){const c=a.directiveStart,l=a.directiveEnd,p=a.index,v=function Ep(){return x.lFrame.currentDirectiveIndex}();try{mi(p);for(let I=c;I<l;I++){const E=i.data[I],C=s[I];bp(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Xh(E,C)}}finally{mi(-1),bp(v)}}(i,s,a))}function Mg(i,s,a=si){const c=s.localNames;if(null!==c){let l=s.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],I=-1===v?a(s,i):i[v];i[l++]=I}}}function Tw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=yc(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function yc(i,s,a,c,l,p,v,I,E,C){const A=22+c,O=A+l,$=function Aw(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:jt);return a}(A,O),X="function"==typeof C?C():C;return $[1]={type:i,blueprint:$,template:a,queries:null,viewQuery:I,declTNode:s,data:$.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:X,incompleteFirstPass:!1}}function Qh(i,s,a,c){const l=Lg(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&su(i).push(c,l.length-1))}function Mw(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function vc(i,s){const c=s.directiveEnd,l=i.data,p=s.attrs,v=[];let I=null,E=null;for(let C=s.directiveStart;C<c;C++){const A=l[C],O=A.inputs,$=null===p||Q0(s)?null:Fw(O,p);v.push($),I=Mw(O,C,I),E=Mw(A.outputs,C,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=I,s.outputs=E}function nu(i,s){const a=Zt(s,i);16&a[2]||(a[2]|=32)}function _c(i,s,a,c){let l=!1;if(ct()){const p=function Ow(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];fC(a,v.selectors,!1)&&(l||(l=[]),Fa(ju(a,s),i,v.type),Vr(v)?(xg(i,a),l.unshift(v)):l.push(v))}return l}(i,s,a),v=null===c?null:{"":-1};if(null!==p){l=!0,rd(a,i.data.length,p.length);for(let A=0;A<p.length;A++){const O=p[A];O.providersResolver&&O.providersResolver(O)}let I=!1,E=!1,C=ed(i,s,p.length,null);for(let A=0;A<p.length;A++){const O=p[A];a.mergedAttrs=Fu(a.mergedAttrs,O.hostAttrs),Rg(i,a,s,C,O),kw(C,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const $=O.type.prototype;!I&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&($.ngOnChanges||$.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),C++}vc(i,a)}v&&function Pw(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const p=a[s[l+1]];if(null==p)throw new Ie(-301,!1);c.push(s[l],p)}}}(a,c,v)}return a.mergedAttrs=Fu(a.mergedAttrs,a.attrs),l}function lv(i,s,a,c,l,p){const v=p.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function _i(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,v)}}function Xh(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function xg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function kw(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Vr(s)&&(a[""]=i)}}function rd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Rg(i,s,a,c,l){i.data[c]=l;const p=l.factory||(l.factory=Ci(l.type)),v=new Xs(p,Vr(l),Xa);i.blueprint[c]=v,a[c]=v,lv(i,s,0,c,ed(i,a,l.hostVars,jt),l)}function dv(i,s,a){const c=si(s,i),l=Tw(a),p=i[10],v=ru(i,Ag(i,l,null,a.onPush?32:16,c,s,p,p.createRenderer(c,a),null,null,null));i[s.index]=v}function _s(i,s,a,c,l,p){const v=si(i,s);!function id(i,s,a,c,l,p,v){if(null==p)i.removeAttribute(s,l,a);else{const I=null==v?me(p):v(p,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],v,p,i.value,a,c,l)}function ef(i,s,a,c,l,p){const v=p[s];if(null!==v){const I=c.setInput;for(let E=0;E<v.length;){const C=v[E++],A=v[E++],O=v[E++];null!==I?c.setInput(a,O,C,A):a[A]=O}}}function Fw(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Ng(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function Lw(i,s){const a=Zt(s,i);if(Ys(a)){const c=a[1];48&a[2]?nd(c,a,c.template,a[8]):a[5]>0&&Pg(a)}}function Pg(i){for(let c=Vy(i);null!==c;c=Uy(c))for(let l=10;l<c.length;l++){const p=c[l];if(Ys(p))if(512&p[2]){const v=p[1];nd(v,p,v.template,p[8])}else p[5]>0&&Pg(p)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Zt(a[c],i);Ys(l)&&l[5]>0&&Pg(l)}}function Vw(i,s){const a=Zt(s,i),c=a[1];(function BC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),td(c,a,a[8])}function ru(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function kg(i){for(;i;){i[2]|=32;const s=zl(i);if(Qc(i)&&!s)return i;i=s}return null}function tf(i,s,a){Nu(0),s(i,a)}function Lg(i){return i[7]||(i[7]=[])}function su(i){return i.cleanup||(i.cleanup=[])}function Bw(i,s){const a=i[9],c=a?a.get(ng,null):null;c&&c.handleError(s)}function ra(i,s,a,c,l){for(let p=0;p<a.length;){const v=a[p++],I=a[p++],E=s[v],C=i.data[v];null!==C.setInput?C.setInput(E,l,c,I):E[I]=l}}function Ic(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,p=0;if(null!==s)for(let v=0;v<s.length;v++){const I=s[v];"number"==typeof I?p=I:1==p?l=he(l,I):2==p&&(c=he(c,I+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function Ec(i,s,a,c,l=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&c.push(Fn(p)),gr(p))for(let I=10;I<p.length;I++){const E=p[I],C=E[1].firstChild;null!==C&&Ec(E[1],E,C,c)}const v=a.type;if(8&v)Ec(i,s,a.child,c);else if(32&v){const I=cg(a,s);let E;for(;E=I();)c.push(E)}else if(16&v){const I=cC(s,a);if(Array.isArray(I))c.push(...I);else{const E=zl(s[16]);Ec(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class ou{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Ec(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(gr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(dg(s,c),Yr(a,c))}this._attachedToViewContainer=!1}hg(this._lView[1],this._lView)}onDestroy(s){Qh(this._lView[1],this._lView,null,s)}markForCheck(){kg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function wc(i,s,a){const c=s[10];c.begin&&c.begin();try{nd(i,s,i.template,a)}catch(l){throw Bw(s,l),l}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function eC(i,s){Ya(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=s}}class jw extends ou{constructor(s){super(s),this._view=s}detectChanges(){!function iu(i){!function Fg(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],c=Oy(a);if(null!==c){const l=c[1];FC(l,c,l.template,a)}}}(i[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Rn extends D{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ee(s);return new ia(a,this.ngModule)}}function rf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class $C{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,Br,c);return l!==Br||a===Br?l:this.parentInjector.get(s,a,c)}}class ia extends eg{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function yC(i){return i.map(mC).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return rf(this.componentDef.inputs)}get outputs(){return rf(this.componentDef.outputs)}create(s,a,c,l){let p=(l=l||this.ngModule)instanceof Wn?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new $C(s,p):s,I=v.get(At,null);if(null===I)throw new Ie(407,!1);const E=v.get(qi,null),C=I.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=c?function Sw(i,s,a){return i.selectRootElement(s,a===at.ShadowDom)}(C,c,this.componentDef.encapsulation):lg(I.createRenderer(null,this.componentDef),A,function jC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),$=this.componentDef.onPush?288:272,X={components:[]},Te=yc(0,null,null,1,0,null,null,null,null,null),He=Ag(null,Te,X,$,null,null,I,C,E,v,null);let Qe,tt;Cp(He);try{const St=function HC(i,s,a,c,l,p){const v=a[1];a[22]=i;const E=tu(v,22,2,"#host",null),C=E.mergedAttrs=s.hostAttrs;null!==C&&(Ic(E,C,!0),null!==i&&(ka(l,i,C),null!==E.classes&&mg(l,i,E.classes),null!==E.styles&&lC(l,i,E.styles)));const A=c.createRenderer(i,s),O=Ag(a,Tw(s),null,s.onPush?32:16,a[22],E,c,A,p||null,null,null);return v.firstCreatePass&&(Fa(ju(E,a),v,s.type),xg(v,E),rd(E,a.length,1)),ru(a,O),a[22]=O}(O,this.componentDef,He,I,C);if(O)if(c)ka(C,O,["ng-version",dc.full]);else{const{attrs:ke,classes:Et}=function vC(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===l?""!==p&&s.push(p,i[++c]):8===l&&a.push(p);else{if(!_o(l))break;l=p}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);ke&&ka(C,O,ke),Et&&Et.length>0&&mg(C,O,Et.join(" "))}if(tt=gi(Te,22),void 0!==a){const ke=tt.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const cn=a[Et];ke.push(null!=cn?Array.from(cn):null)}}Qe=function GC(i,s,a,c,l){const p=a[1],v=function Rw(i,s,a){const c=Tn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Rg(i,c,s,ed(i,s,1,null),a),vc(i,c));const l=eo(s,i,c.directiveStart,c);oi(l,s);const p=si(c,s);return p&&oi(p,s),l}(p,a,s);if(c.components.push(v),i[8]=v,null!==l)for(const E of l)E(v,s);if(s.contentQueries){const E=Tn();s.contentQueries(1,v,E.directiveStart)}const I=Tn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(mi(I.index),lv(a[1],I,0,I.directiveStart,I.directiveEnd,s),Xh(s,v)),v}(St,this.componentDef,He,X,[af]),td(Te,He,null)}finally{Ou()}return new $w(this.componentType,Qe,G(tt,He),He,tt)}}class $w extends class Xp{}{constructor(s,a,c,l,p){super(),this.location=c,this._rootLView=l,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new jw(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const p=this._rootLView;ra(p[1],p,l,s,a),nu(p,this._tNode.index)}}get injector(){return new Ua(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function af(){const i=Tn();ul(De()[1],i)}function Vg(i){let s=function sa(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(Vr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ie(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=Ug(i.inputs),v.declaredInputs=Ug(i.declaredInputs),v.outputs=Ug(i.outputs);const I=l.hostBindings;I&&qC(i,I);const E=l.viewQuery,C=l.contentQueries;if(E&&sd(i,E),C&&WC(i,C),oe(i.inputs,l.inputs),oe(i.declaredInputs,l.declaredInputs),oe(i.outputs,l.outputs),Vr(l)&&l.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let v=0;v<p.length;v++){const I=p[v];I&&I.ngInherit&&I(i),I===Vg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Hw(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=Fu(l.hostAttrs,a=Fu(a,l.hostAttrs))}}(c)}function Ug(i){return i===Qn?{}:i===Ct?[]:i}function sd(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function WC(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,p)=>{s(c,l,p),a(c,l,p)}:s}function qC(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let uf=null;function oa(){if(!uf){const i=Lt.Symbol;if(i&&i.iterator)uf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(uf=c)}}}return uf}function od(i){return!!gv(i)&&(Array.isArray(i)||!(i instanceof Map)&&oa()in i)}function gv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Cr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function bc(i,s,a,c){const l=De();return Cr(l,Vo(),s)&&(yt(),_s(Mn(),l,i,s,a,c)),bc}function lf(i,s,a,c,l,p,v,I){const E=De(),C=yt(),A=i+22,O=C.firstCreatePass?function wv(i,s,a,c,l,p,v,I,E){const C=s.consts,A=tu(s,i,4,v||null,$i(C,I));_c(s,a,A,$i(C,E)),ul(s,A);const O=A.tViews=yc(2,A,c,l,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,A),O.queries=s.queries.embeddedTView(A)),A}(A,C,E,s,a,c,l,p,v):C.data[A];Rr(O,!1);const $=E[11].createComment("");Vh(C,E,$,O),oi($,E),ru(E,E[A]=Ng($,E,$,O)),Da(O)&&Yh(C,E,O),null!=v&&Mg(E,O,I)}function pd(i,s,a){const c=De();return Cr(c,Vo(),s)&&function Ki(i,s,a,c,l,p,v,I){const E=si(s,a);let A,C=s.inputs;!I&&null!=C&&(A=C[c])?(ra(i,a,A,c,l),ss(s)&&nu(a,s.index)):3&s.type&&(c=function UC(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,s.value||"",c):l,p.setProperty(E,c,l))}(yt(),Mn(),c,i,s,c[11],a,!1),pd}function Ev(i,s,a,c,l){const v=l?"class":"style";ra(i,a,s.inputs[v],v,c)}function uu(i,s,a,c){const l=De(),p=yt(),v=22+i,I=l[11],E=l[v]=lg(I,s,function al(){return x.lFrame.currentNamespace}()),C=p.firstCreatePass?function Qw(i,s,a,c,l,p,v){const I=s.consts,C=tu(s,i,2,l,$i(I,p));return _c(s,a,C,$i(I,v)),null!==C.attrs&&Ic(C,C.attrs,!1),null!==C.mergedAttrs&&Ic(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(v,p,l,0,s,a,c):p.data[v];Rr(C,!0);const A=C.mergedAttrs;null!==A&&ka(I,E,A);const O=C.classes;null!==O&&mg(I,E,O);const $=C.styles;return null!==$&&lC(I,E,$),64!=(64&C.flags)&&Vh(p,l,E,C),0===function ae(){return x.lFrame.elementDepthCount}()&&oi(E,l),function Fe(){x.lFrame.elementDepthCount++}(),Da(C)&&(Yh(p,l,C),function Sg(i,s,a){if(zs(s)){const l=s.directiveEnd;for(let p=s.directiveStart;p<l;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,C,l)),null!==c&&Mg(l,C),uu}function df(){let i=Tn();Oa()?function Lo(){x.lFrame.isParent=!1}():(i=i.parent,Rr(i,!1));const s=i;!function Ke(){x.lFrame.elementDepthCount--}();const a=yt();return a.firstCreatePass&&(ul(a,i),zs(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ll(i){return 0!=(16&i.flags)}(s)&&Ev(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ap(i){return 0!=(32&i.flags)}(s)&&Ev(a,s,De(),s.stylesWithoutHost,!1),df}function jg(i,s,a,c){return uu(i,s,a,c),df(),jg}function Cv(){return De()}function Hg(i){return!!i&&"function"==typeof i.then}function cu(i){return!!i&&"function"==typeof i.subscribe}const Dv=cu;function Gg(i,s,a,c){const l=De(),p=yt(),v=Tn();return function pf(i,s,a,c,l,p,v,I){const E=Da(c),A=i.firstCreatePass&&su(i),O=s[8],$=Lg(s);let X=!0;if(3&c.type||I){const Qe=si(c,s),tt=I?I(Qe):Qe,St=$.length,ke=I?cn=>I(Fn(cn[c.index])):c.index;let Et=null;if(!I&&E&&(Et=function Jw(i,s,a,c){const l=i.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const v=l[p];if(v===a&&l[p+1]===c){const I=s[7],E=l[p+2];return I.length>E?I[E]:null}"string"==typeof v&&(p+=2)}return null}(i,s,l,c.index)),null!==Et)(Et.__ngLastListenerFn__||Et).__ngNextListenerFn__=p,Et.__ngLastListenerFn__=p,X=!1;else{p=Av(c,s,O,p,!1);const cn=a.listen(tt,l,p);$.push(p,cn),A&&A.push(l,ke,St,St+1)}}else p=Av(c,s,O,p,!1);const Te=c.outputs;let He;if(X&&null!==Te&&(He=Te[l])){const Qe=He.length;if(Qe)for(let tt=0;tt<Qe;tt+=2){const Hn=s[He[tt]][He[tt+1]].subscribe(p),ba=$.length;$.push(p,Hn),A&&A.push(l,c.index,ba,-(ba+1))}}}(p,l,l[11],v,i,s,0,c),Gg}function Oi(i,s,a,c){try{return!1!==a(c)}catch(l){return Bw(i,l),!1}}function Av(i,s,a,c,l){return function p(v){if(v===Function)return c;kg(2&i.flags?Zt(i.index,s):s);let E=Oi(s,0,c,v),C=p.__ngNextListenerFn__;for(;C;)E=Oi(s,0,C,v)&&E,C=C.__ngNextListenerFn__;return l&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function Sv(i=1){return function Pa(i){return(x.lFrame.contextLView=function Xd(i,s){for(;i>0;)s=s[15],i--;return s}(i,x.lFrame.contextLView))[8]}(i)}function $e(i,s,a,c,l){const p=i[a+1],v=null===s;let I=c?Zi(p):Bs(p),E=!1;for(;0!==I&&(!1===E||v);){const A=i[I+1];vr(i[I],s)&&(E=!0,i[I+1]=c?eu(A):Eg(A)),I=c?Zi(A):Bs(A)}E&&(i[a+1]=c?Eg(p):eu(p))}function vr(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&$a(i,s)>=0}function Pv(i,s){return function ci(i,s,a,c){const l=De(),p=yt(),v=function Qs(i){const s=x.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function Nt(i,s,a,c){const l=i.data;if(null===l[a+1]){const p=l[wr()],v=function $n(i,s){return s>=i.expandoStartIndex}(i,a);(function Fv(i,s){return 0!=(i.flags&(s?16:32))})(p,c)&&null===s&&!v&&(s=!1),s=function mf(i,s,a,c){const l=function Ru(i){const s=x.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=lu(a=Ye(null,i,s,a,c),s.attrs,c),p=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==l)if(a=Ye(l,i,s,a,c),null===p){let E=function fn(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Bs(c))return i[Zi(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=Ye(null,i,s,E[1],c),E=lu(E,s.attrs,c),function nD(i,s,a,c){i[Zi(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else p=function dr(i,s,a){let c;const l=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<l;p++)c=lu(c,i[p].hostAttrs,a);return lu(c,s.attrs,a)}(i,s,c)}return void 0!==p&&(c?s.residualClasses=p:s.residualStyles=p),a}(l,p,s,c),function Nv(i,s,a,c,l,p){let v=p?s.classBindings:s.styleBindings,I=Zi(v),E=Bs(v);i[c]=a;let A,C=!1;if(Array.isArray(a)){const O=a;A=O[1],(null===A||$a(O,A)>0)&&(C=!0)}else A=a;if(l)if(0!==E){const $=Zi(i[I+1]);i[c+1]=Bh($,I),0!==$&&(i[$+1]=rv(i[$+1],c)),i[I+1]=function hw(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=Bh(I,0),0!==I&&(i[I+1]=rv(i[I+1],c)),I=c;else i[c+1]=Bh(E,0),0===I?I=c:i[E+1]=rv(i[E+1],c),E=c;C&&(i[c+1]=Eg(i[c+1])),$e(i,A,c,!0),$e(i,A,c,!1),function JC(i,s,a,c,l){const p=l?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&$a(p,s)>=0&&(a[c+1]=eu(a[c+1]))}(s,A,i,c,p),v=Bh(I,E),p?s.classBindings=v:s.styleBindings=v}(l,p,s,a,v,c)}}(p,i,v,c),s!==jt&&Cr(l,v,s)&&function yf(i,s,a,c,l,p,v,I){if(!(3&s.type))return;const E=i.data,C=E[I+1];hu(function fw(i){return 1==(1&i)}(C)?aI(E,s,a,l,Bs(C),v):void 0)||(hu(p)||function nv(i){return 2==(2&i)}(C)&&(p=aI(E,null,a,l,I,v)),function Zy(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:vo.DashCase;null==l?i.removeStyle(a,c,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=vo.Important),i.setStyle(a,c,l,p))}}(c,v,Ts(wr(),a),l,p))}(p,p.data[wr()],l,l[11],i,l[v+1]=function uI(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ge(Mi(i)))),i}(s,a),c,v)}(i,s,null,!0),Pv}function Ye(i,s,a,c,l){let p=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(p=s[I],c=lu(c,p.hostAttrs,l),p!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function lu(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let p=0;p<s.length;p++){const v=s[p];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),gt(i,v,!!a||s[++p]))}return void 0===i?null:i}function aI(i,s,a,c,l,p){const v=null===s;let I;for(;l>0;){const E=i[l],C=Array.isArray(E),A=C?E[1]:E,O=null===A;let $=a[l+1];$===jt&&($=O?Ct:void 0);let X=O?fh($,c):A===c?$:void 0;if(C&&!hu(X)&&(X=fh(E,c)),hu(X)&&(I=X,v))return I;const Te=i[l+1];l=v?Zi(Te):Bs(Te)}if(null!==s){let E=p?s.residualClasses:s.residualStyles;null!=E&&(I=fh(E,c))}return I}function hu(i){return void 0!==i}function Pi(i,s=""){const a=De(),c=yt(),l=i+22,p=c.firstCreatePass?tu(c,l,1,s,null):c.data[l],v=a[l]=function By(i,s){return i.createText(s)}(a[11],s);Vh(c,a,v,p),Rr(p,!1)}function vf(i,s,a){const c=De(),l=function ud(i,s,a,c){return Cr(i,Vo(),a)?s+me(a)+c:jt}(c,i,s,a);return l!==jt&&function ti(i,s,a){const c=Ts(s,i);!function jy(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,wr(),l),vf}const js=void 0;var yI=["en",[["a","p"],["AM","PM"],js],[["AM","PM"],js,js],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],js,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],js,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",js,"{1} 'at' {0}",js],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wf(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ji={};function da(i){const s=function jv(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=fa(s);if(a)return a;const c=s.split("-")[0];if(a=fa(c),a)return a;if("en"===c)return yI;throw new Ie(701,!1)}function _d(i){return da(i)[It.PluralCase]}function fa(i){return i in Ji||(Ji[i]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[i]),Ji[i]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const To="en-US";let _I=To;function rm(i,s,a,c,l){if(i=K(i),Array.isArray(i))for(let p=0;p<i.length;p++)rm(i[p],s,a,c,l);else{const p=yt(),v=De();let I=go(i)?i:K(i.provide),E=vs(i);const C=Tn(),A=1048575&C.providerIndexes,O=C.directiveStart,$=C.providerIndexes>>20;if(go(i)||!i.multi){const X=new Xs(E,l,Xa),Te=e_(I,s,l?A:A+$,O);-1===Te?(Fa(ju(C,v),p,I),im(p,i,s.length),s.push(I),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),a.push(X),v.push(X)):(a[Te]=X,v[Te]=X)}else{const X=e_(I,s,A+$,O),Te=e_(I,s,A,A+$),He=X>=0&&a[X],Qe=Te>=0&&a[Te];if(l&&!Qe||!l&&!He){Fa(ju(C,v),p,I);const tt=function jI(i,s,a,c,l){const p=new Xs(i,a,Xa);return p.multi=[],p.index=s,p.componentProviders=0,_a(p,l,c&&!a),p}(l?BI:Li,a.length,l,c,E);!l&&Qe&&(a[Te].providerFactory=tt),im(p,i,s.length,0),s.push(I),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),a.push(tt),v.push(tt)}else im(p,i,X>-1?X:Te,_a(a[l?Te:X],E,!l&&c));!l&&c&&Qe&&a[Te].componentProviders++}}}function im(i,s,a,c){const l=go(s),p=function mo(i){return!!i.useClass}(s);if(l||p){const E=(p?K(s.useClass):s).prototype.ngOnDestroy;if(E){const C=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const A=C.indexOf(a);-1===A?C.push(a,[c,E]):C[A+1].push(c,E)}else C.push(a,E)}}}function _a(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function e_(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function Li(i,s,a,c){return Fc(this.multi,[])}function BI(i,s,a,c){const l=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=eo(a,a[1],this.providerFactory.index,c);p=I.slice(0,v),Fc(l,p);for(let E=v;E<I.length;E++)p.push(I[E])}else p=[],Fc(l,p);return p}function Fc(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function $s(i,s=[]){return a=>{a.providersResolver=(c,l)=>function pn(i,s,a){const c=yt();if(c.firstCreatePass){const l=Vr(i);rm(a,c.data,c.blueprint,l,!0),rm(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class Lc{}class Td{}function ED(i,s){return new Ht(i,s??null)}class Ht extends Lc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rn(this);const c=wt(s);this._bootstrapComponents=ta(c.bootstrap),this._r3Injector=sw(s,a,[{provide:Lc,useValue:this},{provide:D,useValue:this.componentFactoryResolver}],ge(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class t_ extends Td{constructor(s){super(),this.moduleType=s}create(s){return new Ht(this.moduleType,s)}}class sm extends Lc{constructor(s,a,c){super(),this.componentFactoryResolver=new Rn(this),this.instance=null;const l=new cc([...s,{provide:Lc,useValue:this},{provide:D,useValue:this.componentFactoryResolver}],a||Za(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Vc(i,s,a=null){return new sm(i,s,a).injector}let Rf=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Qr(0,a.type),l=c.length>0?Vc([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=en({token:i,providedIn:"environment",factory:()=>new i(xn(Wn))}),i})();function Nf(i){i.getStandaloneInjector=s=>s.get(Rf).getOrCreateStandaloneInjector(i)}function Es(i){return s=>{setTimeout(i,void 0,s)}}const Hs=class JI extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,p=a||(()=>null),v=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),p=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(p=Es(p),l&&(l=Es(l)),v&&(v=Es(v)));const I=super.subscribe({next:l,error:p,complete:v});return s instanceof Q.w0&&s.add(I),I}};function um(){return this._results[oa()]()}class cm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=oa(),c=cm.prototype;c[a]||(c[a]=um)}get changes(){return this._changes||(this._changes=new Hs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Ln(s);(this._changesDetected=!function Ai(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],p=s[c];if(a&&(l=a(l),p=a(p)),p!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Lf=(()=>{class i{}return i.__NG_ELEMENT_ID__=LD,i})();const kD=Lf,FD=class extends kD{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Ag(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),td(c,l,s),new ou(l)}};function LD(){return lm(Tn(),De())}function lm(i,s){return 4&i.type?new FD(s,i,G(i,s)):null}let dm=(()=>{class i{}return i.__NG_ELEMENT_ID__=VD,i})();function VD(){return tE(Tn(),De())}const UD=dm,XI=class extends UD{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return G(this._hostTNode,this._hostLView)}get injector(){return new Ua(this._hostTNode,this._hostLView)}get parentInjector(){const s=gl(this._hostTNode,this._hostLView);if(Mp(s)){const a=Uu(s,this._hostLView),c=Lu(s);return new Ua(a[1].data[c+8],a)}return new Ua(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=eE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,p;"number"==typeof c?l=c:null!=c&&(l=c.index,p=c.injector);const v=s.createEmbeddedView(a||{},p);return this.insert(v,l),v}createComponent(s,a,c,l,p){const v=s&&!function Ti(i){return"function"==typeof i}(s);let I;if(v)I=a;else{const O=a||{};I=O.index,c=O.injector,l=O.projectableNodes,p=O.environmentInjector||O.ngModuleRef}const E=v?s:new ia(Ee(s)),C=c||this.parentInjector;if(!p&&null==E.ngModule){const $=(v?C:this.parentInjector).get(Wn,null);$&&(p=$)}const A=E.create(C,l,void 0,p);return this.insert(A.hostView,I),A}insert(s,a){const c=s._lView,l=c[1];if(function xu(i){return gr(i[3])}(c)){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const O=c[3],$=new XI(O,O[6],O[3]);$.detach($.indexOf(s))}}const p=this._adjustIndex(a),v=this._lContainer;!function nC(i,s,a,c){const l=10+c,p=a.length;c>0&&(a[l-1][4]=s),c<p-10?(s[4]=a[l],Zu(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function rC(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,v,p);const I=Wy(p,v),E=c[11],C=yr(E,v[7]);return null!==C&&function BA(i,s,a,c,l,p){c[0]=l,c[6]=s,Ya(i,c,a,1,l,p)}(l,v[6],E,c,C,I),s.attachToViewContainerRef(),Zu(d_(v),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=eE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=dg(this._lContainer,a);c&&(Yr(d_(this._lContainer),a),hg(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=dg(this._lContainer,a);return c&&null!=Yr(d_(this._lContainer),a)?new ou(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function eE(i){return i[8]}function d_(i){return i[8]||(i[8]=[])}function tE(i,s){let a;const c=s[i.index];if(gr(c))a=c;else{let l;if(8&i.type)l=Fn(c);else{const p=s[11];l=p.createComment("");const v=si(i,s);gc(p,yr(p,v),l,function uC(i,s){return i.nextSibling(s)}(p,v),!1)}s[i.index]=a=Ng(c,s,l,i),ru(s,a)}return new XI(a,i,s)}class hm{constructor(s){this.queryList=s,this.matches=null}clone(){return new hm(this.queryList)}setDirty(){this.queryList.setDirty()}}class h_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);l.push(this.queries[v.indexInDeclarationView].clone())}return new h_(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==w_(s,a).matches&&this.queries[a].setDirty()}}class f_{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class fm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(s,l);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new fm(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class p_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new p_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const p=c[l];this.matchTNodeWithReadOption(s,a,g_(a,p)),this.matchTNodeWithReadOption(s,a,Va(a,s,p,!1,!1))}else c===Lf?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Va(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===le||l===dm||l===Lf&&4&a.type)this.addMatch(a.index,-2);else{const p=Va(a,s,l,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function g_(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function m_(i,s,a,c){return-1===a?function zr(i,s){return 11&i.type?G(i,s):4&i.type?lm(i,s):null}(s,i):-2===a?function y_(i,s,a){return a===le?G(s,i):a===Lf?lm(s,i):a===dm?tE(s,i):void 0}(i,s,c):eo(i,i[1],a,s)}function pm(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const p=i.data,v=a.matches,I=[];for(let E=0;E<v.length;E+=2){const C=v[E];I.push(C<0?null:m_(s,p[C],v[E+1],a.metadata.read))}l.matches=I}return l.matches}function So(i,s,a,c){const l=i.queries.getByIndex(a),p=l.matches;if(null!==p){const v=pm(i,s,l,a);for(let I=0;I<p.length;I+=2){const E=p[I];if(E>0)c.push(v[I/2]);else{const C=p[I+1],A=s[-E];for(let O=10;O<A.length;O++){const $=A[O];$[17]===$[3]&&So($[1],$,C,c)}if(null!==A[9]){const O=A[9];for(let $=0;$<O.length;$++){const X=O[$];So(X[1],X,C,c)}}}}}return c}function v_(i){const s=De(),a=yt(),c=Jm();Nu(c+1);const l=w_(a,c);if(i.dirty&&ol(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const p=l.crossesNgTemplate?So(a,s,c,[]):pm(a,s,l,c);i.reset(p,qe),i.notifyOnChanges()}return!0}return!1}function __(i,s,a,c){const l=yt();if(l.firstCreatePass){const p=Tn();(function yu(i,s,a){null===i.queries&&(i.queries=new fm),i.queries.track(new p_(s,a))})(l,new f_(s,a,c),p.index),function Uf(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function mu(i,s,a){const c=new cm(4==(4&a));Qh(i,s,c,c.destroy),null===s[19]&&(s[19]=new h_),s[19].queries.push(new hm(c))}(l,De(),a)}function Vf(){return function Uc(i,s){return i[19].queries[s].queryList}(De(),Jm())}function w_(i,s){return i.queries.getByIndex(s)}function wm(...i){}const Pr=new Cn("Application Initializer");let Im=(()=>{class i{constructor(a){this.appInits=a,this.resolve=wm,this.reject=wm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(Hg(p))a.push(p);else if(Dv(p)){const v=new Promise((I,E)=>{p.subscribe({complete:I,error:E})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(xn(Pr,8))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const yE=new Cn("AppId",{providedIn:"root",factory:function vE(){return`${Em()}${Em()}${Em()}`}});function Em(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _E=new Cn("Platform Initializer"),bm=new Cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wE=new Cn("appBootstrapListener");let S_=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const zc=new Cn("LocaleId",{providedIn:"root",factory:()=>Ur(zc,Xe.Optional|Xe.SkipSelf)||function zf(){return typeof $localize<"u"&&$localize.locale||To}()}),M_=new Cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class bE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let CE=(()=>{class i{compileModuleSync(a){return new t_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=ta(wt(a).declarations).reduce((v,I)=>{const E=Ee(I);return E&&v.push(new ia(E)),v},[]);return new bE(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Od=(()=>Promise.resolve(0))();function Wf(i){typeof Zone>"u"?Od.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class es{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hs(!1),this.onMicrotaskEmpty=new Hs(!1),this.onStable=new Hs(!1),this.onError=new Hs(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Cm(){let i=Lt.requestAnimationFrame,s=Lt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function N_(i){const s=()=>{!function iT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Lt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,O_(i),i.isCheckStableRunning=!0,Dm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),O_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,p,v,I)=>{try{return Tm(i),a.invokeTask(l,p,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),P_(i)}},onInvoke:(a,c,l,p,v,I,E)=>{try{return Tm(i),a.invoke(l,p,v,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),P_(i)}},onHasTask:(a,c,l,p)=>{a.hasTask(l,p),c===l&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,O_(i),Dm(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,l,p)=>(a.handleError(l,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!es.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(es.isInAngularZone())throw new Ie(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+l,s,AE,wm,wm);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const AE={};function Dm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function O_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Tm(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function P_(i){i._nesting--,Dm(i)}class SE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hs,this.onMicrotaskEmpty=new Hs,this.onStable=new Hs,this.onError=new Hs}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const Am=new Cn(""),qf=new Cn("");let Yf,Zf=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yf||(function k_(i){Yf=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{es.assertNotInAngularZone(),Wf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(xn(es),xn(Kf),xn(qf))},i.\u0275prov=en({token:i,factory:i.\u0275fac}),i})(),Kf=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Yf?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Mo=null;const F_=new Cn("AllowMultipleToken"),L_=new Cn("PlatformDestroyListeners");class ME{constructor(s,a){this.name=s,this.token=a}}function xE(i,s,a=[]){const c=`Platform: ${s}`,l=new Cn(c);return(p=[])=>{let v=V_();if(!v||v.injector.get(F_,!1)){const I=[...a,...p,{provide:l,useValue:!0}];i?i(I):function Sm(i){if(Mo&&!Mo.get(F_,!1))throw new Ie(400,!1);Mo=i;const s=i.get(Pd);(function Mm(i){const s=i.get(_E,null);s&&s.forEach(a=>a())})(i)}(function RE(i=[],s){return _e.create({name:s,providers:[{provide:ys,useValue:"platform"},{provide:L_,useValue:new Set([()=>Mo=null])},...i]})}(I,c))}return function uT(i){const s=V_();if(!s)throw new Ie(401,!1);return s}()}}function V_(){return Mo?.get(Pd)??null}let Pd=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function Wc(i,s){let a;return a="noop"===i?new SE:("zone.js"===i?void 0:i)||new es(s),a}(c?.ngZone,function xm(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:es,useValue:l}];return l.run(()=>{const v=_e.create({providers:p,parent:this.injector,name:a.moduleType.name}),I=a.create(v),E=I.injector.get(ng,null);if(!E)throw new Ie(402,!1);return l.runOutsideAngular(()=>{const C=l.onError.subscribe({next:A=>{E.handleError(A)}});I.onDestroy(()=>{kd(this._modules,I),C.unsubscribe()})}),function Rm(i,s,a){try{const c=a();return Hg(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const C=I.injector.get(Im);return C.runInitializers(),C.donePromise.then(()=>(function wI(i){Pt(i,"Expected localeId to be defined"),"string"==typeof i&&(_I=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(zc,To)||To),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=Jf({},c);return function sT(i,s,a){const c=new t_(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(a){const c=a.injector.get(wu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Ie(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(L_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(xn(_e))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Jf(i,s){return Array.isArray(s)?s.reduce(Jf,i):{...i,...s}}let wu=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new P.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{es.assertNotInAngularZone(),Wf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{es.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),C.unsubscribe()}});this.isStable=(0,ne.T)(p,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof eg;if(!this._injector.get(Im).done)throw!l&&vt(a),new Ie(405,false);let v;v=l?a:this._injector.get(D).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function oT(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Lc),C=v.create(_e.NULL,[],c||v.selector,I),A=C.location.nativeElement,O=C.injector.get(Am,null);return O?.registerApplication(A),C.onDestroy(()=>{this.detachView(C.hostView),kd(this.components,C),O?.unregisterApplication(A)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;kd(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(wE,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>kd(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ie(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(xn(es),xn(Wn),xn(ng))},i.\u0275prov=en({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function kd(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Nm=!0,Ea=!1;function NE(){return Ea=!0,Nm}function cT(){if(Ea)throw new Error("Cannot enable prod mode after platform setup.");Nm=!1}let lT=(()=>{class i{}return i.__NG_ELEMENT_ID__=j_,i})();function j_(i){return function Pm(i,s,a){if(ss(i)&&!a){const c=Zt(i.index,s);return new ou(c,c)}return 47&i.type?new ou(s[16],s):null}(Tn(),De(),16==(16&i))}class Vm{constructor(){}supports(s){return od(s)}create(s){return new Vd(s)}}const Ld=(i,s)=>s;class Vd{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Ld}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<jE(c,l,p)?a:c,I=jE(v,l,p),E=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{p||(p=[]);const C=I-l,A=E-l;if(C!=A){for(let $=0;$<C;$++){const X=$<p.length?p[$]:p[$]=0,Te=X+$;A<=Te&&Te<C&&(p[$]=X+1)}p[v.previousIndex]=A-C}}I!==E&&s(v,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!od(s))throw new Ie(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,p,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)p=s[I],v=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,I),c=!0),a=a._next}else l=0,function pv(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[oa()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{v=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,l)):s=this._addAfter(new UE(a,c),p,l),s}_verifyReinsertion(s,a,c,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?s=this._reinsertAfter(p,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,p=s._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new BE),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class UE{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ud{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class BE{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Ud,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jE(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class Um{constructor(){}supports(s){return s instanceof Map||gv(s)}create(){return new H_}}class H_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||gv(s)))throw new Ie(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const p=l._prev,v=l._next;return p&&(p._next=v),v&&(v._prev=p),l._next=null,l._prev=null,l}const c=new G_(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class G_{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bm(){return new z_([new Vm])}let z_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Bm()),deps:[[i,new oo,new cr]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new Ie(901,!1)}}return i.\u0275prov=en({token:i,providedIn:"root",factory:Bm}),i})();function jm(){return new ip([new Um])}let ip=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||jm()),deps:[[i,new oo,new cr]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new Ie(901,!1)}}return i.\u0275prov=en({token:i,providedIn:"root",factory:jm}),i})();const HE=xE(null,"core",[]);let GE=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(xn(wu))},i.\u0275mod=it({type:i}),i.\u0275inj=bt({}),i})();function zE(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},579:(pt,Me,R)=>{R.d(Me,{EI:()=>B,Gb:()=>pr,Iv:()=>U,Kz:()=>Ae,Xd:()=>Yn,lT:()=>z,xP:()=>k});var h=R(5861),Q=R(9681),P=R(1877),ne=R(2090),de=R(4859);R(2833);const oe="analytics",ge="firebase_id",j="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",K="https://www.googletagmanager.com/gtag/js",Oe=new P.Yd("@firebase/analytics");function be(re){return Promise.all(re.map(ce=>ce.catch(Ee=>Ee)))}function Ie(re,ce){const Ee=document.createElement("script");Ee.src=`${K}?l=${re}&id=${ce}`,Ee.async=!0,document.head.appendChild(Ee)}function me(re,ce,Ee,Le,We,vt){return ue.apply(this,arguments)}function ue(){return(ue=(0,h.Z)(function*(re,ce,Ee,Le,We,vt){const wt=Le[We];try{if(wt)yield ce[wt];else{const Ne=(yield be(Ee)).find(nt=>nt.measurementId===We);Ne&&(yield ce[Ne.appId])}}catch(xt){Oe.error(xt)}re("config",We,vt)})).apply(this,arguments)}function ot(re,ce,Ee,Le,We){return rt.apply(this,arguments)}function rt(){return(rt=(0,h.Z)(function*(re,ce,Ee,Le,We){try{let vt=[];if(We&&We.send_to){let wt=We.send_to;Array.isArray(wt)||(wt=[wt]);const xt=yield be(Ee);for(const Ne of wt){const nt=xt.find(bn=>bn.measurementId===Ne),Rt=nt&&ce[nt.appId];if(!Rt){vt=[];break}vt.push(Rt)}}0===vt.length&&(vt=Object.values(ce)),yield Promise.all(vt),re("event",Le,We||{})}catch(vt){Oe.error(vt)}})).apply(this,arguments)}function Ce(){const re=window.document.getElementsByTagName("script");for(const ce of Object.values(re))if(ce.src&&ce.src.includes(K))return ce;return null}const Ue=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),J=new class Z{constructor(ce={},Ee=1e3){this.throttleMetadata=ce,this.intervalMillis=Ee}getThrottleMetadata(ce){return this.throttleMetadata[ce]}setThrottleMetadata(ce,Ee){this.throttleMetadata[ce]=Ee}deleteThrottleMetadata(ce){delete this.throttleMetadata[ce]}};function ie(re){return new Headers({Accept:"application/json","x-goog-api-key":re})}function ee(re){return je.apply(this,arguments)}function je(){return(je=(0,h.Z)(function*(re){var ce;const{appId:Ee,apiKey:Le}=re,We={method:"GET",headers:ie(Le)},vt=j.replace("{app-id}",Ee),wt=yield fetch(vt,We);if(200!==wt.status&&304!==wt.status){let xt="";try{const Ne=yield wt.json();null!==(ce=Ne.error)&&void 0!==ce&&ce.message&&(xt=Ne.error.message)}catch{}throw Ue.create("config-fetch-failed",{httpStatus:wt.status,responseMessage:xt})}return wt.json()})).apply(this,arguments)}function Ve(re){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(re,ce=J,Ee){const{appId:Le,apiKey:We,measurementId:vt}=re.options;if(!Le)throw Ue.create("no-app-id");if(!We){if(vt)return{measurementId:vt,appId:Le};throw Ue.create("no-api-key")}const wt=ce.getThrottleMetadata(Le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xt=new Kn;return setTimeout((0,h.Z)(function*(){xt.abort()}),void 0!==Ee?Ee:6e4),Wt({appId:Le,apiKey:We,measurementId:vt},wt,xt,ce)})).apply(this,arguments)}function Wt(re,ce,Ee){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(re,{throttleEndTimeMillis:ce,backoffCount:Ee},Le,We=J){var vt,wt;const{appId:xt,measurementId:Ne}=re;try{yield Ze(Le,ce)}catch(nt){if(Ne)return Oe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${null===(vt=nt)||void 0===vt?void 0:vt.message}]`),{appId:xt,measurementId:Ne};throw nt}try{const nt=yield ee(re);return We.deleteThrottleMetadata(xt),nt}catch(nt){const Rt=nt;if(!on(Rt)){if(We.deleteThrottleMetadata(xt),Ne)return Oe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Rt?.message}]`),{appId:xt,measurementId:Ne};throw nt}const bn=503===Number(null===(wt=Rt?.customData)||void 0===wt?void 0:wt.httpStatus)?(0,ne.$s)(Ee,We.intervalMillis,30):(0,ne.$s)(Ee,We.intervalMillis),Pn={throttleEndTimeMillis:Date.now()+bn,backoffCount:Ee+1};return We.setThrottleMetadata(xt,Pn),Oe.debug(`Calling attemptFetch again in ${bn} millis`),Wt(re,Pn,Le,We)}})).apply(this,arguments)}function Ze(re,ce){return new Promise((Ee,Le)=>{const We=Math.max(ce-Date.now(),0),vt=setTimeout(Ee,We);re.addEventListener(()=>{clearTimeout(vt),Le(Ue.create("fetch-throttle",{throttleEndTimeMillis:ce}))})})}function on(re){if(!(re instanceof ne.ZR&&re.customData))return!1;const ce=Number(re.customData.httpStatus);return 429===ce||500===ce||503===ce||504===ce}class Kn{constructor(){this.listeners=[]}addEventListener(ce){this.listeners.push(ce)}abort(){this.listeners.forEach(ce=>ce())}}let dn,Ar;function Gn(){return(Gn=(0,h.Z)(function*(re,ce,Ee,Le,We){if(We&&We.global)re("event",Ee,Le);else{const vt=yield ce;re("event",Ee,Object.assign(Object.assign({},Le),{send_to:vt}))}})).apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(re,ce,Ee,Le){if(Le&&Le.global)return re("set",{screen_name:Ee}),Promise.resolve();re("config",yield ce,{update:!0,screen_name:Ee})})).apply(this,arguments)}function qr(){return(qr=(0,h.Z)(function*(re,ce,Ee,Le){if(Le&&Le.global)return re("set",{user_id:Ee}),Promise.resolve();re("config",yield ce,{update:!0,user_id:Ee})})).apply(this,arguments)}function In(){return(In=(0,h.Z)(function*(re,ce,Ee,Le){if(Le&&Le.global){const We={};for(const vt of Object.keys(Ee))We[`user_properties.${vt}`]=Ee[vt];return re("set",We),Promise.resolve()}re("config",yield ce,{update:!0,user_properties:Ee})})).apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(re,ce){const Ee=yield re;window[`ga-disable-${Ee}`]=!ce})).apply(this,arguments)}function or(re){Ar=re}function hi(re){dn=re}function Xe(){return vn.apply(this,arguments)}function vn(){return(vn=(0,h.Z)(function*(){var re;if(!(0,ne.hl)())return Oe.warn(Ue.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(ce){return Oe.warn(Ue.create("indexeddb-unavailable",{errorInfo:null===(re=ce)||void 0===re?void 0:re.toString()}).message),!1}return!0})).apply(this,arguments)}function yn(){return(yn=(0,h.Z)(function*(re,ce,Ee,Le,We,vt,wt){var xt;const Ne=Ve(re);Ne.then(sn=>{Ee[sn.measurementId]=sn.appId,re.options.measurementId&&sn.measurementId!==re.options.measurementId&&Oe.warn(`The measurement ID in the local Firebase config (${re.options.measurementId}) does not match the measurement ID fetched from the server (${sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(sn=>Oe.error(sn)),ce.push(Ne);const nt=Xe().then(sn=>{if(sn)return Le.getId()}),[Rt,bn]=yield Promise.all([Ne,nt]);Ce()||Ie(vt,Rt.measurementId),Ar&&(We("consent","default",Ar),or(void 0)),We("js",new Date);const Pn=null!==(xt=wt?.config)&&void 0!==xt?xt:{};return Pn.origin="firebase",Pn.update=!0,null!=bn&&(Pn[ge]=bn),We("config",Rt.measurementId,Pn),dn&&(We("set",dn),hi(void 0)),Rt.measurementId})).apply(this,arguments)}class Fr{constructor(ce){this.app=ce}_delete(){return delete Sn[this.app.options.appId],Promise.resolve()}}let Sn={},En=[];const On={};let at,Lt,rn="dataLayer",mt="gtag",an=!1;function Yn(re){if(an)throw Ue.create("already-initialized");re.dataLayerName&&(rn=re.dataLayerName),re.gtagName&&(mt=re.gtagName)}function Ct(re,ce,Ee){!function Qn(){const re=[];if((0,ne.ru)()&&re.push("This is a browser extension environment."),(0,ne.zI)()||re.push("Cookies are not available."),re.length>0){const ce=re.map((Le,We)=>`(${We+1}) ${Le}`).join(" "),Ee=Ue.create("invalid-analytics-context",{errorInfo:ce});Oe.warn(Ee.message)}}();const Le=re.options.appId;if(!Le)throw Ue.create("no-app-id");if(!re.options.apiKey){if(!re.options.measurementId)throw Ue.create("no-api-key");Oe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${re.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sn[Le])throw Ue.create("already-exists",{id:Le});if(!an){!function Je(re){let ce=[];Array.isArray(window[re])?ce=window[re]:window[re]=ce}(rn);const{wrappedGtag:vt,gtagCore:wt}=function we(re,ce,Ee,Le,We){let vt=function(...wt){window[Le].push(arguments)};return window[We]&&"function"==typeof window[We]&&(vt=window[We]),window[We]=function xe(re,ce,Ee,Le){function vt(){return(vt=(0,h.Z)(function*(wt,xt,Ne){try{"event"===wt?yield ot(re,ce,Ee,xt,Ne):"config"===wt?yield me(re,ce,Ee,Le,xt,Ne):"consent"===wt?re("consent","update",Ne):re("set",xt)}catch(nt){Oe.error(nt)}})).apply(this,arguments)}return function We(wt,xt,Ne){return vt.apply(this,arguments)}}(vt,re,ce,Ee),{gtagCore:vt,wrappedGtag:window[We]}}(Sn,En,On,rn,mt);Lt=vt,at=wt,an=!0}return Sn[Le]=function Zr(re,ce,Ee,Le,We,vt,wt){return yn.apply(this,arguments)}(re,En,On,ce,at,rn,Ee),new Fr(re)}function pr(){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}function z(re,ce,Ee){re=(0,ne.m9)(re),function bt(re,ce,Ee,Le){return Ut.apply(this,arguments)}(Lt,Sn[re.app.options.appId],ce,Ee).catch(Le=>Oe.error(Le))}function U(re,ce,Ee){re=(0,ne.m9)(re),function Ii(re,ce,Ee,Le){return qr.apply(this,arguments)}(Lt,Sn[re.app.options.appId],ce,Ee).catch(Le=>Oe.error(Le))}function k(re,ce,Ee){re=(0,ne.m9)(re),function ir(re,ce,Ee,Le){return In.apply(this,arguments)}(Lt,Sn[re.app.options.appId],ce,Ee).catch(Le=>Oe.error(Le))}function B(re,ce){re=(0,ne.m9)(re),function kr(re,ce){return sr.apply(this,arguments)}(Sn[re.app.options.appId],ce).catch(Ee=>Oe.error(Ee))}function Ae(re,ce,Ee,Le){re=(0,ne.m9)(re),function en(re,ce,Ee,Le,We){return Gn.apply(this,arguments)}(Lt,Sn[re.app.options.appId],ce,Ee,Le).catch(We=>Oe.error(We))}const it="@firebase/analytics";!function tn(){(0,Q._registerComponent)(new de.wA(oe,(ce,{options:Ee})=>Ct(ce.getProvider("app").getImmediate(),ce.getProvider("installations-internal").getImmediate(),Ee),"PUBLIC")),(0,Q._registerComponent)(new de.wA("analytics-internal",function re(ce){try{const Ee=ce.getProvider(oe).getImmediate();return{logEvent:(Le,We,vt)=>Ae(Ee,Le,We,vt)}}catch(Ee){throw Ue.create("interop-component-reg-failed",{reason:Ee})}},"PRIVATE")),(0,Q.registerVersion)(it,"0.8.0"),(0,Q.registerVersion)(it,"0.8.0","esm2017")}()},3942:(pt,Me,R)=>{R.d(Me,{Z:()=>Ie});var h=R(2090),Q=R(4859),P=R(9681),ne=R(1877);class de{constructor(me,ue){this._delegate=me,this.firebase=ue,(0,P._addComponent)(me,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(me,ue=P._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(me);return!rt.isInitialized()&&"EXPLICIT"===(null===(ot=rt.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:ue})}_removeServiceInstance(me,ue=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(ue)}_addComponent(me){(0,P._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,P._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),V=function he(){const Je=function ge(Je){const me={},ue={__esModule:!0,initializeApp:function xe(Ue,L={}){const ve=P.initializeApp(Ue,L);if((0,h.r3)(me,ve.name))return me[ve.name];const Z=new Je(ve,ue);return me[ve.name]=Z,Z},app:rt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Ue){const L=Ue.name,ve=L.replace("-compat","");if(P._registerComponent(Ue)&&"PUBLIC"===Ue.type){const Z=(J=rt())=>{if("function"!=typeof J[ve])throw oe.create("invalid-app-argument",{appName:L});return J[ve]()};void 0!==Ue.serviceProps&&(0,h.ZB)(Z,Ue.serviceProps),ue[ve]=Z,Je.prototype[ve]=function(...J){return this._getService.bind(this,L).apply(this,Ue.multipleInstances?J:[])}}return"PUBLIC"===Ue.type?ue[ve]:null},removeApp:function ot(Ue){delete me[Ue]},useAsService:function Ge(Ue,L){return"serverAuth"===L?null:L},modularAPIs:P}};function rt(Ue){if(!(0,h.r3)(me,Ue=Ue||P._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Ue});return me[Ue]}return ue.default=ue,Object.defineProperty(ue,"apps",{get:function we(){return Object.keys(me).map(Ue=>me[Ue])}}),rt.App=Je,ue}(de);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function me(ue){(0,h.ZB)(Je,ue)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Je}(),j=new ne.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=V;!function be(Je){(0,P.registerVersion)("@firebase/app-compat","0.1.33",Je)}()},9681:(pt,Me,R)=>{R.r(Me),R.d(Me,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>dn,_addOrOverwriteComponent:()=>en,_apps:()=>on,_clearComponents:()=>Ii,_components:()=>Kn,_getProvider:()=>bt,_registerComponent:()=>Gn,_removeServiceInstance:()=>Ut,deleteApp:()=>hi,getApp:()=>Ar,getApps:()=>or,initializeApp:()=>sr,onLog:()=>Zr,registerVersion:()=>vn,setLogLevel:()=>yn});var h=R(5861),Q=R(4859),P=R(1877),ne=R(2090),de=R(8766);class pe{constructor(B){this.container=B}getPlatformInfoString(){return this.container.getProviders().map(H=>{if(function oe(k){return"VERSION"===k.getComponent()?.type}(H)){const Ae=H.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(H=>H).join(" ")}}const ge="@firebase/app",V=new P.Yd("@firebase/app"),Pt="[DEFAULT]",Ze={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,Kn=new Map;function dn(k,B){try{k.container.addComponent(B)}catch(H){V.debug(`Component ${B.name} failed to register with FirebaseApp ${k.name}`,H)}}function en(k,B){k.container.addOrOverwriteComponent(B)}function Gn(k){const B=k.name;if(Kn.has(B))return V.debug(`There were multiple attempts to register component ${B}.`),!1;Kn.set(B,k);for(const H of on.values())dn(H,k);return!0}function bt(k,B){const H=k.container.getProvider("heartbeat").getImmediate({optional:!0});return H&&H.triggerHeartbeat(),k.container.getProvider(B)}function Ut(k,B,H=Pt){bt(k,B).clearInstance(H)}function Ii(){Kn.clear()}const ir=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(B,H,Ae){this._isDeleted=!1,this._options=Object.assign({},B),this._config=Object.assign({},H),this._name=H.name,this._automaticDataCollectionEnabled=H.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B){this.checkDestroyed(),this._automaticDataCollectionEnabled=B}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(B){this._isDeleted=B}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const kr="9.9.4";function sr(k,B={}){"object"!=typeof B&&(B={name:B});const H=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},B),Ae=H.name;if("string"!=typeof Ae||!Ae)throw ir.create("bad-app-name",{appName:String(Ae)});const ze=on.get(Ae);if(ze){if((0,ne.vZ)(k,ze.options)&&(0,ne.vZ)(H,ze.config))return ze;throw ir.create("duplicate-app",{appName:Ae})}const it=new Q.H0(Ae);for(const tn of Kn.values())it.addComponent(tn);const un=new In(k,H,it);return on.set(Ae,un),un}function Ar(k=Pt){const B=on.get(k);if(!B)throw ir.create("no-app",{appName:k});return B}function or(){return Array.from(on.values())}function hi(k){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(k){const B=k.name;on.has(B)&&(on.delete(B),yield Promise.all(k.container.getProviders().map(H=>H.delete())),k.isDeleted=!0)})).apply(this,arguments)}function vn(k,B,H){var Ae;let ze=null!==(Ae=Ze[k])&&void 0!==Ae?Ae:k;H&&(ze+=`-${H}`);const it=ze.match(/\s|\//),un=B.match(/\s|\//);if(it||un){const tn=[`Unable to register library "${ze}" with version "${B}":`];return it&&tn.push(`library name "${ze}" contains illegal characters (whitespace or "/")`),it&&un&&tn.push("and"),un&&tn.push(`version name "${B}" contains illegal characters (whitespace or "/")`),void V.warn(tn.join(" "))}Gn(new Q.wA(`${ze}-version`,()=>({library:ze,version:B}),"VERSION"))}function Zr(k,B){if(null!==k&&"function"!=typeof k)throw ir.create("invalid-log-argument");(0,P.Am)(k,B)}function yn(k){(0,P.Ub)(k)}const En="firebase-heartbeat-store";let On=null;function rn(){return On||(On=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(k,B)=>{0===B&&k.createObjectStore(En)}}).catch(k=>{throw ir.create("idb-open",{originalErrorMessage:k.message})})),On}function at(){return(at=(0,h.Z)(function*(k){var B;try{return(yield rn()).transaction(En).objectStore(En).get(Yn(k))}catch(H){if(H instanceof ne.ZR)V.warn(H.message);else{const Ae=ir.create("idb-get",{originalErrorMessage:null===(B=H)||void 0===B?void 0:B.message});V.warn(Ae.message)}}})).apply(this,arguments)}function Lt(k,B){return an.apply(this,arguments)}function an(){return(an=(0,h.Z)(function*(k,B){var H;try{const ze=(yield rn()).transaction(En,"readwrite");return yield ze.objectStore(En).put(B,Yn(k)),ze.done}catch(Ae){if(Ae instanceof ne.ZR)V.warn(Ae.message);else{const ze=ir.create("idb-set",{originalErrorMessage:null===(H=Ae)||void 0===H?void 0:H.message});V.warn(ze.message)}}})).apply(this,arguments)}function Yn(k){return`${k.name}!${k.options.appId}`}class Kr{constructor(B){this.container=B,this._heartbeatsCache=null;const H=this.container.getProvider("app").getImmediate();this._storage=new qt(H),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var B=this;return(0,h.Z)(function*(){const Ae=B.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ze=Kt();if(null===B._heartbeatsCache&&(B._heartbeatsCache=yield B._heartbeatsCachePromise),B._heartbeatsCache.lastSentHeartbeatDate!==ze&&!B._heartbeatsCache.heartbeats.some(it=>it.date===ze))return B._heartbeatsCache.heartbeats.push({date:ze,agent:Ae}),B._heartbeatsCache.heartbeats=B._heartbeatsCache.heartbeats.filter(it=>{const un=new Date(it.date).valueOf();return Date.now()-un<=2592e6}),B._storage.overwrite(B._heartbeatsCache)})()}getHeartbeatsHeader(){var B=this;return(0,h.Z)(function*(){if(null===B._heartbeatsCache&&(yield B._heartbeatsCachePromise),null===B._heartbeatsCache||0===B._heartbeatsCache.heartbeats.length)return"";const H=Kt(),{heartbeatsToSend:Ae,unsentEntries:ze}=function pr(k,B=1024){const H=[];let Ae=k.slice();for(const ze of k){const it=H.find(un=>un.agent===ze.agent);if(it){if(it.dates.push(ze.date),z(H)>B){it.dates.pop();break}}else if(H.push({agent:ze.agent,dates:[ze.date]}),z(H)>B){H.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:H,unsentEntries:Ae}}(B._heartbeatsCache.heartbeats),it=(0,ne.L)(JSON.stringify({version:2,heartbeats:Ae}));return B._heartbeatsCache.lastSentHeartbeatDate=H,ze.length>0?(B._heartbeatsCache.heartbeats=ze,yield B._storage.overwrite(B._heartbeatsCache)):(B._heartbeatsCache.heartbeats=[],B._storage.overwrite(B._heartbeatsCache)),it})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class qt{constructor(B){this.app=B,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var B=this;return(0,h.Z)(function*(){return(yield B._canUseIndexedDBPromise)&&(yield function mt(k){return at.apply(this,arguments)}(B.app))||{heartbeats:[]}})()}overwrite(B){var H=this;return(0,h.Z)(function*(){var Ae;if(yield H._canUseIndexedDBPromise){const it=yield H.read();return Lt(H.app,{lastSentHeartbeatDate:null!==(Ae=B.lastSentHeartbeatDate)&&void 0!==Ae?Ae:it.lastSentHeartbeatDate,heartbeats:B.heartbeats})}})()}add(B){var H=this;return(0,h.Z)(function*(){var Ae;if(yield H._canUseIndexedDBPromise){const it=yield H.read();return Lt(H.app,{lastSentHeartbeatDate:null!==(Ae=B.lastSentHeartbeatDate)&&void 0!==Ae?Ae:it.lastSentHeartbeatDate,heartbeats:[...it.heartbeats,...B.heartbeats]})}})()}}function z(k){return(0,ne.L)(JSON.stringify({version:2,heartbeats:k})).length}!function U(k){Gn(new Q.wA("platform-logger",B=>new pe(B),"PRIVATE")),Gn(new Q.wA("heartbeat",B=>new Kr(B),"PRIVATE")),vn(ge,"0.7.32",k),vn(ge,"0.7.32","esm2017"),vn("fire-js","")}("")},4859:(pt,Me,R)=>{R.d(Me,{H0:()=>ge,wA:()=>P});var h=R(5861),Q=R(2090);class P{constructor(V,j,K){this.name=V,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const ne="[DEFAULT]";class de{constructor(V,j){this.name=V,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const j=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(j)){const K=new Q.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:j});Oe&&K.resolve(Oe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(V){var j;const K=this.normalizeInstanceIdentifier(V?.identifier),Oe=null!==(j=V?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(be){if(Oe)return null;throw be}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function oe(he){return"EAGER"===he.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(j);try{const be=this.getOrInitializeService({instanceIdentifier:Oe});K.resolve(be)}catch{}}}}clearInstance(V=ne){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,h.Z)(function*(){const j=Array.from(V.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=ne){return this.instances.has(V)}getOptions(V=ne){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:j={}}=V,K=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[be,Ie]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(be)&&Ie.resolve(Oe);return Oe}onInit(V,j){var K;const Oe=this.normalizeInstanceIdentifier(j),be=null!==(K=this.onInitCallbacks.get(Oe))&&void 0!==K?K:new Set;be.add(V),this.onInitCallbacks.set(Oe,be);const Ie=this.instances.get(Oe);return Ie&&V(Ie,Oe),()=>{be.delete(V)}}invokeOnInitCallbacks(V,j){const K=this.onInitCallbacks.get(j);if(K)for(const Oe of K)try{Oe(V,j)}catch{}}getOrInitializeService({instanceIdentifier:V,options:j={}}){let K=this.instances.get(V);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(he=V,he===ne?void 0:he),options:j}),this.instances.set(V,K),this.instancesOptions.set(V,j),this.invokeOnInitCallbacks(K,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,K)}catch{}var he;return K||null}normalizeInstanceIdentifier(V=ne){return this.component?this.component.multipleInstances?V:ne:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const j=this.getProvider(V.name);if(j.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);j.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const j=new de(V,this);return this.providers.set(V,j),j}getProviders(){return Array.from(this.providers.values())}}},2833:(pt,Me,R)=>{var h=R(5861),Q=R(9681),P=R(4859),ne=R(2090),de=R(8766);const pe="@firebase/installations",oe="0.5.12",he=`w:${oe}`,V="FIS_v2",Je=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function me(q){return q instanceof ne.ZR&&q.code.includes("request-failed")}function ue({projectId:q}){return`https://firebaseinstallations.googleapis.com/v1/projects/${q}/installations`}function ot(q){return{token:q.token,requestStatus:2,expiresIn:L(q.expiresIn),creationTime:Date.now()}}function rt(q,ye){return xe.apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(q,ye){const ut=(yield ye.json()).error;return Je.create("request-failed",{requestName:q,serverCode:ut.code,serverMessage:ut.message,serverStatus:ut.status})})).apply(this,arguments)}function we({apiKey:q}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q})}function Ce(q,{refreshToken:ye}){const Be=we(q);return Be.append("Authorization",function ve(q){return`${V} ${q}`}(ye)),Be}function Ge(q){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,h.Z)(function*(q){const ye=yield q();return ye.status>=500&&ye.status<600?q():ye})).apply(this,arguments)}function L(q){return Number(q.replace("s","000"))}function Z(q,ye){return J.apply(this,arguments)}function J(){return(J=(0,h.Z)(function*({appConfig:q,heartbeatServiceProvider:ye},{fid:Be}){const ut=ue(q),Bt=we(q),Xt=ye.getImmediate({optional:!0});if(Xt){const _r=yield Xt.getHeartbeatsHeader();_r&&Bt.append("x-firebase-client",_r)}const hn={method:"POST",headers:Bt,body:JSON.stringify({fid:Be,authVersion:V,appId:q.appId,sdkVersion:he})},Lr=yield Ge(()=>fetch(ut,hn));if(Lr.ok){const _r=yield Lr.json();return{fid:_r.fid||Be,registrationStatus:2,refreshToken:_r.refreshToken,authToken:ot(_r.authToken)}}throw yield rt("Create Installation",Lr)})).apply(this,arguments)}function ie(q){return new Promise(ye=>{setTimeout(ye,q)})}const je=/^[cdef][\w-]{21}$/;function ht(){try{const q=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(q),q[0]=112+q[0]%16;const Be=function Wt(q){return function ee(q){return btoa(String.fromCharCode(...q)).replace(/\+/g,"-").replace(/\//g,"_")}(q).substr(0,22)}(q);return je.test(Be)?Be:""}catch{return""}}function Pt(q){return`${q.appName}!${q.appId}`}const Ze=new Map;function on(q,ye){const Be=Pt(q);en(Be,ye),function Gn(q,ye){const Be=function Ut(){return!bt&&"BroadcastChannel"in self&&(bt=new BroadcastChannel("[Firebase] FID Change"),bt.onmessage=q=>{en(q.data.key,q.data.fid)}),bt}();Be&&Be.postMessage({key:q,fid:ye}),function Ii(){0===Ze.size&&bt&&(bt.close(),bt=null)}()}(Be,ye)}function en(q,ye){const Be=Ze.get(q);if(Be)for(const ut of Be)ut(ye)}let bt=null;const In="firebase-installations-store";let kr=null;function sr(){return kr||(kr=(0,de.X3)("firebase-installations-database",1,{upgrade:(q,ye)=>{0===ye&&q.createObjectStore(In)}})),kr}function Ar(q,ye){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(q,ye){const Be=Pt(q),Bt=(yield sr()).transaction(In,"readwrite"),Xt=Bt.objectStore(In),kn=yield Xt.get(Be);return yield Xt.put(ye,Be),yield Bt.done,(!kn||kn.fid!==ye.fid)&&on(q,ye.fid),ye})).apply(this,arguments)}function hi(q){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(q){const ye=Pt(q),ut=(yield sr()).transaction(In,"readwrite");yield ut.objectStore(In).delete(ye),yield ut.done})).apply(this,arguments)}function vn(q,ye){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(q,ye){const Be=Pt(q),Bt=(yield sr()).transaction(In,"readwrite"),Xt=Bt.objectStore(In),kn=yield Xt.get(Be),hn=ye(kn);return void 0===hn?yield Xt.delete(Be):yield Xt.put(hn,Be),yield Bt.done,hn&&(!kn||kn.fid!==hn.fid)&&on(q,hn.fid),hn})).apply(this,arguments)}function yn(q){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(q){let ye;const Be=yield vn(q.appConfig,ut=>{const Bt=Sn(ut),Xt=En(q,Bt);return ye=Xt.registrationPromise,Xt.installationEntry});return""===Be.fid?{installationEntry:yield ye}:{installationEntry:Be,registrationPromise:ye}})).apply(this,arguments)}function Sn(q){return an(q||{fid:ht(),registrationStatus:0})}function En(q,ye){if(0===ye.registrationStatus){if(!navigator.onLine)return{installationEntry:ye,registrationPromise:Promise.reject(Je.create("app-offline"))};const Be={fid:ye.fid,registrationStatus:1,registrationTime:Date.now()},ut=function On(q,ye){return rn.apply(this,arguments)}(q,Be);return{installationEntry:Be,registrationPromise:ut}}return 1===ye.registrationStatus?{installationEntry:ye,registrationPromise:mt(q)}:{installationEntry:ye}}function rn(){return(rn=(0,h.Z)(function*(q,ye){try{const Be=yield Z(q,ye);return Ar(q.appConfig,Be)}catch(Be){throw me(Be)&&409===Be.customData.serverCode?yield hi(q.appConfig):yield Ar(q.appConfig,{fid:ye.fid,registrationStatus:0}),Be}})).apply(this,arguments)}function mt(q){return at.apply(this,arguments)}function at(){return(at=(0,h.Z)(function*(q){let ye=yield Lt(q.appConfig);for(;1===ye.registrationStatus;)yield ie(100),ye=yield Lt(q.appConfig);if(0===ye.registrationStatus){const{installationEntry:Be,registrationPromise:ut}=yield yn(q);return ut||Be}return ye})).apply(this,arguments)}function Lt(q){return vn(q,ye=>{if(!ye)throw Je.create("installation-not-found");return an(ye)})}function an(q){return function Yn(q){return 1===q.registrationStatus&&q.registrationTime+1e4<Date.now()}(q)?{fid:q.fid,registrationStatus:0}:q}function Qn(q,ye){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*({appConfig:q,heartbeatServiceProvider:ye},Be){const ut=Kr(q,Be),Bt=Ce(q,Be),Xt=ye.getImmediate({optional:!0});if(Xt){const _r=yield Xt.getHeartbeatsHeader();_r&&Bt.append("x-firebase-client",_r)}const hn={method:"POST",headers:Bt,body:JSON.stringify({installation:{sdkVersion:he,appId:q.appId}})},Lr=yield Ge(()=>fetch(ut,hn));if(Lr.ok)return ot(yield Lr.json());throw yield rt("Generate Auth Token",Lr)})).apply(this,arguments)}function Kr(q,{fid:ye}){return`${ue(q)}/${ye}/authTokens:generate`}function Kt(q){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(q,ye=!1){let Be;const ut=yield vn(q.appConfig,Xt=>{if(!H(Xt))throw Je.create("not-registered");const kn=Xt.authToken;if(!ye&&Ae(kn))return Xt;if(1===kn.requestStatus)return Be=qt(q,ye),Xt;{if(!navigator.onLine)throw Je.create("app-offline");const hn=it(Xt);return Be=k(q,hn),hn}});return Be?yield Be:ut.authToken})).apply(this,arguments)}function qt(q,ye){return z.apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(q,ye){let Be=yield U(q.appConfig);for(;1===Be.authToken.requestStatus;)yield ie(100),Be=yield U(q.appConfig);const ut=Be.authToken;return 0===ut.requestStatus?Kt(q,ye):ut})).apply(this,arguments)}function U(q){return vn(q,ye=>{if(!H(ye))throw Je.create("not-registered");return function un(q){return 1===q.requestStatus&&q.requestTime+1e4<Date.now()}(ye.authToken)?Object.assign(Object.assign({},ye),{authToken:{requestStatus:0}}):ye})}function k(q,ye){return B.apply(this,arguments)}function B(){return(B=(0,h.Z)(function*(q,ye){try{const Be=yield Qn(q,ye),ut=Object.assign(Object.assign({},ye),{authToken:Be});return yield Ar(q.appConfig,ut),Be}catch(Be){if(!me(Be)||401!==Be.customData.serverCode&&404!==Be.customData.serverCode){const ut=Object.assign(Object.assign({},ye),{authToken:{requestStatus:0}});yield Ar(q.appConfig,ut)}else yield hi(q.appConfig);throw Be}})).apply(this,arguments)}function H(q){return void 0!==q&&2===q.registrationStatus}function Ae(q){return 2===q.requestStatus&&!function ze(q){const ye=Date.now();return ye<q.creationTime||q.creationTime+q.expiresIn<ye+36e5}(q)}function it(q){const ye={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},q),{authToken:ye})}function re(){return(re=(0,h.Z)(function*(q){const ye=q,{installationEntry:Be,registrationPromise:ut}=yield yn(ye);return ut?ut.catch(console.error):Kt(ye).catch(console.error),Be.fid})).apply(this,arguments)}function Ee(){return(Ee=(0,h.Z)(function*(q,ye=!1){const Be=q;return yield Le(Be),(yield Kt(Be,ye)).token})).apply(this,arguments)}function Le(q){return We.apply(this,arguments)}function We(){return(We=(0,h.Z)(function*(q){const{registrationPromise:ye}=yield yn(q);ye&&(yield ye)})).apply(this,arguments)}function sn(q){return Je.create("missing-app-config-values",{valueName:q})}const fi="installations",Ei=q=>{const ye=q.getProvider("app").getImmediate(),Be=function Pn(q){if(!q||!q.options)throw sn("App Configuration");if(!q.name)throw sn("App Name");const ye=["projectId","apiKey","appId"];for(const Be of ye)if(!q.options[Be])throw sn(Be);return{appName:q.name,projectId:q.options.projectId,apiKey:q.options.apiKey,appId:q.options.appId}}(ye);return{app:ye,appConfig:Be,heartbeatServiceProvider:(0,Q._getProvider)(ye,"heartbeat"),_delete:()=>Promise.resolve()}},Bi=q=>{const ye=q.getProvider("app").getImmediate(),Be=(0,Q._getProvider)(ye,fi).getImmediate();return{getId:()=>function tn(q){return re.apply(this,arguments)}(Be),getToken:Bt=>function ce(q){return Ee.apply(this,arguments)}(Be,Bt)}};(function kt(){(0,Q._registerComponent)(new P.wA(fi,Ei,"PUBLIC")),(0,Q._registerComponent)(new P.wA("installations-internal",Bi,"PRIVATE"))})(),(0,Q.registerVersion)(pe,oe),(0,Q.registerVersion)(pe,oe,"esm2017")},1877:(pt,Me,R)=>{R.d(Me,{Am:()=>he,Ub:()=>ge,Yd:()=>oe,in:()=>Q});const h=[];var Q=(()=>{return(V=Q||(Q={}))[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",Q;var V})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ne=Q.INFO,de={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},pe=(V,j,...K)=>{if(j<V.logLevel)return;const Oe=(new Date).toISOString(),be=de[j];if(!be)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[be](`[${Oe}]  ${V.name}:`,...K)};class oe{constructor(j){this.name=j,this._logLevel=ne,this._logHandler=pe,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Q))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...j),this._logHandler(this,Q.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...j),this._logHandler(this,Q.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...j),this._logHandler(this,Q.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...j),this._logHandler(this,Q.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...j),this._logHandler(this,Q.ERROR,...j)}}function ge(V){h.forEach(j=>{j.setLogLevel(V)})}function he(V,j){for(const K of h){let Oe=null;j&&j.level&&(Oe=P[j.level]),K.userLogHandler=null===V?null:(be,Ie,...Je)=>{const me=Je.map(ue=>{if(null==ue)return null;if("string"==typeof ue)return ue;if("number"==typeof ue||"boolean"==typeof ue)return ue.toString();if(ue instanceof Error)return ue.message;try{return JSON.stringify(ue)}catch{return null}}).filter(ue=>ue).join(" ");Ie>=(Oe??be.logLevel)&&V({level:Q[Ie].toLowerCase(),message:me,args:Je,type:be.name})}}}},8766:(pt,Me,R)=>{R.d(Me,{Lj:()=>xe,X3:()=>rt});var h=R(5861);let P,ne;const oe=new WeakMap,ge=new WeakMap,he=new WeakMap,V=new WeakMap,j=new WeakMap;let be={get(L,ve,Z){if(L instanceof IDBTransaction){if("done"===ve)return ge.get(L);if("objectStoreNames"===ve)return L.objectStoreNames||he.get(L);if("store"===ve)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return ue(L[ve])},set:(L,ve,Z)=>(L[ve]=Z,!0),has:(L,ve)=>L instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in L};function me(L){return"function"==typeof L?function Je(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(L)?function(...ve){return L.apply(ot(this),ve),ue(oe.get(this))}:function(...ve){return ue(L.apply(ot(this),ve))}:function(ve,...Z){const J=L.call(ot(this),ve,...Z);return he.set(J,ve.sort?ve.sort():[ve]),ue(J)}}(L):(L instanceof IDBTransaction&&function Oe(L){if(ge.has(L))return;const ve=new Promise((Z,J)=>{const ie=()=>{L.removeEventListener("complete",ee),L.removeEventListener("error",je),L.removeEventListener("abort",je)},ee=()=>{Z(),ie()},je=()=>{J(L.error||new DOMException("AbortError","AbortError")),ie()};L.addEventListener("complete",ee),L.addEventListener("error",je),L.addEventListener("abort",je)});ge.set(L,ve)}(L),((L,ve)=>ve.some(Z=>L instanceof Z))(L,function de(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(L,be):L)}function ue(L){if(L instanceof IDBRequest)return function K(L){const ve=new Promise((Z,J)=>{const ie=()=>{L.removeEventListener("success",ee),L.removeEventListener("error",je)},ee=()=>{Z(ue(L.result)),ie()},je=()=>{J(L.error),ie()};L.addEventListener("success",ee),L.addEventListener("error",je)});return ve.then(Z=>{Z instanceof IDBCursor&&oe.set(Z,L)}).catch(()=>{}),j.set(ve,L),ve}(L);if(V.has(L))return V.get(L);const ve=me(L);return ve!==L&&(V.set(L,ve),j.set(ve,L)),ve}const ot=L=>j.get(L);function rt(L,ve,{blocked:Z,upgrade:J,blocking:ie,terminated:ee}={}){const je=indexedDB.open(L,ve),Ve=ue(je);return J&&je.addEventListener("upgradeneeded",ht=>{J(ue(je.result),ht.oldVersion,ht.newVersion,ue(je.transaction))}),Z&&je.addEventListener("blocked",()=>Z()),Ve.then(ht=>{ee&&ht.addEventListener("close",()=>ee()),ie&&ht.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Ve}function xe(L,{blocked:ve}={}){const Z=indexedDB.deleteDatabase(L);return ve&&Z.addEventListener("blocked",()=>ve()),ue(Z).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ge=new Map;function Ue(L,ve){if(!(L instanceof IDBDatabase)||ve in L||"string"!=typeof ve)return;if(Ge.get(ve))return Ge.get(ve);const Z=ve.replace(/FromIndex$/,""),J=ve!==Z,ie=Ce.includes(Z);if(!(Z in(J?IDBIndex:IDBObjectStore).prototype)||!ie&&!we.includes(Z))return;const ee=function(){var je=(0,h.Z)(function*(Ve,...ht){const Wt=this.transaction(Ve,ie?"readwrite":"readonly");let Pt=Wt.store;return J&&(Pt=Pt.index(ht.shift())),(yield Promise.all([Pt[Z](...ht),ie&&Wt.done]))[0]});return function(ht){return je.apply(this,arguments)}}();return Ge.set(ve,ee),ee}!function Ie(L){be=L(be)}(L=>({...L,get:(ve,Z,J)=>Ue(ve,Z)||L.get(ve,Z,J),has:(ve,Z)=>!!Ue(ve,Z)||L.has(ve,Z)}))},5861:(pt,Me,R)=>{function h(P,ne,de,pe,oe,ge,he){try{var V=P[ge](he),j=V.value}catch(K){return void de(K)}V.done?ne(j):Promise.resolve(j).then(pe,oe)}function Q(P){return function(){var ne=this,de=arguments;return new Promise(function(pe,oe){var ge=P.apply(ne,de);function he(j){h(ge,pe,oe,he,V,"next",j)}function V(j){h(ge,pe,oe,he,V,"throw",j)}he(void 0)})}}R.d(Me,{Z:()=>Q})}},pt=>{pt(pt.s=1755)}]);